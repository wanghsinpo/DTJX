#!/usr/bin/ksh
trap "" 23

ECHO=print
CFGDIR=/opt/SPECS/sys/config
FWKDIR=/opt/SPECS/usr/fwk
USRBIN=/usr/bin

setup_eventtype()
{
    $ECHO
    $ECHO "#### VGEM EventReport Stream Function Setup ####"
    $ECHO "Type 1 (=S6F13) or 0 (=S6F11), then press Return."
    $ECHO
    $ECHO "Default = '1'. [quit='q'] : \c"
    read ASSIGN
    $ECHO
    if [ "$ASSIGN" = "q" ]
    then
      exit
    elif [ "$ASSIGN" = "1" ]
    then
      $ECHO
    elif [ "$ASSIGN" = "0" ]
    then
      $ECHO
    elif [ "$ASSIGN" = "" ]
    then
      ASSIGN="1"
      $ECHO
    else
      exit
    fi

   
    TEMPMAK=/opt/SPECS_FA/dmh/vgem/defaults.ini
    if [ -f $TEMPMAK ]; then
      if $USRBIN/grep AnnotateEventReports $TEMPMAK >/dev/null;then
        sed -e "s/^VGEM AnnotateEventReports .*/VGEM AnnotateEventReports $ASSIGN/" $TEMPMAK > $TEMPMAK.tmp
        mv $TEMPMAK.tmp $TEMPMAK
        chmod 444 $TEMPMAK
        chown root:sys $TEMPMAK
        $ECHO "Customizing $TEMPMAK..."
      fi
    fi
}

if [ `id -un` != "root" ]; then
    $ECHO "ERROR: You must log in as root."
    exit
else
    setup_eventtype
fi
