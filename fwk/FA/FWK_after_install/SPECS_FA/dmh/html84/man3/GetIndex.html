<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<A NAME="Tcl_GetIndexFromObj_Tcl_8_1"></A>
<TITLE>Tcl_GetIndexFromObj Tcl Library Procedures 8.1</TITLE></HEAD>
<BODY>
<HR>
<P>
<H2>NAME</H2>
 Tcl_GetIndexFromObj, Tcl_GetIndexFromObjStruct - lookup string in table of keywords <P>
<H2>SYNOPSIS</H2>
 
<B>#include &lt;tcl.h&gt;</B>
<P>
int
<B>Tcl_GetIndexFromObj</B>(<I>interp, objPtr, tablePtr, msg, flags,
indexPtr</I>)
<P>
int
<B>Tcl_GetIndexFromObjStruct</B>(<I>interp, objPtr, structTablePtr, offset,
msg, flags, indexPtr</I>)
<P>
<H2>ARGUMENTS</H2>

<P><DT><B>Tcl_Interp <I>*interp</I></B> (in)
<DD>Interpreter to use for error reporting; if NULL, then no message is
provided on errors.
<P><DT><B>Tcl_Obj <I>*objPtr</I></B> (in/out)
<DD>The string value of this object is used to search through <I>tablePtr</I>.
The internal representation is modified to hold the index of the matching
table entry.
<P><DT><B>CONST char <I>**tablePtr</I></B> (in)
<DD>An array of null-terminated strings.  The end of the array is marked
by a NULL string pointer.
<P><DT><B>CONST VOID <I>*structTablePtr</I></B> (in)
<DD>An array of arbitrary type, typically some <B>struct</B> type.
The first member of the structure must be a null-terminated string.
The size of the structure is given by <I>offset</I>.
<P><DT><B>int <I>offset</I></B> (in)
<DD>The offset to add to structTablePtr to get to the next entry.
The end of the array is marked by a NULL string pointer.
<P><DT><B>CONST char <I>*msg</I></B> (in)
<DD>Null-terminated string describing what is being looked up, such as
<B>option</B>.  This string is included in error messages.
<P><DT><B>int <I>flags</I></B> (in)
<DD>OR-ed combination of bits providing additional information for
operation.  The only bit that is currently defined is <B>TCL_EXACT</B>.
<P><DT><B>int <I>*indexPtr</I></B> (out)
<DD>The index of the string in <I>tablePtr</I> that matches the value of
<I>objPtr</I> is returned here.
<HR>
<P>
<P>
<H2>DESCRIPTION</H2>

<P>
This procedure provides an efficient way for looking up keywords,
switch names, option names, and similar things where the value of
an object must be one of a predefined set of values.
<I>ObjPtr</I> is compared against each of
the strings in <I>tablePtr</I> to find a match.  A match occurs if
<I>objPtr</I>'s string value is identical to one of the strings in
<I>tablePtr</I>, or if it is a unique abbreviation
for exactly one of the strings in <I>tablePtr</I> and the
<B>TCL_EXACT</B> flag was not specified; in either case
the index of the matching entry is stored at <I>*indexPtr</I>
and TCL_OK is returned.
<P>
If there is no matching entry,
TCL_ERROR is returned and an error message is left in <I>interp</I>'s
result if <I>interp</I> isn't NULL.  <I>Msg</I> is included in the
error message to indicate what was being looked up.  For example,
if <I>msg</I> is <B>option</B> the error message will have a form like
<B>bad option "firt": must be first, second, or third</B>.
<P>
If <B>Tcl_GetIndexFromObj</B> completes successfully it modifies the
internal representation of <I>objPtr</I> to hold the address of
the table and the index of the matching entry.  If <B>Tcl_GetIndexFromObj</B>
is invoked again with the same <I>objPtr</I> and <I>tablePtr</I>
arguments (e.g. during a reinvocation of a Tcl command), it returns
the matching index immediately without having to redo the lookup
operation.  Note: <B>Tcl_GetIndexFromObj</B> assumes that the entries
in <I>tablePtr</I> are static: they must not change between
invocations.  If the value of <I>objPtr</I> is the empty string,
<B>Tcl_GetIndexFromObj</B> will treat it as a non-matching value
and return TCL_ERROR.
<P>
<B>Tcl_GetIndexFromObjStruct</B> works just like
<B>Tcl_GetIndexFromObj</B>, except that instead of treating
<I>tablePtr</I> as an array of string pointers, it treats it as the
first in a series of string ptrs that are spaced apart by <I>offset</I>
bytes. This is particularly useful when processing things like
<B>Tk_ConfigurationSpec</B>, whose string keys are in the same place in
each of several array elements.
<P>
<P>
<H2>SEE ALSO</H2>

Tcl_WrongNumArgs
<P>
<P>
<H2>KEYWORDS</H2>

index, object, table lookup

</BODY>
</HTML>
