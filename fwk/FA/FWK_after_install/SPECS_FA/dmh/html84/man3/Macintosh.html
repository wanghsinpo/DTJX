<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<A NAME="Tcl_MacSetEventProc_Tcl_8_1"></A>
<TITLE>Tcl_MacSetEventProc Tcl Library Procedures 8.1</TITLE></HEAD>
<BODY>
<HR>
<P>
<H2>NAME</H2>
 Tcl_MacSetEventProc, Tcl_MacConvertTextResource, Tcl_MacEvalResource, Tcl_MacFindResource, Tcl_GetOSTypeFromObj, Tcl_SetOSTypeObj, Tcl_NewOSTypeObj - procedures to handle Macintosh resources and other Macintosh specifics <P>
<H2>SYNOPSIS</H2>
 
<B>#include &lt;tcl.h&gt;</B>
<P>
int
<B>Tcl_MacEvalResource</B>(<I>interp, resourceName, resourceNumber, fileName</I>)
<P>
char*
<B>Tcl_MacConvertTextResource</B>(<I>resource</I>)
<P>
Handle
<B>Tcl_MacFindResource</B>(<I>interp, resourceType, resourceName, resourceNumber, resFileRef, releaseIt</I>)
<P>
Tcl_Obj*
<B>Tcl_NewOSTypeObj</B>(<I>newOSType</I>)
<P>
void
<B>Tcl_SetOSTypeObj</B>(<I>objPtr, newOSType</I>)
<P>
int
<B>Tcl_GetOSTypeFromObj</B>(<I>interp, objPtr, osTypePtr</I>)
<P>
void
<B>Tcl_MacSetEventProc</B>(<I>procPtr</I>)
<P>
<H2>ARGUMENTS</H2>

<P><DT><B>Tcl_Interp <I>*interp</I></B> (in)
<DD>Interpreter to use for error reporting, or NULL if no error reporting is
desired.
<P><DT><B>CONST char <I>*resourceName</I></B> (in)
<DD>Name of TEXT resource to source, NULL if number should be used.
<P><DT><B>int <I>resourceNumber</I></B> (in)
<DD>Resource id of source.
<P><DT><B>CONST char <I>*fileName</I></B> (in)
<DD>Name of file to process. NULL if application resource.
<P><DT><B>Handle <I>resource</I></B> (in)
<DD>Handle to TEXT resource.
<P><DT><B>long <I>resourceType</I></B> (in)
<DD>Type of resource to load.
<P><DT><B>CONST char <I>*resFileRef</I></B> (in)
<DD>Registered resource file reference, NULL if searching all open resource files.
<P><DT><B>int <I>*releaseIt</I></B> (out)
<DD>Should we release this resource when done.
<P><DT><B>int <I>newOSType</I></B> (in)
<DD>Int used to initialize the new object or set the object's value.
<P><DT><B>Tcl_Obj <I>*objPtr</I></B> (in)
<DD>Object whose internal representation is to be set or retrieved.
<P><DT><B>osTypePtr <I>out</I></B> ()
<DD>Place to store the resulting integer.
<P><DT><B>Tcl_MacConvertEventPtr <I>procPtr</I></B> (in)
<DD>Reference to the new function to handle all incoming Mac events.
<P>
<HR>
<P>
<H2>INTRODUCTION</H2>

<P>
The described routines are used to implement the Macintosh specific
<B>resource</B> command and the Mac specific notifier.. They manipulate
or use Macintosh resources and provide administration for open
resource file references.
<P>
<P>
<H2>DESCRIPTION</H2>

<P>
<B>Tcl_MacEvalResource</B> extends the <B>source</B> command to
Macintosh resources.  It sources Tcl code from a Text resource.
Currently only sources the resource by name, file IDs may be supported
at a later date.
<P>
<B>Tcl_MacConvertTextResource</B> converts a TEXT resource into a Tcl
suitable string. It mallocs the returned memory, converts ``\r'' to
``\n'', and appends a null. The caller has the responsibility for
freeing the memory.
<P>
<B>Tcl_MacFindResource</B> provides a higher level interface for
loading resources. It is used by <B>resource read</B>.
<P>
<B>Tcl_NewOSTypeObj</B> is used to create a new resource name type
object. The object type is "ostype".
<P>
<B>Tcl_SetOSTypeObj</B> modifies an object to be a resource type and to
have the specified long value.
<P>
<B>Tcl_GetOSTypeFromObj</B> attempts to return an int from the Tcl
object "objPtr". If the object is not already an int, an attempt will
be made to convert it to one.
<P>
<B>Tcl_MacSetEventProc</B> sets the event handling procedure for the
application. This function will be passed all incoming Mac events.
This function usually controls the console or some other entity like
Tk.
<P>
<P>
<H2>RESOURCE TYPES</H2>

<P>
Resource types are 4-byte values used by the macintosh resource
facility to tag parts of the resource fork in a file so that the OS
knows how to handle them. As all 4 bytes are restricted to printable
characters such a type can be interpreted as a 4 character string too.
<P>
<P>
<H2>KEYWORDS</H2>

macintosh, mac, resource, notifier

</BODY>
</HTML>
