<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<A NAME="Tcl_AppInit_Tcl_7_0"></A>
<TITLE>Tcl_AppInit Tcl Library Procedures 7.0</TITLE></HEAD>
<BODY>
<HR>
<P>
<H2>NAME</H2>
 Tcl_AppInit - perform application-specific initialization <P>
<H2>SYNOPSIS</H2>
 
<B>#include &lt;tcl.h&gt;</B>
<P>
int
<B>Tcl_AppInit</B>(<I>interp</I>)
<P>
<H2>ARGUMENTS</H2>

<P><DT><B>Tcl_Interp <I>*interp</I></B> (in)
<DD>Interpreter for the application.
<HR>
<P>
<P>
<H2>DESCRIPTION</H2>

<P>
<B>Tcl_AppInit</B> is a ``hook'' procedure that is invoked by
the main programs for Tcl applications such as <B>tclsh</B> and <B>wish</B>.
Its purpose is to allow new Tcl applications to be created without
modifying the main programs provided as part of Tcl and Tk.
To create a new application you write a new version of
<B>Tcl_AppInit</B> to replace the default version provided by Tcl,
then link your new <B>Tcl_AppInit</B> with the Tcl library.
<P>
<B>Tcl_AppInit</B> is invoked after by <B>Tcl_Main</B> and <B>Tk_Main</B>
after their own initialization and before entering the main loop
to process commands.
Here are some examples of things that <B>Tcl_AppInit</B> might do:

<DT>[1]
<DD>Call initialization procedures for various packages used by the application. Each initialization procedure adds new commands to <I>interp</I> for its package and performs other package-specific initialization. 
<DT>[2]
<DD>Process command-line arguments, which can be accessed from the Tcl variables <B>argv</B> and <B>argv0</B> in <I>interp</I>. 
<DT>[3]
<DD>Invoke a startup script to initialize the application. <P>
<B>Tcl_AppInit</B> returns TCL_OK or TCL_ERROR. If it returns TCL_ERROR then it must leave an error message in for the interpreter's result;  otherwise the result is ignored. <P>
In addition to <B>Tcl_AppInit</B>, your application should also contain a procedure <B>main</B> that calls <B>Tcl_Main</B> as follows: <PRE>
Tcl_Main(argc, argv, Tcl_AppInit);
</PRE>
The third argument to <B>Tcl_Main</B> gives the address of the application-specific initialization procedure to invoke. This means that you don't have to use the name <B>Tcl_AppInit</B> for the procedure, but in practice the name is nearly always <B>Tcl_AppInit</B> (in versions before Tcl 7.4 the name <B>Tcl_AppInit</B> was implicit;  there was no way to specify the procedure explicitly). The best way to get started is to make a copy of the file <B>tclAppInit.c</B> from the Tcl library or source directory. It already contains a <B>main</B> procedure and a template for <B>Tcl_AppInit</B> that you can modify for your application. <P>
<P>
<H2>KEYWORDS</H2>
 application, argument, command, initialization, interpreter 
</BODY>
</HTML>
