<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<A NAME="Tcl_Panic_Tcl_8_4"></A>
<TITLE>Tcl_Panic Tcl Library Procedures 8.4</TITLE></HEAD>
<BODY>
<HR>
<P>
<H2>NAME</H2>
 Tcl_Panic, Tcl_PanicVA, Tcl_SetPanicProc, panic, panicVA - report fatal error and abort <P>
<H2>SYNOPSIS</H2>
 
<B>#include &lt;tcl.h&gt;</B>
<P>
void
<B>Tcl_Panic</B>(<I>format</I>, <I>arg</I>, <I>arg</I>, <I>...</I>)
<P>
void
<B>Tcl_PanicVA</B>(<I>format</I>, <I>argList</I>)
<P>
void
<B>Tcl_SetPanicProc</B>(<I>panicProc</I>)
<P>
void
<B>panic</B>(<I>format</I>, <I>arg</I>, <I>arg</I>, <I>...</I>)
<P>
void
<B>panicVA</B>(<I>format</I>, <I>argList</I>)
<P>
<P>
<H2>ARGUMENTS</H2>

<P><DT><B>CONST char* <I>format</I></B> (in)
<DD>A printf-style format string.
<P><DT><B> <I>arg</I></B> (in)
<DD>Arguments matching the format string.
<P><DT><B>va_list <I>argList</I></B> (in)
<DD>An argument list of arguments matching the format string.
Must have been initialized using <B>TCL_VARARGS_START</B>,
and cleared using <B>va_end</B>.
<P><DT><B>Tcl_PanicProc <I>*panicProc</I></B> (in)
<DD>Procedure to report fatal error message and abort.
<P>
<HR>
<P>
<P>
<H2>DESCRIPTION</H2>

<P>
When the Tcl library detects that its internal data structures are in an
inconsistent state, or that its C procedures have been called in a
manner inconsistent with their documentation, it calls <B>Tcl_Panic</B>
to display a message describing the error and abort the process.  The
<I>format</I> argument is a format string describing how to format the
remaining arguments <I>arg</I> into an error message, according to the
same formatting rules used by the <B>printf</B> family of functions.  The
same formatting rules are also used by the builtin Tcl command
<B>format</B>.
<P>
In a freshly loaded Tcl library, <B>Tcl_Panic</B> prints the formatted
error message to the standard error file of the process, and then
calls <B>abort</B> to terminate the process.  <B>Tcl_Panic</B> does not
return.
<P>
<B>Tcl_SetPanicProc</B> may be used to modify the behavior of
<B>Tcl_Panic</B>.  The <I>panicProc</I> argument should match the
type <B>Tcl_PanicProc</B>:
<P>
<PRE>
typedef void Tcl_PanicProc(
	CONST char *<B>format</B>,
	<B>arg</B>, <B>arg</B>,...);
</PRE>
<P>
After <B>Tcl_SetPanicProc</B> returns, any future calls to <B>Tcl_Panic</B> will call <I>panicProc</I>, passing along the <I>format</I> and <I>arg</I> arguments.  To maintain consistency with the callers of <B>Tcl_Panic</B>, <I>panicProc</I> must not return; it must call <B>abort</B>.  <I>panicProc</I> should avoid making calls into the Tcl library, or into other libraries that may call the Tcl library, since the original call to <B>Tcl_Panic</B> indicates the Tcl library is not in a state of reliable operation.   <P>
The typical use of <B>Tcl_SetPanicProc</B> arranges for the error message to be displayed or reported in a manner more suitable for the application or the platform.  As an example, the Windows implementation of <B>wish</B> calls <B>Tcl_SetPanicProc</B> to force all panic messages to be displayed in a system dialog box, rather than to be printed to the standard error file (usually not visible under Windows). <P>
Although the primary callers of <B>Tcl_Panic</B> are the procedures of the Tcl library, <B>Tcl_Panic</B> is a public function and may be called by any extension or application that wishes to abort the process and have a panic message displayed the same way that panic messages from Tcl will be displayed. <P>
<B>Tcl_PanicVA</B> is the same as <B>Tcl_Panic</B> except that instead of taking a variable number of arguments it takes an argument list.  The procedures <B>panic</B> and <B>panicVA</B> are synonyms (implemented as macros) for <B>Tcl_Panic</B> and <B>Tcl_PanicVA</B>, respectively.  They exist to support old code; new code should use direct calls to <B>Tcl_Panic</B> or <B>Tcl_PanicVA</B>. <P>
<P>
<H2>SEE ALSO</H2>
 abort(3), printf(3), <a href="../mann/exec.html">exec</a>, <a href="../mann/format.html">format</a> <P>
<P>
<H2>KEYWORDS</H2>
 abort, fatal, error <P>

</BODY>
</HTML>
