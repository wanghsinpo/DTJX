<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<A NAME="encoding_Tcl_8_1"></A>
<TITLE>encoding Tcl Built-In Commands 8.1</TITLE></HEAD>
<BODY>
<HR>
<P>
<H2>NAME</H2>
 encoding - Manipulate encodings <P>
<H2>SYNOPSIS</H2>
 <B>encoding <I>option</B></I> ?<I>arg arg ...</I>? <HR>
<P>
<P>
<H2>INTRODUCTION</H2>
 <P>
Strings in Tcl are encoded using UTF-8 character sequences.  Different operating system interfaces or applications may generate strings in other encodings such as Shift-JIS.  The <B>encoding</B> command helps to bridge the gap between Tcl strings and these other formats. <P>
<P>
<H2>DESCRIPTION</H2>
 <P>
Performs one of several encoding related operations, depending on <I>option</I>.  The legal <I>option</I>s are: 
<DT><B>encoding convertfrom ?<I>encoding</B></I>? <I>data</I>
<DD>Convert <I>data</I> to a Tcl string from the specified <I>encoding</I>.  The characters in <I>data</I> are treated as binary data where the lower 8-bits of each character is taken as a single byte.  The resulting sequence of bytes is treated as a string in the specified <I>encoding</I>.  If <I>encoding</I> is not specified, the current system encoding is used. 
<DT><B>encoding convertto ?<I>encoding</B></I>? <I>string</I>
<DD>Convert <I>string</I> from a Tcl string to the specified <I>encoding</I>. The result is a sequence of characters that represents the converted string.  Each byte in the target encoding may be obtained by iterating the result using string index.  If <I>encoding</I> is not specified, the current system encoding is used.&nbsp; The following example creates a list of integer codes showing 
the byte sequence of an encoded result:
<PRE>
   set text "caf\u00e9"   ;# caf&eacute;
   set unitext [encoding convertto unicode $text]
   set imax [string length $unitext]   ;# do not use string bytelength
   for {set i 0} {$i < $imax} {incr i} {
       set ch [string index $unitext $i]
       scan $ch %c ich
       lappend icodes $ich 
       }
  puts $icodes

    99 0 97 0 102 0 233 0   ;# on littleEndian platforms
    0 99 0 97 0 102 0 233   ;# on bigEndian platforms
    
</PRE>
The unicode encoding results in a sequence of two byte integers that have your
platform's big-endian or little-endian ordering.  The <a href="tclvars.html">tcl_platform(byteOrder)</a>
global variable specifies the order used.
<DT><B>encoding names</B>
<DD>Returns a list containing the names of all of the encodings that are currently available.  
<DT><B>encoding system</B> ?<I>encoding</I>?
<DD>Set the system encoding to <I>encoding</I>. If <I>encoding</I> is omitted then the command returns the current system encoding.  The system encoding is used whenever Tcl passes strings to system calls. <P>
<P>
<H2>EXAMPLE</H2>
 <P>
It is common practice to write script files using a text editor that produces output in the euc-jp encoding, which represents the ASCII characters as single bytes and Japanese characters as two bytes.  This makes it easy to embed literal strings that correspond to non-ASCII characters by simply typing the strings in place in the script. However, because the <B>source</B> command always reads files using the 
current system encoding, Tcl will only source such files correctly
when the encoding used to write the file is the same.  This tends not
to be true in an internationalized setting.  For example, if such a
file was sourced in North America (where the ISO8859-1 is normally
used), each byte in the file would be treated as a separate character
that maps to the 00 page in Unicode.  The resulting Tcl strings will
not contain the expected Japanese characters.  Instead, they will
contain a sequence of Latin-1 characters that correspond to the bytes
of the original string.  The <B>encoding</B> command can be used to
convert this string to the expected Japanese Unicode characters.  For example,

<PRE>
	set s [encoding convertfrom euc-jp "\xA4\xCF"]
</PRE>
would return a string equivalent to "\u306F", which is the Hiragana letter HA. <P>
<P>
<H2>SEE ALSO</H2>
 Tcl_GetEncoding(3) <P>
<P>
<H2>KEYWORDS</H2>
 encoding 
</BODY>
</HTML>
