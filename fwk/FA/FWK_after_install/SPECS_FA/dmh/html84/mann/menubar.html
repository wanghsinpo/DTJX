<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<HTML><HEAD>
<A NAME="iwidgets__menubar_iwid_"></A>
<TITLE>iwidgets::menubarSection iwid</TITLE></HEAD>
<BODY>
<HR>
<P>
<H2>NAME</H2>
 iwidgets::menubar - Create and manipulate menubar menu widgets <P>
<H2>SYNOPSIS</H2>
 <B>iwidgets::menubar</B> <I>pathName</I> ?<I>options</I>? <P>
<H2>INHERITANCE</H2>
 itk::Widget &lt;- iwidgets::Menubar <P>
<H2>STANDARD OPTIONS</H2>
 <P>

<B>
activeBackground      activeBorderWidth     activeForeground
anchor                background            borderWidth
cursor                disabledForeground    font
foreground            highlightBackground   hightlightColor 
highligthThickness    justify               relief
padX                  padY                  wrapLength</B>
 <P>
See the <a href="../mann/options.html">options</a> manual entry for details on the standard options. <P>
<H2>WIDGET-SPECIFIC OPTIONS</H2>
 <P>

Name:	<B>helpVariable</B>
Class:	<B>HelpVariable</B>
Command-Line Switch:	<B>-helpvariable</B>
 
<DD> Specifies the global variable to update whenever the mouse is in motion over a menu entry. This global variable is updated with the current value of the active menu entry's <B>helpStr</B>. Other widgets can "watch" this variable with the trace command, or as is the case with entry or label widgets, they can set their <B>textVariable</B> to the same global variable. This allows for a simple implementation of a help status bar. Whenever the mouse leaves a menu entry, the helpVariable is set to the empty string {}. The mainwindow(1) associates its helpstatus and its menubar in this fashion. <P>

Name:	<B>menuButtons</B>
Class:	<B>MenuButtons</B>
Command-Line Switch:	<B>-menubuttons</B>
 
<DD> The menuButton option is a string which specifies the arrangement of menubuttons on the menubar frame. Each menubutton entry is delimited by the newline character. 

<DD>
iwidgets::menubar .mb -menubuttons {
	menubutton file -text File
	menubutton edit -text Edit
	menubutton options -text Options
}
 
<DD> specifies that three menubuttons will be added to the menubar (file, edit, options). Each entry is translated into an add command call. 
<DD> The <B>menuButtons</B> option can accept embedded variables, commands, and backslash quoting. Embedded variables and commands must be enclosed in curly braces ({}) to ensure proper parsing of the substituted values. <HR>
<P>
<H2>DESCRIPTION</H2>
 <P>
The <B>iwidgets::menubar</B> command creates a new window (given by the <I>pathName</I> argument) and makes it into a <B>menubar</B> menu widget. Additional options, described above may be specified on the command line or in the option database to configure aspects of the menubar such as its colors and font. The <B>iwidgets::menubar</B> command returns its <I>pathName</I> argument. At the time this command is invoked, there must not exist a window named pathName, but pathName's parent must exist. <P>
A <B>menubar</B> is a widget that simplifies the task of creating menu hierarchies. It encapsulates a <B>frame</B> widget, as well as <B>menubuttons</B>, <B>menus</B>, and menu <B>entries</B>. The menubar allows menus to be specified and referenced in a more consistent manner than using Tk to build menus directly.  <P>
<B>Menubar</B> allows a menu tree to be expressed in a hierachical "language". The <B>menubar</B> accepts a <B>menuButtons</B> option that allows a list of menubuttons to be added to the menubar. In turn, each menubutton accepts a <B>menu</B> option that specifies a list of menu entries to be added to the menubutton's menu. Cascade entries also accept the <B>menu</B> option for specifying a list of menu entries to be added to the cascade's menu.  <P>
Additionally, the menubar allows each component of the menubar system to be referenced by a simple <I>menuPathName</I> syntax. The menubar also extends the set of options for menu entries to include a <B>helpStr</B> option. <P>
<H2>MENU PATH NAMES</H2>
 <P>
A <I>menuPathName</I> is a series of component names separated by the `.' character. Each menubar component can be referenced via these <I>menuPathNames</I>. <I>menuPathNames</I> are similar to widget pathNames in Tk. Some correspond directly to a widget pathName (components of type <B>menu</B> or <B>menubutton</B>), others correspond to a menu entry type. Every widget and entry in a menubar can be referenced with the <I>menuPathName</I> naming convention. A menubar can have four types of components: 
<DD> <B>frame</B>. A menubar holds exactly one frame which manages menubuttons. The frame is always signified by the `.' character as the path name. 
<DD> <B>menubutton</B>. A menubutton corresponds directly to a Tk menubutton. See <a href="../mann/menubutton.html">menubutton</a>. 
<DD> <B>menu</B>. A menu is attached to a menubutton and corresponds directly to Tk's menu widget. A menu is always signified by the <I>menuPathName</I> ending with the keyword <B>menu</B>. See <a href="../mann/menu.html">menu</a>. 
<DD> <B>entry</B>. An entry corresponds directly to Tk's menu widget entries. Menus consist of a column of one line entries. Entries may be of type: <B>command</B>, <B>checkbutton</B>, <B>radiobutton</B>, <B>separator</B>, or <B>cascade</B>. For a complete description of these types see the discussion on <B>ENTRIES</B> in <a href="../mann/menu.html">menu</a>. <P>
The suffix of a <I>menuPathName</I> may have the form of: 
<DT><I>tkWidgetName</I>
<DD>Specifies the name of the component, either a <B>frame</B>, <B>menubutton</B>, <B>menu</B>, or an <B>entry</B>. This is the normal naming of widgets. For example, .file references a <B>menubutton</B> named <I>file</I>. <P>
The <I>menuPathName</I> is a series of segment names, each separated by the '.' character. Segment names may be one of the following forms: 
<DT><I>number</I>
<DD>Specifies the index of the component. For menubuttons, 0 corresponds to the left-most menubutton of the menu bar frame. As an example, <I>.1</I> would correspond to the second menubutton on the menu bar frame.  
<DD> For entries, 0 corresponds to the top-most entry of the menu. For example, .file.0 would correspond to the first entry on the menu attached to the menubutton named <I>file</I>. 
<DT><B>end</B>
<DD>Specifes the last component. For menubuttons, it specifies the right-most entry of the menu bar frame. For menu entries, it specifies the bottom-most entry of the menu.  
<DT><B>last</B>
<DD>Same as end. <P>
Finally, menu components always end with the <B>menu</B> keyword. These components are automatically created via the -menu option on menubuttons and cascades or via the <B>add</B> or <B>insert</B> commands. 
<DT><B>menu</B>
<DD>Specifes the menu pane that is associated with the given menubutton prefix. For example, <I>.file.menu</I> specifies the menu pane attached to the <I>.file</I> menubutton. <P>
For example, the path <I>.file.new</I> specifies the entry named new on the menu associated with the file menubutton located on the menu bar. The path <I>.file.menu</I> specifies the menu pane associated with the menubutton <I>.file</I>. The path <I>.last</I> specifies the last menu on the menu bar. The path <I>.0.last</I> would specify the first menu (file) and the last entry on that menu (quit), yielding <I>.file.quit</I>. <P>
As a restriction, the last name segment of <I>menuPathName</I> cannot be one of the keywords last, menu, end, nor may it be a numeric value (integer). <P>
<H2>WIDGET-SPECIFIC METHODS</H2>
 <P>
The <B>iwidgets::menubar</B> command creates a new Tcl command whose name is <I>pathName</I>. This command may be used to invoke various operations on the widget. It has the following general form: <PRE>
<I>pathName option </I>?<I>arg arg ...</I>?
</PRE>
<I>option</I> and the <I>arg</I>s determine the exact behavior of the command. <P>
In addition, many of the widget commands for menubar take as one argument a path name to a menu component. These path names are called <I>menuPathName</I>s. See the discussion on <B>MENUBAR PATH NAMES</B> above. <P>
The following commands are possible for menubar widgets: 
<DT><I>pathName</I> <B>add</B> <I>type</I> <I>menuPathName</I> ?<I>option value option value</I>?
<DD>Adds either a menu to the menu bar or a menu entry to a menu pane. 
<DD> If additional arguments are present, they specify <I>option</I>s available to component type <B>entry</B>. See the man pages for <B>menu</B>(1) in the section on <B>ENTRIES</B>.  <P>
If <I>type</I> is one of <B>cascade</B>, <B>checkbutton</B>, <B>command</B>, <B>radiobutton</B>, or <B>separator</B> it adds a new entry to the bottom of the menu denoted by the prefix of <I>menuPathName</I>. If additonal arguments are present, they specify options available to menu <B>entry</B> widgets. In addition, the <B>helpStr</B> option is added by the menubar widget to all components of type entry. <DL>

<DT><B>-helpstr</B> <I>value</I>
<DD>Specifes the string to associate with the entry. When the mouse moves over the associated entry, the variable denoted by <B>helpVariable</B> is set. Another widget can bind to the helpVariable and thus display status help. </DL>

<DD> If the type of the component added is <B>menubutton</B> or <B>cascade</B>, a menubutton or cascade is added to the menubar. If additional arguments are present, they specify options available to menubutton or cascade widgets. In addition, the <B>menu</B> option is added by the menubar widget to all menubutton and cascade widgets. <DL>

<DT><B>-menu</B> <I>menuSpec</I>
<DD>This is only valid for <I>menuPathName</I>s of type <B>menubutton</B> or <B>cascade</B>. Specifes an option set and/or a set of entries to place on a menu and associate with the menubutton or cascade. The <B>option</B> keyword allows the menu widget to be configured. Each item in the <I>menuSpec</I> is treated as add commands (each with the possibility of having other -menu options). In this way a menu can be recursively built. 
<DD> The last segment of <I>menuPathName</I> cannot be one of the keywords <B>last</B>, <B>menu</B>, <B>end</B>. Additionally, it may not be a <I>number</I>. However the <I>menuPathName</I> may be referenced in this manner (see discussion of <B>COMPONENT PATH NAMES</B>). 
<DD> Note that the same curly brace quoting rules apply to <B>-menu</B> option strings as did to <B>-menubuttons</B> option strings. See the earlier discussion on <B>umenubuttons</B> in the "<B>WIDGET-SPECIFIC OPTIONS</B>" section. </DL>

<DT><I>pathName</I> <B>cget</B> <I>option</I>
<DD>Returns the current value of the configuration option given by <I>option</I>. 
<DT><I>pathName</I> <B>configure</B> ?<I>options</I> <I>value</I> <I>option</I> <I>value</I>?
<DD>Query or modify the configuration options of the widget. If no <I>option</I> is specified, returns a list describing all of the available options for <B>pathName</B> (see <B>Tk_ConfigureInfo</B> for information on the format of this list). If <I>option</I> is specified with no value, then the command returns a list describing the one named option (this list will be identical to the corresponding sublist of the value returned if no option is specified). If one or more option-value pairs are specified, then the command modifies the given widget option(s) to have the given value(s); in this case the command returns an empty string. 
<DT><I>pathName</I> <B>delete</B> <I>menuPathName</I> ?<I>menuPathName2</I>?
<DD>If <I>menuPathName</I> is of component type <B>Menubutton</B> or <B>Menu</B>, delete operates on menus. If <I>menuPathName</I> is of component type <B>Entry</B>, delete operates on menu entries. <P>
This command deletes all components between <I>menuPathName</I> and <I>menuPathName2</I> inclusive. If <I>menuPathName2</I> is omitted then it defaults to <I>menuPathName</I>. Returns an empty string. <P>
If <I>menuPathName</I> is of type menubar, then all menus and the menu bar frame will be destroyed. In this case <I>menuPathName2</I> is ignored. 
<DT><I>pathName</I> <B>index</B> <I>menuPathName</I>
<DD>If <I>menuPathName</I> is of type menubutton or menu, it returns the position of the menu/menubutton on the menubar frame.  <P>
If <I>menuPathName</I> is of type <B>command</B>, <B>separator</B>, <B>radiobutton</B>, <B>checkbutton</B>, or <B>cascade</B>, it returns the menu widget's numerical index for the entry corresponding to <I>menuPathName</I>. If path is not found or the path is equal to ".", a value of -1 is returned. 
<DT><I>pathName</I> <B>insert</B> <I>menuPathName</I> <I>type</I> <I>name</I> ?<I>option</I> <I>value</I>?
<DD>Insert a new component named name before the component specified by <I>menuPathName</I>. 
<DD> If <I>menuPathName</I> is of type <B>Menubutton</B> or <B>Menu</B>, the new component inserted is of type <B>Menu</B> and given the name name. In this case valid <I>option</I> <I>value</I> pairs are those accepted by menubuttons. 
<DD> If <I>menuPathName</I> is of type <B>Entry</B>, the new component inserted is of type <B>entry</B> and given the name <I>name</I>. In this case, valid <I>option</I> <I>value</I> pairs are those accepted by menu entries. <I>Name</I> cannot be one of the keywords <B>last</B>, <B>menu</B>, <B>end</B>. Additionally, it may not be a number. However the <I>menuPathName</I> may be referenced in this manner (see discussion of <B>COMPONENT PATH NAMES</B>). 
<DT><I>pathName</I> <B>invoke</B> <I>menuPathName</I>
<DD>Invoke the action of the menu entry denoted by <I>menuPathName</I>. See the sections on the individual entries in the menu(1) man pages. If the menu entry is disabled then nothing happens. If the entry has a command associated with it then the result of that command is returned as the result of the <B>invoke</B> widget command. Otherwise the result is an empty string. <P>
If <I>menuPathName</I> is not a menu entry, an error is issued. 
<DT><I>pathName</I> <B>menucget</B> <I>menuPathName</I> <I>option</I>
<DD>Returns the current value of the configuration option given by <I>option</I>. The component type of <I>menuPathName</I> determines the valid available options. 
<DT><I>pathName</I> <B>menuconfigure</B> <I>menuPathName</I> ?<I>option</I> <I>value</I>?
<DD>Query or modify the configuration options of the componet of the menubar specified by <I>menuPathName</I>. If no <I>option</I> is specified, returns a list describing all of the available options for <I>menuPathName</I> (see <B>Tk_ConfigureInfo</B> for information on the format of this list). If <I>option</I> is specified with no value, then the command returns a list describing the one named option (this list will be identical to the corresponding sublist of the value returned if no option is specified). If one or more option-value pairs are specified, then the command modifies the given widget option(s) to have the given value(s); in this case the command returns an empty string. The component type of <I>menuPathName</I> determines the valid available options. 
<DT><I>pathName</I> <B>path</B> ?<I>mode</I>? <I>pattern</I>
<DD>Returns a fully formed <I>menuPathName</I> that matches <I>pattern</I>. If no match is found it returns -1. The <I>mode</I> argument indicates how the search is to be matched against <I>pattern</I> and it must have one of the following values: <DL>

<DT><B>-glob</B>
<DD>Pattern is a glob-style pattern which is matched against each component path using the same rules as the string match command. 
<DT><B>-regexp</B>
<DD>Pattern is treated as a regular expression and matched against each component of the <I>menuPathName</I> using the same rules as the regexp command. The default mode is -glob. </DL>

<DT><I>pathName</I> <B>type</B> <I>menuPathName</I>
<DD>Returns the type of the component specified by <I>menuPathName</I>. For menu entries, this is the type argument passed to the <B>add</B>/<B>insert</B> widget command when the entry was created, such as <B>command</B> or <B>separator</B>. Othewise it is either a <B>menubutton</B> or a <B>menu</B>. 
<DT><I>pathName</I> <B>yposition</B> <I>menuPathName</I>
<DD>Returns a decimal string giving the y-coordinate within the menu window of the topmost pixel in the entry specified by <I>menuPathName</I>. If the <I>menuPathName</I> is not an entry, an error is issued. <P>
<H2>EXAMPLE ONE: USING GRAMMAR</H2>
 <P>
The following example creates a menubar with "File", "Edit", "Options" menubuttons. Each of these menubuttons has an associated menu.  In turn the File menu has menu entries, as well as the Edit menu and the Options menu. The Options menu is a tearoff menu with selectColor (for radiobuttons) set to blue. In addition, the Options menu has a cascade titled More, with several menu entries attached to it as well. An entry widget is  provided to display help status. <PRE>
package require Iwidgets 4.0
iwidgets::menubar .mb -helpvariable helpVar -menubuttons {
    menubutton file -text File -menu {
        options -tearoff false
        command new -label New \
            -helpstr "Open new document" \
            -command {puts NEW}
        command close -label Close \
            -helpstr "Close current document" \
            -command {puts CLOSE}
        separator sep1
        command exit -label Exit -command {exit} \
            -helpstr "Exit application"
    }
    menubutton edit -text Edit -menu {
        options -tearoff false
        command undo -label Undo -underline 0 \
            -helpstr "Undo last command" \
            -command {puts UNDO}
        separator sep2
        command cut -label Cut -underline 1 \
            -helpstr "Cut selection to clipboard" \
            -command {puts CUT}
        command copy -label Copy -underline 1 \
            -helpstr "Copy selection to clipboard" \
            -command {puts COPY}
        command paste -label Paste -underline 0 \
            -helpstr "Paste clipboard contents" \
            -command {puts PASTE}
    }
    menubutton options -text Options -menu {
        options -tearoff false -selectcolor blue
        radiobutton byName -variable viewMode \
            -value NAME -label "by Name" \
            -helpstr "View files by name order" \
            -command {puts NAME}
        radiobutton byDate -variable viewMode \
            -value DATE -label "by Date" \
            -helpstr "View files by date order" \
            -command {puts DATE}
        cascade prefs -label Preferences -menu {
            command colors -label Colors... \
                -helpstr "Change text colors" \
                -command {puts COLORS}
            command fonts -label Fonts... \
                -helpstr "Change text font" \
                -command {puts FONT}
        }
    }
<P>
}
.if

frame .fr -width 300 -height 300
entry .ef -textvariable helpVar
pack .mb -anchor nw -fill x -expand yes
pack .fr -fill both -expand yes
pack .ef -anchor sw -fill x -expand yes
.if
</PRE>
<P>
<H2>EXAMPLE TWO: USING METHODS</H2>
 Alternatively the same menu could be created by using the add and configure methods: <P>

<PRE>
 package require Iwidgets 4.0
 iwidgets::menubar .mb
 .mb configure -menubuttons {
	menubutton file -text File -menu {
		command new -label New
		command close -label Close
		separator sep1
		command 	quit -label Quit
	}
	menubutton edit -text Edit
 }
.if
<P>
 .mb add command .edit.undo -label Undo -underline 0
 .mb add separator .edit.sep2
 .mb add command .edit.cut -label Cut -underline 1
 .mb add command .edit.copy -label Copy -underline 1
 .mb add command .edit.paste -label Paste -underline 0
<P>
 .mb add menubutton .options -text Options -menu {
	radiobutton byName -variable viewMode \
		 -value NAME -label "by Name"
	radiobutton byDate -variable viewMode \
		 -value DATE -label "by Date"
}
<P>
 .mb add cascade .options.prefs -label Preferences -menu {
		command colors -label Colors...
		command fonts -label Fonts...
 }
 pack .mb -side left -anchor nw -fill x -expand yes
</PRE>
<P>
<H2>CAVEATS</H2>
 The <B>-menubuttons</B> option as well as the <B>-menu</B> option is evaluated by menubar with the <B>subst</B> command. The positive side of this is that the option string may contain variables, commands, and/or backslash substitutions. However, substitutions might expand into more than a single word. These expansions can be protected by enclosing candidate substitutions in curly braces ({}). This ensures, for example, a value for an option will still be treated as a single value and not multiple values. The following example illustrates this case: 

<DD>
set fileMenuName "File Menu"
set var {}
iwidgets::menubar .mb -menubuttons {
	menubutton file -text {$fileMenuName}
	menubutton edit -text Edit -menu {
		checkbutton check \
			-label Check \
			-variable {[scope var]} \
			-onvalue 1 \
			-offvalue 0
	}
	menubutton options -text Options
}
 
<DD> The variable <I>fileMenuName</I> will expand to "File Menu" when the <B>subst</B> command is used on the menubutton specification. In addition, the [<B>scope</B>...] command will expand to @scope :: var. By enclosing these inside {} they stay as a single value. Note that only {} work for this. [list...], "" etc. will not protect these from the subst command. <P>
<H2>ACKNOWLEDGMENTS</H2>
 <P>
Bret Schumaker 
<DD> 1994 - Early work on a menubar widget. <P>
Mark Ulferts, Mark Harrison, John Sigler 
<DD> Invaluable feedback on grammar and usability of the menubar widget <P>
<P>
<H2>AUTHOR</H2>
 Bill W. Scott <P>
<H2>KEYWORDS</H2>
 frame, menu, menubutton, entries, help <P>

</BODY>
</HTML>
