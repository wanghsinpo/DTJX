<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Edward C. Hume, III">
   <meta name="GENERATOR" content="Mozilla/4.77 [en] (Windows NT 5.0; U) [Netscape]">
   <title>Data Collection and SPC Component</title>
</head>
<body>

<h2>
<b>The Hume OEM Data Collection &amp; SPC Application Component</b></h2>

<center><b>Licensed and Supported Software</b>
<br><b>(C) 2004 Hume Integration Software</b>
<br><b>All Rights Reserved</b></center>

<h3>
<b>Introduction</b></h3>
Hume Integration has developed a series of high-level application components
which build upon the high performance and portable architectural framework
provided by the Hume Datahub and the DMH message system.&nbsp; The first
such component, the Data Collection Component (DCC) features comprehensive
Statistical Process Control (SPC) analysis capabilities including all traditional
Shewhart and Attribute charts, along with cusum and Exponentially Weighted
Moving Average (EWMA) control charts.&nbsp; The SPC capability is offered
as part of a data collection system.&nbsp; The data collection system accommodates
capturing non-SPC data such as context items (lot, wafer ID, material,
process step, equipment, etc.), qualitative observations, pareto lists,
selection choices, as well as structured text input.&nbsp; Manual data
entry can easily be combined with semi-automated, or fully automated collection
of data from production and test equipment.&nbsp; The system also includes
configurable, table-driven security services.&nbsp; The security services
make it easy to password protect privileged application features such as
the configuration of SPC run rules.
<p>The DCC is typically used in a client-server, distributed application.&nbsp;
The DCC can be deployed as an application by itself, or as a component
in a larger system.&nbsp; It is also possible to use the DCC server package
imbedded in an application process, perhaps for in-situ SPC analysis.&nbsp;
In the usual client-server deployment, the DCC server package executes
in a separate process,&nbsp; integrated with User Interface processes,&nbsp;
equipment interface processes, and java-enabled web clients, all communicating
using the DMH message system.&nbsp; The DCC is also capable sending e-mail
messages, or placing telephone calls to notify recipients when SPC alarms
occur.&nbsp;&nbsp; The DCC includes a Graphical User Interface (GUI) client
application that can be used to collect and edit data, to manage the configuration
of data collection items,&nbsp; to view charted data, or to view tabular
reports.&nbsp; The GUI also features the ability to manage SECS Trace Report
and Event Report data collection by communicating with instances of the
Hume SECS/GEM applications.&nbsp; The GUI can be used as a ready-to-run
solution for managing collected data, or as a starting point or supplemental
tool for the OEM who chooses to build his own GUI.
<p>The DCC server package consists of a set of SQL tables running in a
Tcl/Tk datahub, a handful of Tcl procedures that are registered as table
subscribers and executed in response to changes in the table data, and
a family of Tcl procedures that are provided as an Application Programming
Interface (API).&nbsp;&nbsp; The DCC server package also includes the capability
to create, populate, and use tables in an SQL relational database such
as an Oracle,&nbsp; Sybase or DB2 instance.&nbsp; When a persistent database
is used, the in-memory SQL tables are populated at startup using data from
the persistent database.&nbsp; As the system runs,&nbsp; the logic uses
the in-memory tables for higher performance.&nbsp; Connectivity is provided
to the persistent database using the DMH message system so that clients
are able to query and use historic data from the persistent database which
contains older and more voluminous data than the in-memory database.
<p>The DCC component uses an open, extensible architecture.&nbsp; The <a href="#TableSchema">table
schema</a> is described in detail in this document which enables the OEM
or enduser to create his own reports, custom logic, or custom applications.&nbsp;
The schema is designed to support using multiple instances of the DCC system,
as peers or within a hierarchy, where there may be a need to combine data
from multiple instances in common tables.&nbsp; The <a href="#ServerAPI">server
API</a> procedures are also described, and the source code is provided
for inspection or customization.&nbsp; It is completely feasible that the
OEM could use the DCC component and/or the extensible Tcl/Tk environment
for exciting new applications such as an XML-RPC server without requiring
source code or cooperation from Hume Integration.&nbsp; The DCC can be
used in the middle of a distributed application, with the DMH message system
software being used to span Visual Basic and Active-X platforms,&nbsp;
Java, Visual C++, and POSIX C platforms, in order to integrate data collection
from multiple sources and to share results with multiple consumers.&nbsp;
The DCC server can also function as a web server using the popular Tcl
httpd extension.
<h3>
<a NAME="Features"></a>Feature Summary</h3>

<ul>
<li>
A high performance, distributed design for generic data collection.</li>

<li>
Scalable from in-situ machine control to plant floor or multiple factory
deployment.</li>

<li>
Online Distribution feature supports live, network-based distribution of
selected configuration data to other online DCC servers.</li>

<li>
Includes high-level data collection types such as pareto yield loss.</li>

<li>
Server API and design support automated or manual data input.</li>

<li>
The innovative UI design makes it easy to combine manually entered data
with automatically collected data.</li>

<li>
Has features to configure, manage, and collect SECS Equipment Trace Report
data when used with the Hume GEM Host applications.</li>

<li>
Can also collect SECS Equipment Event Report data when using the Hume GEM
Host applications.</li>

<li>
Data from serial interfaces can be collected using the <a href="../mann/comm.html">comm</a>
command.</li>

<li>
Integrates with the <a href="SC.html">Scheduling Component</a> for periodic
data collection.</li>

<li>
Comprehensive SPC Features including Shewhart, Attribute, EWMA and cusum
analyses.</li>

<ul>
<li>
Seamless integration of related charts such as mean and sigma, or X and
EWMA.&nbsp; The single dialog configuration of SPC data items has been
optimized for user convenience.</li>

<li>
E-mail and telephone call notifications of SPC alarms can be sent to individuals
or recipient lists.&nbsp; System users are able to define and customize
e-mail message formats for pagers, humans, cell phones, or other recipients.</li>

<li>
Real-time chart updating and alarm propagation using datahub subscriptions.&nbsp;
Table subscriptions can be used to integrate custom applications or other
Hume components such as the <a href="EPC.html">Event Processing Component</a>.</li>

<li>
Supports direct input of mean and standard deviation from instrumentation
or other prior analysis.</li>

<li>
System collection of non-concurrent individual readings into sample groups.</li>

<li>
Pioneering developments in the application of Attribute charts to timed
intervals (for example, daily/weekly/monthly equipment utilization)</li>

<li>
SPC analysis exclusion by point,&nbsp; by configured time, and by configured
group size.</li>
</ul>

<li>
User configured formatting of observation data across all system features
(charting, reporting, data entry, …).</li>

<li>
Replaceable message catalog supports Internationalization.</li>

<li>
High performance analysis, plotting and reporting using in-memory access
to current data; combined with use of a persistent database for access
to historic data.</li>

<li>
Export of collected data as SQL, HTML, or CSV files.</li>

<li>
Export of chart images as Encapsulated Postscript files (.eps).</li>

<li>
Export and Import of selected configuration data to files.</li>

<li>
Robust, proven design and architecture intended for 7x24 use.</li>

<li>
Flexible,&nbsp; table-driven application security services.</li>
</ul>

<h3>
<a NAME="Installation"></a><b>Data Collection &amp; SPC Component - Server
Installation and Startup</b></h3>
The DCC server component executes in an extended Tcl/Tk process such as
the Hume Integration Datahub.&nbsp; It is common for the DCC server process
to also function as a DMH message system server so that client processes
can easily and efficiently interact with the DCC server using DMH messages.&nbsp;
The DMH clients may be other extended Tcl/Tk processes, or they may be
DMH client processes in other programming environments such as Java, Visual
Basic, or C/C++.
<p>The DCC server component requires installation of the Tcl Byte Code
Loader extension (package tbcload) in order to use byte code compiled password
encoding/decoding logic.&nbsp; The DCC User Interface requires the tbcload
package also.&nbsp; The DCC User Interface also requires installation of
[incr Tcl], [incr Tk], the Iwidgets packages, and the packages in the Hume
Component Libraries.&nbsp; All of these required packages can be installed
from the Setup program that is included with the DCC software.
<p>The DCC software is usually installed as a subdirectory, <b>dcc1.0</b>,
of the main Tcl/Tk library directory.&nbsp; The DCC server logic implements
the package named <b>HumeDCC</b>, and the installation path can be discovered
and the server software made useable by executing "<b>package require HumeDCC</b>",
if the software is installed under the Tcl/Tk library directory.&nbsp;
Developers should deploy their custom application software in their own,
separate directories.&nbsp; By keeping the DCC in a separate directory,
you can keep it understood by the developers that the DCC files are provided
as a product by Hume Integration, and other considerations apply as far
as customization.
<p>Hume Integration provides an example DCC server startup batch file.&nbsp;
For Windows, there is also a Start menu program item that starts the DCC
server as a standalone process without a persistent database interface.&nbsp;
When an external persistent database is not in use, the DCC saves configuration
data and current collected data in files of SQL statements.&nbsp; When
running as a standalone process, the DCC does not save older data that
is beyond the time range or group size limits of the configured collection
items.&nbsp; By using an external persistent database, the older data is
saved and available using tools that directly interface to the persistent
database such as reporting packages.
<p>The following notes are of benefit when deploying a custom system.
<p>The usual DCC&nbsp;<a NAME="server initialization"></a>server initialization
flow is:
<ol>
<li>
Your application processes start and establish DMH communication to each
other.&nbsp; The <b>datahub</b> Tcl application is commonly used to provide
the DMH server function.&nbsp;&nbsp; If you are running your application
as NT services, it is common just to start the DMH server process as a
service, and then have the server start the other application processes.</li>

<li>
If you are using a persistent database, you establish a DMH mailbox for
SQL commands directed to the persistent database.&nbsp; The <b>dmh_SQLsrv</b>
Tcl application is commonly used to provide this function.</li>

<li>
If you have custom application software, you make it known to your server
process by <a href="../mann/package.html">requiring packages</a> or adding
your directories to the global <a href="../mann/library.html">auto_path</a>
variable.</li>

<li>
The DCC server software is made ready for use in the DMH server process
by executing "<b>package require HumeDCC</b>".</li>

<li>
The DMH server process executes the <b>dc_hub_init </b>procedure.&nbsp;
Optional arguments to the <b>dc_hub_init</b> procedure specify the persistent
database mailbox name, and the type of persistent database in use, such
as DB2, ORACLE, or SYBASE.&nbsp; For the most part the DCC logic uses portable
SQL but there are some differences between database field types and error
replies that the software must accommodate.</li>

<li>
The DCC server logic will create and initialize its own persistent database
tables if they do not exist, and a functional connection to the persistent
database exists.</li>

<li>
The DCC server logic will automatically read and initialize its in-memory
tables from the saved data in the persistent database.&nbsp; A subset of
collected data is read into memory so that SPC analysis and viewing of
the current control data sets, can be performed very rapidly.</li>
</ol>
Example initialization code may look something like this.&nbsp; The following
lines have been added to the main DMH server initialization:
<p><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; # initialize the HUME DCC module
to provide SPC analysis</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; catch {spc_HUME_init} reply</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mbx put TRACE "HUME SPC init:
$reply"</tt>
<p>and the spc_HUME_init procedure is defined as:
<p><tt>#</tt>
<br><tt># called by the main datahub during startup</tt>
<br><tt>#</tt>
<br><tt>proc spc_HUME_init {} {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; global debug</tt>
<br><tt>&nbsp;&nbsp;&nbsp; # initialize the HUME Data Collection Component
package</tt>
<br><tt>&nbsp;&nbsp;&nbsp; # for persistent database mailbox DB,database
type ORACLE</tt>
<br><tt>&nbsp;&nbsp;&nbsp; set rc [catch {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; package require HumeDCC</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; dc_hub_init DB ORACLE</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; } text]</tt>
<br><tt>&nbsp;&nbsp;&nbsp; if { $rc != 0 } {</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; set debug(hume_spc_status)
"init error: $text"</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return "ERROR: Could
not initialize HumeDCC package: $text"</tt>
<br><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</tt>
<br><tt>&nbsp;&nbsp;&nbsp; # set up a separate command mailbox to process
Tcl commands</tt>
<br><tt>&nbsp;&nbsp;&nbsp; # sent to the HUME SPC package by distributed
clients</tt>
<br><tt>&nbsp;&nbsp;&nbsp; mbx whenmsg HUMESPC_RPC mbx_RPC</tt>
<br><tt>&nbsp;&nbsp;&nbsp; set debug(hume_spc_status) "successful initialization"</tt>
<br><tt>&nbsp;&nbsp;&nbsp; return "HUME SPC interface successfully initialized"</tt>
<br><tt>&nbsp;&nbsp;&nbsp; }</tt>
<p>The DCC server logic can also be used without the DMH message system
or a persistent database.&nbsp; In this situation, steps 1, 3, 4 and 5
above are executed.&nbsp; If you are starting with a Tcl/Tk process that
has not been extended with the DMH software, you will need to execute "package
require dmh" to bring the Hume provided extensions into your Tcl/Tk process.
<br>&nbsp;
<h4>
<a NAME="SecurityIntegration"></a>Security Services Integration</h4>
An OEM application can choose to utilize Security Services provided by
the Hume DCC software.&nbsp; The Security Services use a proven conceptual
model.&nbsp; A user belongs to any number of security groups.&nbsp; A security
group is associated with privileges.&nbsp; At login, the user is given
the union of all privileges associated with the groups that he is a member
of.
<p>The application developers assign privilege names and descriptions.&nbsp;
In the application logic, they enable access to features based on the possession
of specific privilege names by the user.
<p>The productization team defines a starting set of groups, and at least
a single highly-privileged user.&nbsp; The application enduser logs on
as the privileged user and can create new users, and revise and change
the group configurations.
<p>A User Interface should call the <a href="#dc_user_session_proc">dc_user_session</a>
procedure at startup to announce its existence.&nbsp; It should call the
<a href="#dc_user_logout">dc_user_logout</a>,
or the <a href="#dc_user_session_proc">dc_user_session</a> procedure at
exit, with appropriate arguments to indicate that it is exiting and that
existing logins for the UI are no longer valid.&nbsp; During the application
lifetime, the <a href="#dc_user_login">dc_user_login</a> procedure is used
to validate a user login and obtain the user's privileges.&nbsp; The <a href="#dc_user_logout">dc_user_logout</a>
procedure is called to update the <a href="#dc_user_session">dc_user_session
status table</a> when the user logs out.&nbsp; Other procedures exist to
simplify the configuration management of users, security groups, and privileges.
<h3>
<b>Data Collection &amp; SPC Component -&nbsp;<a NAME="ServerAPI"></a>Server
API</b></h3>
The DCC server logic provides the package named <b>HumeDCC</b> which can
be used to dynamically discover and use the latest DCC package version,
or to discover and use a particular version.&nbsp; The server API commands
are implemented in the usual global Tcl namespace.
<p>In the previous section, the initialization of the server component
using the <b>dc_hub_init</b> command was presented.&nbsp; This command
needs only to be called once at application startup.&nbsp; A data collection
application will use the <b>dc_data_insert </b>command as the usual means
of adding new data to the system.&nbsp; To setup the configuration of new
items, or to revise the configuration of existing items, involves using
more of the API such as the <b>dc_item_read</b> and the <b>dc_item_save</b>
procedures.
<p>Hume Integration also provides a working user interface application
which can be used to collect data, to configure data collection items,
or to view collected data.&nbsp; This UI application,
<b>dc_ui
</b>(<b>dc_ui.bat
</b>on
windows), can serve as a ready-to-run solution or as a useful starting
point for the OEM who integrates the configuration, viewing, and management
of collected data into the user interface of his product.&nbsp; The UI
software can be discovered and used in a custom application&nbsp; by executing
<b>package
require HumeDCCgui</b>, and then executing the command <b>dc_ui</b>.&nbsp;
The <b>dc_ui</b> command assumes that a DMH message system connection already
exists to the server, or that the UI is being run in the same process as
the DCC server logic.&nbsp; Note that the same name, <b>dc_ui</b>, is implemented
both as an application script and as a Tcl command.
<p>No calls are needed at server shutdown other than the usual Tc/Tk exit.&nbsp;
If a persistent database is in use, the collected data has been posted
to the persistent tables as it was collected.&nbsp; If a persistent database
is not in use, during the normal exit, the system calls the <b>dc_save_data</b>
command to save the in-memory table images as .tab files.
<p>In a distributed system, the DMH messages system can be used to transport
the procedure invocations from the client to the server process.&nbsp;&nbsp;
These invocations are text strings that are formatted as Tcl procedure
calls with their arguments.&nbsp; It is important to format the command
invocations properly.&nbsp;&nbsp; In general, it is better practice to
use Tcl list commands that are provided in the various client programming
environments than to hardcode the use of brace delimiters for arguments.&nbsp;
The reason for this is the Tcl list commands perform correctly for all
possible data arguments, but the hardcoded use of braces is incorrect for
data containing unmatched braces or other problematic constructs.&nbsp;
If the commands are sent to a DMH mailbox that is configured to process
SQL commands, such as a Datahub mailbox, the message commands should be
started with <b>eval</b> as the first command word, and then continue with
the usual Tcl command and its arguments.&nbsp; For example:
<br>&nbsp;
<blockquote><tt>// Java example</tt>
<br><tt>// mailbox HUB processes SQL commands so start with eval</tt>
<br><tt>String module_id="APC9";</tt>
<br><tt>String item_id="RF_FORWARD";</tt>
<br><tt>TclList cmd=new TclList("");</tt>
<br><tt>String reply="";</tt>
<br><tt>try {</tt>
<br><tt>&nbsp;&nbsp;&nbsp; cmd.lappend("eval"); cmd.lappend("dc_item_read");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; cmd.lappend(module_id); cmd.lappend(item_id);</tt>
<br><tt>&nbsp;&nbsp;&nbsp; cmd.lappend(""); cmd.lappend("1"); cmd.lappend("0");</tt>
<br><tt>&nbsp;&nbsp;&nbsp; reply=dmh.DoXact("HUB", cmd.join());</tt>
<br><tt>&nbsp;&nbsp;&nbsp; } catch (Exception e) { // exception handling...
}</tt>
<br>&nbsp;
<p><tt># Tcl example</tt>
<br><tt># mailbox HUB_RPC processes Tcl commands so eval is not needed</tt>
<br><tt>set module_id APC9</tt>
<br><tt>set item_id RF_FORWARD</tt>
<br><tt>set cmd [list dc_item_read $module_id $item_id {} 1 0]</tt>
<br><tt>set reply [mbx_do_xact HUB_RPC $cmd APC9_PID343_REPLY]</tt>
<br><tt>if { $reply == "TIMEOUT" } { ;# exception handling.... }</tt></blockquote>
Some of the API commands return data in a format that is convenient to
work with in Tcl but less convenient in other environments.&nbsp; Some
thoughts on this issue:
<ul>
<li>
The formats that are provided are amenable to being parsed into name-value
maps (e.g., hashtables) or table data using the Hume provided Tcl list
calls.&nbsp; So creating table and map classes to handle these replies
are useful additions to your application.</li>

<li>
All of the data is represented as records in SQL tables, so if you choose,
you can query these tables directly.</li>

<li>
The Tcl source for the API is provided, and it is not hard to create custom
versions that provide other formats.</li>
</ul>

<p><br>In the procedure descriptions that follow, mandatory data arguments
to the procedures are shown as single names.&nbsp; When an argument is
shown as a pair, the argument is optional; it does not need to be supplied
to invoke the procedure.&nbsp; For optional arguments, the left element
of the pair is the argument name, and the right element is the default
argument value.
<p><b><a href="#dc_alarm_ack">dc_alarm_ack</a></b> - Acknowledge an SPC
alarm..
<br><b><a href="#dc_cfg_export">dc_cfg_export</a></b> - Obtain configuration
records in import/export format
<br><b><a href="#dc_config">dc_config</a></b> - Read a configured value.
<br><b><a href="#dc_config_write">dc_config_write</a></b> - Save a configured
value.
<br><b><a href="#dc_data_insert">dc_data_insert</a></b> - Add new collected
data.
<br><b><a href="#dc_data_sub_add">dc_data_sub_add</a></b> - Read configuration,
data, and subscribe to an item.
<br><b><a href="#dc_data_sub_filtered">dc_data_sub_filtered</a></b> - Open
a filtered, shared dc_data table subscription
<br><b><a href="#dc_data_sub_mod">dc_data_sub_mod</a></b> - Modify a filtered,
shared dc_data table subscription
<br><b><a href="#dc_data_sub_open">dc_data_sub_open</a></b> - Open a dc_data
table subscription.
<br><a href="#dc_drop_tables"><b>dc_drop_tables</b> </a>- Erases all of
the DCC tables in the persistent database.
<br><b><a href="#dc_hub_init">dc_hub_init</a></b> - Initializes the DCC
system, must be called at startup.
<br><b><a href="#dc_item_delete">dc_item_delete</a></b> - Deletes the configuration
records of a data collection item.
<br><a href="#dc_item_read"><b>dc_item_read</b> </a>- Read the configuration
and/or data of an item.
<br><b><a href="#dc_item_save">dc_item_save</a> </b>- Write the configuration
records of a data collection item to database tables.
<br><a href="#dc_item_saveAs"><b>dc_item_saveAs</b> </a>- Copy the configuration
records of a data collection item to a new name.
<br><b><a href="#dc_items_view">dc_items_view</a></b> - Return a table
view of the data collection items.
<br><a href="#dc_save_data"><b>dc_save_data</b> </a>- Write the in-memory
tables to the file system as .tab SQL files.
<br><b><a href="#dc_schema">dc_schema</a></b> - Obtain SQL statements representing
the database table schema.
<br><b><a href="#dc_schema_write">dc_schema_write</a></b> - Write SQL statements
representing the database table schema to a file.
<br><a href="#dc_set_auto_path"><b>dc_set_auto_path</b> </a>- Initialize
the Tcl auto_path variable.
<br><b><a href="#dc_statistics">dc_statistics</a></b> - Compute control
limits and other SPC statistics from collected data.
<p>The following API procedures have been implemented to support Security
Services:
<p><b><a href="#dc_encode">dc_encode</a></b> - Convert a plain text string
to an encoded representation.
<br><b><a href="#dc_user_access_check">dc_user_access_check</a></b> - Validation
of a User for a Privilege.
<br><b><a href="#dc_user_all_groups">dc_user_all_groups</a></b> - List
Configured Security Groups.
<br><b><a href="#dc_user_all_privileges">dc_user_all_privileges </a></b>-
List Configured Privileges.
<br><b><a href="#dc_user_all_user_ids">dc_user_all_user_ids</a></b> - Obtain
a list of Configured Users.
<br><b><a href="#dc_user_assoc_groups">dc_user_assoc_groups</a></b> - Obtain
the Security Groups Associated with A User.
<br><b><a href="#dc_user_assoc_privileges">dc_user_assoc_privileges</a></b>
- List the Privileges Associated with Specified Groups.
<br><b><a href="#dc_user_delete">dc_user_delete, _read, _write</a></b>
- Configure Users for Security Services.
<br><b><a href="#dc_user_group_delete">dc_user_group_delete, _read, _write</a></b>
- Configure Security Groups.
<br><b><a href="#dc_user_login">dc_user_login, _logout</a></b> - Security
Services Login and Logout.
<br><b><a href="#dc_user_password_update">dc_user_password_update</a></b>
- Update a User's Password.
<br><b><a href="#dc_user_privilege_delete">dc_user_privilege_delete, _read,
_write </a></b>- Configure Security Privileges.
<br><b><a href="#dc_user_session_proc">dc_user_session</a></b> - Announce
the startup or shutdown of a User Session.
<br>&nbsp;
<p>
<hr WIDTH="100%">
<br><a NAME="dc_alarm_ack"></a><font size=+1><b>dc_alarm_ack</b> - Acknowledge
an SPC alarm.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_alarm_ack <i>module_id item_id user_id comment</i> {<i>annotate</i>
1} {<i>ts_pt_utc</i> {}} {<i>sequence_pt</i> {}} {<i>ts_format</i> 9}</b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_ALARM_ACK_OK</b>
<br><b>1 DC_ALARM_NO_CONFIG</b>
<br><b>2 DC_ALARM_NOT_ACTIVE</b>
<br><b>3 DC_ALARM_NOT_ANNOTATED</b></blockquote>
<b>Desciption</b>
<blockquote>The action of acknowledging an SPC alarm clears the alarm status
information in the <a href="#dc_item_use">dc_item_use</a> table for an
item, and optionally adds an alarm signoff record to the <b>notes</b> field
value of the <a href="#dc_data">dc_data</a> observation record.&nbsp; A
particular alarmed point can be optionally identified by it's UTC timestamp
value, <i>ts_pt_utc</i>, and its sequence number, <i>sequence_pt</i>.&nbsp;
The default behavior is to work with the latest alarmed point for the item.&nbsp;
The <i>user_id</i> value identifies the person who is initiating the signoff
action.&nbsp; The <i>comment</i> argument is text which becomes part of
the alarm signoff data.&nbsp; The optional argument <i>annotate</i> may
be supplied as 0 to prevent annotating the dc_data record.&nbsp; The optional
<i>ts_format</i>
argument may be used to select the <a href="../mann/localtime.html">localtime</a>
command format for the timestamp of alarm signoff.&nbsp; Since the alarm
signoff timestamp is not a key value, the default value of 9 yields a timestamp
for the local timezone.
<p>The return values are literally the two element lists of codes and tokens
written above.&nbsp; The return code of 3 indicates that the alarm condition
has been cleared for the item, however the annotation could not be saved.&nbsp;
This situation can occur when the alarmed point is older than the current
in-memory data set for the item.&nbsp; The return value of 1 means that
a configuration record for the item identified by <i>module_id</i> and
<i>item_id</i>
could not be found.&nbsp; The return value of 2 indicates that the alarm
status information for the item does not indicate an unacknowledged alarm.&nbsp;
The return value of 0 is the usual successful case and it implies that
the alarmed condition has been cleared for the item, and if point annotation
was requested, it was completed successfully.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_cfg_export"></a><b><font size=+1>dc_cfg_export - Obtain
configuration records in import/export format</font></b>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_cfg_export&nbsp; <i>export_list</i>&nbsp; {<i>user_id</i>&nbsp;
{}} {<i>display_id&nbsp;</i> {}}</b></blockquote>
<b>Return Values</b>
<blockquote><b>0<i> import_code</i></b>
<br><b><i>error_code error_message</i></b></blockquote>
<b>Description</b>
<blockquote>The <i>export_list</i>&nbsp; argument is a Tcl list of pairs.&nbsp;
Each pair is the <i>module_id</i> and <i>item_id </i>of a data collection
item.&nbsp; The identity of the user and the display are optionally specified
and added to the exported data.&nbsp; The return value is a list of two
elements, an integer return code, and a second argument.&nbsp;&nbsp; The
return code value of 0 indicates success in which case the second argument
is Tcl code that can be executed to import the specified items.&nbsp; A
non-zero return code indicates failure, in which case the second return
value element is an error message.&nbsp; The return code value of 1 indicates
that database records for one or more of the items was not found.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_config"></a><font size=+1><b>dc_config</b> - Read a configured
value.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_config <i>domain name</i></b></blockquote>
<b>Return Value</b>
<blockquote><b><i>value</i></b></blockquote>
<b>Description</b>
<blockquote>The system has a named value dictionary table that can be used
to hold configuration values.&nbsp; The values are stored in the <a href="#dc_custom">dc_custom</a>
table.&nbsp; This call is simply a convenience function to read a value
from this table.&nbsp; If an entry does not exist, an empty string is returned.&nbsp;
The <i>domain </i>argument is intended to support organizing the stored
data in distinct sets so that the same <i>name</i> values can be used without
conflict.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_config_write"></a><font size=+1><b>dc_config_write</b>
- Save a configured value.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_config_write <i>domain name value</i></b></blockquote>
<b>Return Value</b>
<blockquote><b><i>SQL_reply</i></b></blockquote>
<b>Description</b>
<blockquote>The system has a named value dictionary table that can be used
to hold configuration values.&nbsp; The values are stored in the <a href="#dc_custom">dc_custom</a>
table.&nbsp; This call is simply a convenience function to write a value
into this table.&nbsp; The reply value is the string that the Tcl SQL command
returns for an update or insert command.&nbsp; The <i>domain </i>argument
is intended to support organizing the stored data in distinct sets so that
the same <i>name</i> values can be used without conflict.&nbsp; If you
are using a persistent database, a subscription to the in memory table
posts the newly inserted or updated data to the persistent database.&nbsp;
All of the data in the dc_custom table is loaded into the in-memory table
from the persistent database during initialization of the system.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_data_insert"></a><font size=+1><b>dc_data_insert</b> -
Add new collected data.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_data_insert <i>module_id&nbsp; item_id</i>&nbsp; {<i>prime_num</i>&nbsp;
0} {<i>second_num</i>&nbsp; -1} {<i>text_value</i> ""} {<i>item_type</i>
""} {<i>ts</i> ""} {<i>sequence</i> ""} {<i>user_id</i> ""} {<i>notes</i>
""} {<i>spc_alarm</i> 0} {<i>spc_excluded</i> 0} {<i>is_partial</i> 0}
{<i>discard_flag</i> 0} {<i>equipment_id</i> ""} {<i>track_id</i> ""} {<i>datahub</i>
-}</b></blockquote>
<b>Return Value</b>
<blockquote><b><i>return_code ts highest_sequence spc_alarm alarm_text
reply</i></b></blockquote>
<b>Description</b>
<blockquote>This procedure is the usual means to add new item data to the
system.&nbsp;&nbsp; The procedure supports the addition of single data
item records as well as aggregate entries such as pareto lists.&nbsp;&nbsp;
The <b><i>module_id</i></b> and <b><i>item_id</i></b> arguments identify
the data collection item and must be supplied.&nbsp; The remaining arguments
are optional, and the caller supplies only those values that are appropriate
for the kind of data collection item (<b><i>item_type</i></b>), or appropriate
for how the system is being used.&nbsp; For example, <b><i>user_id</i></b>
and <b><i>equipment_id</i></b> may or may not be used at your site.&nbsp;
Since the arguments are positional,&nbsp; the caller may need to specify
default values shown above to get to the correct position for an argument
that he chooses to explicitly provide.&nbsp;&nbsp; The procedure arguments
correspond to the fields in the <a href="#dc_data">dc_data</a> table.&nbsp;
The description for this table can be read for details. Also, the data
in the table <a href="#dc_item_type">dc_item_type</a> provides an approximate
guide to how the use of the arguments <b><i>prime_num</i></b>, <b><i>second_num</i></b>,
and <b><i>text_value</i></b> which varies depending on the kind of data
collection item.&nbsp; For most numeric data the caller is expected to
supply the X or XBAR value as the <b><i>prime_num</i></b> argument.&nbsp;
For MOVING RANGE, cusum, or EWMA data, the caller defaults or provides
the value -1 for the <b><i>second_num</i></b> argument, and the system
computes the desired secondary statistic by analyzing the current point
along with the most recent data for the item.&nbsp;&nbsp; For Standard
Deviation, S, or ordinary RANGE values, where the secondary statistic is
computed based only on the current input, the caller is expected to supply
the computed value as the <b><i>second_num</i></b> argument.&nbsp; For
item types using XBAR data, the individual X observations that were averaged
to create the XBAR value are usually supplied as a space delimited list
in the <b><i>text_value</i></b> argument.&nbsp; The system will then store
the raw values in the <a href="#dc_data">dc_data</a> table record, and
the data will be available for viewing and reporting.&nbsp; In many cases
the procedure calling logic does know the <b><i>item_type</i></b> of the
data collection item, and it saves the server a lookup if it is supplied
as an argument.&nbsp; The <b><i>ts</i></b> argument is a high resolution
timestamp for the data collection action, and it defaults to the current
<a href="../mann/localtime.html">localtime
16</a> result.&nbsp; The UTC timezone is used to avoid issues with Daylight
Saving Time, and multiple clients straddling different local timezones.&nbsp;
The <b><i>sequence</i></b> field is usual left to default.&nbsp; It is
used to distinguish and sequence multiple records that are added as a single
data collection action, such as a pareto lists, as described in the <a href="#dc_data">dc_data</a>
schema.
<p>Other than the convenience, an important reason for calling this procedure
in the server process instead of manipulating the <a href="#dc_data">dc_data</a>
table directly from a client, is so a unique timestamp value can be assigned.
<p>The <b>return value</b> is a six element list.&nbsp; The first element,
the <b><i>return_code</i></b>, is usually 0 signifying success.&nbsp; A
non-zero <b><i>return_code</i></b> indicates an error condition, in which
case the <b><i>reply</i></b> element will be an error description and the
other fields may not be meaningful.&nbsp; For a successful result, the
data collection event timestamp, <b><i>ts</i></b>, and the highest sequence
number assigned, <b><i>highest_sequence</i></b>, are the next elements
in the return value.&nbsp; A non-zero value of the <b><i>spc_alarm</i></b>
element indicates that the addition of the data caused an SPC alarm.&nbsp;
The <b><i>spc_alarm</i></b> element indicates 1 for an alarm on the primary
value, 2 for an alarm on the secondary value, or 3 for alarms on both values;
and the <b><i>alarm_text</i></b> item includes descriptions of the run
rule violation(s).
<p>The logic which calls the dc_data_insert procedure knows from the return
value whether an SPC alarm occurred as a result of entering data. Other
software in the distributed system can learn of SPC alarms in real-time
by opening subscriptions to the <a href="#dc_item_use">dc_item_use</a>
table. Table subscriptions are explained in the <a href="../man1/datahub.html#Subscriptions">Datahub</a>
document.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_data_sub_add"></a><font size=+1><b>dc_data_sub_add</b>
- Read item configuration, current data, and open a shared subscription
for future values.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_data_sub_open <i>clientID</i> <i>destbox</i> <i>new_id_pair
combined_pair_list</i>&nbsp; {<i>reply_format</i> 0} {<i>array_name</i>
{}} {<i>extra_clause</i> {is_partial=0}}</b></blockquote>
<b>Return Value</b>
<blockquote><b>returns the <a href="#dc_item_read">dc_item_read</a> result</b>
<br><b>see <a href="#dc_data_sub_filtered">dc_data_sub_filtered</a> regarding
future subscription notifications</b></blockquote>
<b>Description</b>
<blockquote>&nbsp;This procedure is called to return the configuration
and existing data for a DCC item, and to revise a shared, filtered data
subscription to include the new item along with other subscribed items.&nbsp;
You want to do this in a single procedure like this one so there is no
chance for a data change to be unobserved between reading the current data
and opening a subscription.
<p>The subscription is opened using the <a href="#dc_data_sub_filtered">dc_data_sub_filtered</a>
procedure, so the subscription feed has the DCC analysis changes merged
into the insert notifications.&nbsp; Also, the same <a href="../mann/hub_safe_sub.html">hub_safe_sub_set</a>
call is made to register cleanup code for the subscription if the client
should go away ungracefully.
<p>The <i>clientID</i> argument is the DMH server's identification for
the client connection which is obtained by executing <a href="../mann/mbx.html">mbx
clientID</a>.&nbsp; The value is used in the subscription name opened for
the client so that the DCC cleanup logic tied to <a href="../mann/mh_app_lost.html">mh_app_lostclient</a>
will find the subscription and close it if the client process disconnects.
<p>The <i>destbox</i> argument is the DMH mailbox name that the caller
is using to receive subscription notifications.&nbsp; The value should
be unique for each client instance, so it is often based on the client's
display and/or process ID.
<p>The <i>new_id_pair</i> argument is a two element Tcl list containing
the <i>module_id</i> and <i>item_id</i> whose current data and configuration
are to be read and returned as the immediate procedure call result.&nbsp;
The <i>reply_format</i> and <i>array_name</i> arguments are used when invoking
the dc_item_read procedure and they control the format of the result.
<p>The <i>combined_pair_list</i> argument is a Tcl list of two element
lists.&nbsp; Each pair contains the <i>module_id</i> and <i>item_id</i>
of a DCC item that is to be included in a shared subscription to the dc_data
table.&nbsp; The <i>new_id_pair</i> value should be listed in the combined
list if it is to be included in the shared subscription.
<p>The <i>extra_clause</i> argument is used to specify selection criteria
for the subscription in addition to the implied criteria of the <i>combined_pair_list</i>
argument.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_data_sub_mod"></a><font size=+1><b>dc_data_sub_mod</b>
- Modify or close a shared, filtered dc_data subscription.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_data_sub_mod <i>clientID</i> <i>destbox</i> <i>combined_pair_list</i>&nbsp;
{<i>extra_clause</i> {is_partial=0}}</b></blockquote>
<b>Return Value</b>
<blockquote><b>None.</b></blockquote>
<b>Description</b>
<blockquote>&nbsp;This procedure is called to revise a shared, filtered
data subscription.&nbsp; If the <i>combined_pair_list </i>argument value
is an empty list, the shared subscription is closed.&nbsp; This procedure
is usually called to remove DCC items from the shared subscription list
after the user has dismissed plots or similar objects and no longer has
an interest in future data of the item.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_data_sub_filtered"></a><font size=+1><b>dc_data_sub_filtered</b>
- Open a filtered subscription to table dc_data.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_data_sub_filtered <i>clientID</i>&nbsp; <i>destbox</i>
{<i>where_clause</i> {where is_partial=0}} {<i>max_msgs</i> 100}</b></blockquote>
<b>Return Value</b>
<blockquote><b>returns the result of executing the SQL open command</b>
<p><b>future subscription notifications are formatted as the Datahub <a href="../man1/datahub.html#TclReplyFormat">Tcl
Reply Format</a></b></blockquote>
<b>Description</b>
<blockquote>The DCC analysis subscription may change the data in table
<a href="#dc_data">dc_data</a>
as it is entered.&nbsp; If a dc_data subscription is used for a live, updating
plot, it is more efficient to see a subscription feed that somehow combines
the initial insert with the possible analysis updates, and then just sends
the final result.&nbsp; Here is a procedure, that opens a subscription
that just sends the post analysis data.&nbsp; The data feed is ordinarily
within a couple of milliseconds of the original insert.&nbsp; The original
ordering of the inserts is faithfully preserved.&nbsp; The technique works
well, and is a neat trick to deliver a simpler subscription feed.
<p>The <i>clientID</i> argument is the DMH server's identification for
the client connection which is obtained by executing <a href="../mann/mbx.html">mbx
clientID</a>.&nbsp; The value is used in the subscription name opened for
the client so that the DCC cleanup logic tied to <a href="../mann/mh_app_lost.html">mh_app_lostclient</a>
will find the subscription and close it if the client process disconnects.
<p>The <i>destbox</i> argument is the DMH mailbox name that the caller
is using to receive subscription notifications.&nbsp; The value should
be unique for each client instance, so it is often based on the client's
display and/or process ID.
<p>The <i>where_clause</i> argument is used to specify the selection criteria
for the subscription.
<p>The <i>max_msgs</i> argument is used with the <a href="../mann/hub_safe_sub.html">hub_safe_sub_set</a>
call as a criteria for triggering cleanup logic even if the client process
remains connected but stops reading subscription notification messages.
<p>You can keep calling this procedure, changing the <i>where_clause</i>
as the viewer changes which plots are displayed.&nbsp; You really should
not subscribe to the whole dc_data table unless you are interested in all
of it.
<p>Two higher level procedures, <a href="#dc_data_sub_add">dc_data_sub_add</a>
and <a href="#dc_data_sub_mod">dc_data_sub_mod</a> are available to obtain
the existing configuration and data for newly displayed charts,&nbsp; and
to call this procedure for a combined feed of future changes.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_data_sub_open"></a><font size=+1><b>dc_data_sub_open</b>
- Open a subscription to table dc_data.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_data_sub_open <i>open_statement</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>returns [SQL $<i>open_statement</i>]</b></blockquote>
<b>Description</b>
<blockquote>The DCC analysis subscription changes the data that is inserted
into the <a href="#dc_data">dc_data</a> table.&nbsp; These changes may
be seen out of order by a subscription unless the DCC analysis subscription
is the last one on the dc_data table.&nbsp; Accordingly, this procedure
should be used to open subscriptions to the dc_data table.&nbsp; It insures
that the DCC analysis subscription is the last one.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_drop_tables"></a><font size=+1><b>dc_drop_tables</b> -
Erases all of the DCC tables in the persistent database.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_drop_tables</b></blockquote>
<b>Return Value</b>
<blockquote><b>None</b></blockquote>
<b>Description</b>
<blockquote>Invoking this command deletes all of the DCC tables in the
persistent database using the SQL drop command.&nbsp; All configuration
and collected data is erased.&nbsp; This command is not usually exposed
to the system enduser by the OEM application.</blockquote>

<hr WIDTH="100%">
<p><a NAME="dc_encode"></a><font size=+1><b>dc_encode</b> - Convert a plain
text string to an encoded representation.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_encode <i>string</i></b></blockquote>
<b>Java Syntax</b>
<blockquote><b>import com.hume.DMH.*;</b>
<br><b>String DCC.encode(String password);</b></blockquote>
<b>Return Value</b>
<blockquote><b><i>encoded_string</i></b></blockquote>
<b>Description</b>
<blockquote>The <b>dc_encode</b> procedure is used in a User Session to
convert an entered password into a coded representation that is passed
through the network for the <a href="#dc_user_login">dc_user_login</a>
call.&nbsp; Hume is supplying the equivalent encoding logic for other programming
language environments.&nbsp; The Java equivalent is the static class method,
<b>DCC.encode</b>,
which is part of the <a href="HISjava.html">com.hume.DMH package</a>.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_group_insert"></a><font size=+1><b>dc_group_insert</b>
- Save the entered data of a Group.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_group_insert <i>group_module_id group_item_id dc_data_inserts</i>
\</b>
<br><b>&nbsp;{<i>user_id</i> {}} {<i>equipment_id</i> {}} {<i>track_id</i>
{}} {<i>datahub</i> -}</b></blockquote>
<b>Return Value</b>
<blockquote><b>0<i> ts alarm_list</i></b>
<br><b><i>return_code module_id item_id error_reply</i></b></blockquote>
<b>Description</b>
<blockquote>A <b>dc_data</b>&nbsp; table record is made for the group,
and the <b><i>ts</i></b> timestamp is obtained.&nbsp;&nbsp; The <b><i>ts
</i></b>value
is substituted into the <b><i>dc_data_insert</i></b> statements for the
group member data entries.&nbsp; Similarly, the provided <b><i>datahub</i></b>
value or its default value are substituted in the <b><i>dc_data_insert</i></b>
statements. You can propagate your own values of <b><i>user_id</i></b>,
<b><i>equipment_id</i></b>,
and <b><i>track_id </i></b>into the <b><i>dc_data_insert</i></b> statements
since you might be varying these values by item.&nbsp; If the
<b><i>dc_data_insert</i></b>
statements do not provide values for these items,&nbsp; the values from
the <b>dc_group_insert</b> call are used.
<p>If an error occurs when processing any of the <b><i>dc_data_insert</i></b>
statements,&nbsp; partially entered data, if any, will be deleted.
<p>The usual successful return value is a 3 element list, <b>0<i> timestamp
alarm_list, </i></b>where the first element is the success return code
of 0, the second element is the entry timestamp, and the third element
is a list of SPC alarm records, possibly empty, that were obtained by executing
the <b><i>dc_data_insert</i></b> statements.&nbsp; Each alarm record is
structured as a four part list,&nbsp; <i>module_id item_id spc_alarm alarm_text</i>.
<p>An error return is based on a failed <a href="#dc_data_insert">dc_data_insert</a>
call.&nbsp; A non-zero return code is provided with the <i>module_id</i>,
<i>item_id</i>,
and <i>error_reply </i>of the underlying dc_data_insert call.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_group_save"></a><font size=+1><b>dc_group_save</b> - Save
the configuration of a Group.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_group_save <i>group_module_id group_item_id description
options members_list</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_GC_SAVED_OK</b>
<br><b>4 DC_GC_MEMBER_UNKNOWN <i>module_id item_id</i></b>
<br><b>5 DC_GC_MEMBER_DUPLICATE <i>module_id item_id</i></b>
<br><b>6 DC_GC_MEMBER_BAD <i>sql_stmt sql_reply</i></b>
<br><b><i>dc_item_save_error_reply</i></b></blockquote>
<b>Description</b>
<blockquote>This procedure is used to save the configuration of a data
entry Group.&nbsp; The <b><i>members_list</i></b> argument is one or more
elements structured as {<i>module_id item_id item_type is_optional calc_type
calc_context calculation</i>}; ie., rows for the <a href="#dc_group_config">dc_group_config</a>
table.&nbsp;&nbsp; The <b><i>options</i></b> argument is saved in the <b>prime_runrules</b>
field in the <b>dc_item</b> table row that is created for the group.&nbsp;
The <b><i>options</i></b> argument is a string of the form "-comment <i>b</i>
-compact <i>b</i>" where the <b><i>b</i></b> value is 1 or 0.&nbsp;&nbsp;
This call is used by the Hume DCC UI to save a group configuration.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_hub_init"></a><font size=+1><b>dc_hub_init</b> - Initializes
the DCC system, must be called at startup.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_hub_init {<i>MB_DB</i> DB} {<i>DBtype</i> SYBASE}</b></blockquote>
<b>Return Value</b>
<blockquote><b>"Data Collection Component Initialized Successfully." </b>is
returned for the usual successful case.
<p>The procedure will return a Tcl error if the system cannot be initialized.</blockquote>
<b>Description</b>
<blockquote>See the description of <a href="#server initialization">server
initialization</a> given above.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_input_config"></a><font size=+1><b>dc_input_config</b>
- Obtain configuration data needed to conduct Data Entry.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_input_config <i>module_id item_id</i> {<i>ts</i> {}}</b></blockquote>
<b>Return Value</b>
<blockquote><b><i>return_code columns rows group_entry_options data_cols
data_rows alarm_inhibit</i></b>
<br><b>2 DC_DE_GROUP_INPUT_ONLY</b>
<br><b>3 DC_DE_NO_CONFIG $module_id $item_id</b>
<br><b>4 DC_DE_NO_CONFIG $member_module_id $member_item_id</b>
<p><b><i>columns := </i>{sequence item_type module_id item_id is_optional
calc_type calc_context calculation item_type description units formats
subgroup_ct input_type save_options prime_runrules high_screen has_high_screen
high_spec has_high_spec low_spec has_low_spec low_screen has_low_screen
input_is_inhibited spc_alarm selection}</b>
<p><b><i>rows</i> := one or more rows of values corresponding to the <i>columns</i></b>
<p><b><i>data_cols</i> := {dc_data table columns}</b>
<p><b><i>data_rows</i> := {dc_data table rows where ts='$<i>ts</i>'}</b>
<p><b><i>alarm_inhibit</i> := the value of the SPC, alarm_inhibits_entry
dc_custom table record</b></blockquote>
<b>Description</b>
<blockquote>This procedure returns the configuration data needed to perform
data entry or data editing.&nbsp; The result is essentially a table join
connecting tables <b>dc_group_config</b>, <b>dc_item</b>, <b>dc_item_use</b>,
and possibly <b>dc_list_text</b>.
<p>For editing usage, the timestamp of the existing entry, <b><i>ts</i></b>,
is provided, and the reply data contains the existing data records from
the dc_data table.
<p>If the item specified by <i>module_id</i> and <i>item_id</i> is not
a Group, the procedure returns return code 2 if the item is configured
to only allow group data collection (dc_item.group_input_only is 1).&nbsp;
If the item allows data collection outside of a group, the procedure returns
the data of a Group definition that includes the item as its only member.
<p>For items with selection lists, there is a virtual column <i>selection</i>
which is a list of sorted selection choices.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_item_delete"></a><font size=+1><b>dc_item_delete</b> -
Deletes the configuration records of a data collection item.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_item_delete <i>module_id&nbsp; item_id</i> {<i>delete_data</i>
1}</b></blockquote>
<b>Return Value</b>
<blockquote><b>None</b></blockquote>
<b>Description</b>
<blockquote>This procedure deletes configuration records for a data collection
item.&nbsp; The default value of the <i>delete_data</i> argument also causes
collected data for the item to be deleted.&nbsp; If a persistent database
is being used, and the data is being deleted, only data records in the
dc_data table whose datahub field values match the server's value, or whose
datahub field values are blank, are deleted.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_item_read"></a><font size=+1><b>dc_item_read</b> - Read
the configuration and/or data of an item.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_item_read <i>module_id item_id</i>&nbsp; {<i>config_flag</i>
1} {<i>data_flag</i> 1} {<i>ts</i> ""} {<i>reply_format</i> 0} {<i>array</i>
""}</b></blockquote>
<b>Return Values</b>
<blockquote><b>0 <i>NameValueList</i></b>
<br><b>0 <i>Tcl_statements</i></b>
<br><b><i>error_code error_message</i></b></blockquote>
<b>Description</b>
<dl>
<dl>The procedure is an efficient and convenient means of obtaining the
configuration and/or current data of a collection item in a single invocation.&nbsp;
The <b><i>module_id</i></b> and <b><i>item_id</i></b> arguments specify
the data collection of interest.&nbsp; The <b><i>config_flag</i></b> is
used as a boolean, the value 1 specifies that all configuration data is
desired.</dl>

<dl>The <b><i>data_flag</i></b> is used as an integer as follows:
<br>&nbsp;
<dd>
0&nbsp;&nbsp; No observation data is returned.</dd>

<dd>
1&nbsp;&nbsp; All current data is returned.</dd>

<dd>
2&nbsp;&nbsp; All data for the timestamp value <b><i>ts</i></b> is returned.</dd>

<dd>
-N&nbsp;&nbsp; A negative integer value obtains the records for the newest
preceding N timestamp values relative to the value of the timestamp argument.&nbsp;
If the timestamp argument is defaulted, the latest N values relative to
the current time are obtained.</dd>
</dl>

<dl>The <b><i>reply_format</i></b> argument is used as an integer to choose
the desired successful reply format.&nbsp; The default value of
<b>0</b>
specifies that a list of alternating names and values, <b><i>NameValueList</i></b>,&nbsp;
is returned in addition to the <b>0</b> success return code.&nbsp; The
<b><i>NameValueList</i></b>
is typically used with the <a href="../mann/array.html">array set</a> Tcl
command to populate an array, or with the <a href="../mann/foreach.html">foreach</a>
command to instantiate scalar variables.&nbsp; The returned items in the
list are described in the table below.
<p>If the <b><i>reply_format </i></b>value of <b>1</b> is specified,&nbsp;
the <b><i>array</i></b> argument is used to specify an array name which
is used to build the return value <b><i>Tcl_statements</i></b>.&nbsp; The
<b><i>Tcl_statements</i></b>
element in the return value is a list of Tcl assignment statements.&nbsp;
Each assignment statement is of the form "set ${array}($name) $value".&nbsp;
The Tcl_statements can be executed in a Tcl interpreter to instantiate
an array.&nbsp; The items returned in this array include the following:</dl>
</dl>

<table BORDER COLS=3 WIDTH="100%" >
<tr>
<td><b><i>NameValueList</i> Item Name&nbsp;&nbsp; or</b>
<br><b>Array Subscript Name</b></td>

<td><b>When Present</b></td>

<td><b>Element Value(s)</b></td>
</tr>

<tr>
<td><b>dc_item_cols</b></td>

<td>if configuration requested</td>

<td>A list of the table column names for table <a href="#dc_item">dc_item</a></td>
</tr>

<tr>
<td>each table column from the <a href="#dc_item">dc_item</a> table record</td>

<td>if configuration requested</td>

<td>Each corresponding table column field value</td>
</tr>

<tr>
<td><b>dc_item_use_cols</b></td>

<td>if configuration requested</td>

<td>The value is a list of column names from the <a href="#dc_item_use">dc_item_use</a>
table including the values {datahub ts_groupstart spc_alarm ts_alarm
<br>&nbsp;alarm_user_id alarm_text input_is_inhibited}</td>
</tr>

<tr>
<td>each table column named in the dc_item_use_cols list</td>

<td>if configuration requested</td>

<td>Each corresponding column value.&nbsp; If a row in the dc_item_use
table does not exist for the item, default values are supplied.</td>
</tr>

<tr>
<td><b>dc_group_config_cols</b></td>

<td>if configuration requested and only for item_type G</td>

<td>The value is the column names for the <a href="#dc_group_config">dc_group_config</a>
table.&nbsp; If group data is requested, the column names includes the
additional column name, <b>formats</b>.&nbsp;</td>
</tr>

<tr>
<td><b>dc_group_config</b></td>

<td>if configuration requested and only for item_type G</td>

<td>The value is a list of data rows from the dc_group_config table.&nbsp;
In each row the values correspond to the names in the&nbsp; dc_group_config_cols
array element.&nbsp; If group data is requested, each row contains an additional
value, formats, whose value is found for each group member by joining to
the dc_item table.&nbsp; The addition of this element is useful so that
the application knows the configured presentation format of the group data.</td>
</tr>

<tr>
<td><b>dc_list_text_cols</b></td>

<td>if configuration requested and only for item_types DI, DL, LL, LI,
PL, and PI (items with list selections)</td>

<td>The value is the column names for the <a href="#dc_list_text">dc_list_text</a>
table.&nbsp; For dynamically computed selection lists, types DI and DL,
the lists are computed at the server as if they exist as rows in the dc_list_text
table.</td>
</tr>

<tr>
<td><b>dc_list_text</b></td>

<td>if configuration requested and only for item_types DI, DL, LL, LI,
PL, and PI (items with list selections)</td>

<td>The value is a list of data rows from the dc_list_text table.&nbsp;
In each row, the values correspond to the names in the dc_list_text_cols
array element.</td>
</tr>

<tr>
<td><b>dc_data_cols</b></td>

<td>if data requested</td>

<td>The value is a list of the column names from the <a href="#dc_data">dc_data</a>
table</td>
</tr>

<tr>
<td><b>dc_data</b></td>

<td>if data requested</td>

<td>The value is a list of data rows from the dc_data table.&nbsp; In each
row, the values correspond to the names in the dc_data_cols array element.</td>
</tr>

<tr>
<td><b>dc_recipient_cols</b></td>

<td>if configuration requested</td>

<td>The value is a list of the column names from the <a href="#dc_recipient">dc_recipient</a>
table</td>
</tr>

<tr>
<td><b>dc_recipient</b></td>

<td>if configuration requested</td>

<td>The value is a single row from the <a href="#dc_recipient">dc_recipient</a>
table for the configured alarm_recipient_id.&nbsp; A 0 value for the <b>alarm_recipient_id</b>
indicates a value has not been configured, and the recipient data is not
valid.</td>
</tr>
</table>

<p>
<hr WIDTH="100%">
<br><a NAME="dc_item_save"></a><b><font size=+1>dc_item_save </font></b><font size=+1>-
Write the configuration records of a data collection item to database tables.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_item_save <i>NameValueList</i></b></blockquote>
<b>Return Values</b>
<blockquote><b>0 {}</b>
<br><b>return_code error_message</b></blockquote>
<b>Description</b>
<blockquote>This procedure is used to create or update the configuration
data of a data collection item.&nbsp; The procedure takes a single argument,
<b><i>NameValueList</i></b>,
which is either formatted as a Tcl list of name, value pairs or as a Tcl
list of alternating names and values.&nbsp; Here we are experimenting with
formats that are easier to use than a long positional argument list,&nbsp;
simpler than the style of&nbsp; arguments passed to Tcl/Tk window objects,
and somewhat neutral to the choice of programming language.&nbsp; The name
value items can be in any order.&nbsp; One of the more significant input
parameters is <b>mode</b> which sets the expectation as to whether the
item is being newly created, revised, or for the case of import, either
created or revised.&nbsp; The remainder of the names that are possible
in the <b><i>NameValueList</i></b> list include the fieldnames in table
<a href="#dc_item">dc_item</a>
specified in lowercase.&nbsp; The procedure logic validates the consistency
of the argument data, and supplies appropriate default values, so it is
used by most applications rather than writing directly to the dc_item table.&nbsp;
The schema descriptions for the tables <a href="#dc_item">dc_item</a>,
<a href="#dc_item_use">dc_item_use</a>
and <a href="#dc_list_text">dc_list_text</a> can be reviewed for more detail
on the arguments.&nbsp; An example command invocation looks something like
the following; braces or quote delimiters can be used per the conventions
of Tcl:
<p><tt>dc_item_save {{mode insert} {module_id test} {item_id indxtest}
{description "only a test"}}</tt>
<p>The return value is always a two element list.&nbsp; The first element,
the return_code, is 0 for success in which case the message element is
empty.&nbsp; A non-zero return code is accompanied by an error message.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Parameter Name</b></td>

<td><b>Default Value&nbsp;</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>module_id</td>

<td>&nbsp;</td>

<td>Must be supplied to identify the item.&nbsp; See the dc_item schema.</td>
</tr>

<tr>
<td>item_id</td>

<td>&nbsp;</td>

<td>Must be supplied to identify the item.&nbsp; See the dc_item schema.</td>
</tr>

<tr>
<td>mode</td>

<td>&nbsp;</td>

<td>Must be supplied.&nbsp; Allowed values are <b>insert</b>, <b>update</b>,
or <b>import</b>.&nbsp;&nbsp; The value of mode sets the expectation as
to whether the item is being newly created, revised, or for the case of
import, either created or revised.&nbsp; For <b>insert</b> mode an error
is returned if the item already exists.&nbsp; For <b>update</b> mode, an
error is returned if the item does not exist.&nbsp; With <b>import</b>
mode, the item is created if it does not exist, and updated if it does
exist.</td>
</tr>

<tr>
<td>alarm_recipient_id</td>

<td>0</td>

<td>Optionally used to identify a recipient or list of recipients for SPC
alarm notifications.&nbsp; See the dc_recipient schema.</td>
</tr>

<tr>
<td>description</td>

<td>{}</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>discard_flag</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>display_id</td>

<td>&nbsp;</td>

<td>A value to help identify the workstation or display of the agent who
initiated the configuration change. This value can be passed to support
future audit and event logging.</td>
</tr>

<tr>
<td>ewma_weight</td>

<td>{}</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>formats</td>

<td>{%9.2f&nbsp; %9.2f&nbsp; %s}</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>group_ct</td>

<td>25</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>has_high_screen</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>high_screen</td>

<td>100</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>has_high_spec</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>high_spec</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>input_type</td>

<td>0</td>

<td>See the dc_item schema..</td>
</tr>

<tr>
<td>item_type</td>

<td>XM</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>limit_prime_high</td>

<td>100</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>limit_prime_low</td>

<td>70</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>limit_second_high</td>

<td>15</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>limit_second_baseline</td>

<td>7.5</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>limit_second_low</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>list_selection</td>

<td>{}</td>

<td>For the item types that possess predefined selection lists, this value
is passed as an ordered Tcl list of the selectable values.&nbsp; The values
are stored in the <a href="#dc_list_text">dc_list_text</a> table.</td>
</tr>

<tr>
<td>has_low_spec</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>low_spec</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>prime_runrules</td>

<td>{}</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>save_options</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>second_runrules</td>

<td>{}</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>spc_is_enabled</td>

<td>0</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>ts_groupstart</td>

<td>{}</td>

<td>See the dc_item_use schema.&nbsp; A non-blank value of this item causes
an insert or update to the dc_item_use table.&nbsp; In the case of an insert,
the calling logic can also specify a value for the dc_item_use datahub
field which ordinarily gets the value of the global array item dc_hub(datahub).</td>
</tr>

<tr>
<td>units</td>

<td>{}</td>

<td>See the dc_item schema.</td>
</tr>

<tr>
<td>user_id</td>

<td>{}</td>

<td>A value to help identify the agent who initiated the configuration
change.&nbsp; This value can be passed to support future audit and event
logging.</td>
</tr>
</table>
</blockquote>

<hr SIZE=0 WIDTH="100%">
<br><a NAME="dc_item_saveAs"></a><font size=+1><b>dc_item_saveAs</b> -
Copy the configuration records of a data collection item to a new name.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_item_saveAs <i>oldmodule_id olditem_id module_id item_id</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>return_code message</b></blockquote>

<p><br><b>Description</b>
<blockquote>This procedure will validate the destination names, validate
that the destination item does not already exist, and then copy the source
item definition to the destination.&nbsp; It does not delete the source
item.&nbsp; The return value is always a two element list.&nbsp; The first
element, the return_code, is 0 for success in which case the message element
is empty.&nbsp; A non-zero return code is accompanied by an error message.</blockquote>

<hr SIZE=0 WIDTH="100%">
<br><a NAME="dc_items_view"></a><font size=+1><b>dc_items_view</b> - Return
a table view of the data collection items.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_items_view</b></blockquote>
<b>Return Value</b>
<blockquote><a href="../man1/datahub.html#TclReplyFormat">An SQL selection
result</a>.</blockquote>
<b>Description</b>
<blockquote>The return value of this procedure is formatted as an SQL selection
result that joins the data collection items, their type names, and their
current alarm status.&nbsp; The procedure obtains data from three tables
to return the view.&nbsp; The column names returned in the result are ModuleName,
ItemName, DataType, AlarmStatus, and Description.&nbsp; The column names
are the result of calling the msgcat::mc command and mapping SQL table
column names to names that have been installed for display to the user.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_save_data"></a><font size=+1><b>dc_save_data</b> - Write
the in-memory tables to the file system as .tab SQL files.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_save_data</b></blockquote>
<b>Return Value</b>
<blockquote><b>None</b></blockquote>
<b>Description</b>
<blockquote>If you are not using a persistent database, this procedure
gets called at exit to save your changed data.&nbsp; Only relying on this
mechanism to save your changes is not recommended.&nbsp;&nbsp; Depending
on your requirements, running from the memory image may be feasible if
you use an Uninterruptible Power Supply, periodically call dc_save_data,
and in between calls, have subscriptions that write and flush SQL statements
representing data changes to the file system.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_schema"></a><font size=+1><b>dc_schema</b> - Obtain SQL
statements representing the database table schema.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_schema {<i>DBtype</i> hub}</b></blockquote>
<b>Return Value</b>
<blockquote><b>a Tcl list of {<i>tablename create_statement</i>} pairs</b></blockquote>
<b>Description</b>
<blockquote>This procedure is used by the DCC to obtain SQL table create
statements for creating the table schema in the Tcl/Tk process or in the
persistent database.&nbsp; The <b><i>DBtype</i></b> argument defaults to
<b>hub</b>
which returns statements for the Tcl/Tk datahub.&nbsp; Other supported
values include <b>db2</b>, <b>oracle</b>, or <b>sybase</b>.&nbsp; The <b><i>DBtype</i></b>
argument can be supplied in either alphabetic case.&nbsp; The database
types vary in the field types that need to be declared to support numeric
data or timestamp data.&nbsp; Also the use of the keywords NOT NULL varies
between the hub and its persistent counterparts.&nbsp; There is a feature
to support customization of the table schema.&nbsp; The <b>dc_schema</b>
procedure attempts to execute a user-written procedure <b>dc_schema_custom</b>,
calling it with the standard schema as an argument.&nbsp; The <b>dc_schema_custom</b>
procedure is able to supply a revised schema as its return value.&nbsp;
This feature can be used to add more columns to the DCC tables.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_schema_add_cols"></a><font size=+1><b>dc_schema_add_cols</b>
- Add columns to DCC Tables.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_schema_add_cols <i>schema_list table added_cols</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>a revised Tcl list of {<i>tablename create_statement</i>}
pairs</b></blockquote>
<b>Description</b>
<blockquote>A customer who has written his own <b>dc_schema_custom</b>
procedure is able to supply a revised schema for the DCC system.&nbsp;
The procedure, <b>dc_schema_add_cols</b> has been provided for use as a
convenient way to revise the <b><i>schema_list</i></b> argument for the
purpose of adding columns to tables.&nbsp; The <b><i>added_cols</i></b>
argument is the text to be inserted into the table SQL create statement,
just before the final primary key ( ) phrase.&nbsp; Here are example invocations:
<p><tt>set schema [dc_schema_add_cols $schema dc_item "max_days_age int"]</tt>
<br><tt>set schema [dc_schema_add_cols $schema dc_data "chamber int, run_id
varchar(32)"]</tt>
<br><tt>return $schema</tt></blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_schema_custom"></a><font size=+1><b>dc_schema_custom</b>
- Optionally, Customize the DCC Table Schema.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_schema_custom <i>schema_list DBtype</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>a Tcl list of {<i>tablename create_statement</i>} pairs</b></blockquote>
<b>Description</b>
<blockquote>This is a procedure that is optionally written by the customer,
and installed in his own application directory prior to initializing the
DCC.&nbsp;&nbsp; See the file <b>dc_schema_custom.tcl</b> for a model implementation
and additional comments.&nbsp; The <b>dc_schema</b> procedure attempts
to execute <b>dc_schema_custom</b>, calling it with the standard schema
as an argument.&nbsp; The <b>dc_schema_custom</b> procedure is able to
supply a revised schema as its return value.&nbsp; The procedure, <b>dc_schema_add_cols</b>
has been provided as a convenient way to add table columns.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_schema_write"></a><font size=+1><b>dc_schema_write</b>
- Write SQL statements representing the database table schema to a file.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_schema_write {<i>filename</i> dc_schema.sql} {<i>DBtype</i>
hub}</b></blockquote>
<b>Return Value</b>
<blockquote>None</blockquote>
<b>Description</b>
<blockquote>This procedure calls dc_schema and writes the result to a file
with each create statement being written as a new line of text.</blockquote>

<hr SIZE=0 WIDTH="100%">
<br><a NAME="dc_secs_discovery"></a><font size=+1><b>dc_secs_discovery</b>
- Discover Event Report Configurations.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_discovery {<i>spname</i> *}</b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_ASYNC_RESULT</b>
<br><b>1 DC_NO_SECS_HOSTS</b></blockquote>
<b>Description</b>
<blockquote>This command will refresh the DCC tables <a href="#dc_secs_event">dc_secs_event</a>
and <a href="#dc_secs_var_map">dc_secs_var_map</a> with the current status
of event reports available for a given SECS Host interface, <b><i>spname</i></b>.&nbsp;
The default value of <b><i>spname</i></b> causes the event report data
to be refreshed for all online SECS Host interfaces.</blockquote>

<hr SIZE=0 WIDTH="100%">
<br><a NAME="dc_secs_ei_hosts"></a><font size=+1><b>dc_secs_ei_hosts</b>
- Discover SECS Host Interfaces.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_ei_hosts</b></blockquote>
<b>Return Value</b>
<blockquote><b>a Tcl list of <i>spname</i> (SECS Host interface names)
values</b></blockquote>
<b>Description</b>
<blockquote>Use this command to retrieve a list of possible SECS Host interface
names that are discovered in the DMH group based on the DMH mailbox names
that are in use.&nbsp; The list may be empty.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_secs_event_report_save"></a><font size=+1><b>dc_secs_event_report_save</b>
- Validate and Save a configuration to collect an Event Report</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_event_report_save <i>spname CEID description varID_dcc_items</i>
\</b>
<br><b>&nbsp;&nbsp; {<i>auto_setup</i> 1} {<i>datahub</i> -}</b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_EI_ER_SAVED <i>CEID_is_configured CEID_is_enabled CEID_is_collected</i>
\</b>
<br><b>&nbsp; <i>varID_thought_not_configured_list</i></b>
<br><b>1 DC_EI_ER_BAD_SPNAME</b>
<br><b>2 DC_EI_ER_BAD_CEID</b>
<br><b>8 DC_EI_ER_BAD_DCC_ITEM <i>module_id item_id</i></b>
<br><b>9 DC_EI_DB_ERROR</b>
<br><b>10 DC_EI_DB_ERROR</b></blockquote>
<b>Description</b>
<blockquote>This command is used to validate and save the DCC collection
configuration data for an event report.&nbsp; The <i>varID_dcc_items</i>
argument is structured as a list of one or more <i>varID module_id item_id
is_collected</i> sequences.&nbsp; So it is a single list where the number
of elements is a multiple of 4.&nbsp; The <i>is_collected</i> item in the
<i>varID_dcc_items</i>
list is used as a boolean flag to state whether collection of a particular
variable value is desired.&nbsp; If the <i>is_collected</i> value is true
for any variable in the report, then the <i>is_collected</i> value for
the event record in the <a href="#dc_secs_event">dc_secs_event</a> table
will be saved as true.&nbsp; The <i>varID</i> values are the low-level
SECS variable identifiers; typically, cryptic integer codes.&nbsp; The
<i>auto_setup</i>
argument is used as a boolean.&nbsp; If the value is true,&nbsp; and the
saving action causes an event report to be collected when it previously
was not being collected, the <b>dc_secs_event_report_setup</b> procedure
call is made for the particular SECS Host interface <i>spname</i> so that
the interface will send the event report messages to the DCC.&nbsp; The
error return value of 8 occurs when the configuration indicates saving
a report variable is desired but the specified DCC item for the variable
does not exist.&nbsp; The successful return value of 0 also supplies status
and warning information.&nbsp; There are three values to indicate whether
the event is believed to be configured at the Host interface, and whether
the event report is believed to be enabled for reporting at the equipment,
and whether the event is now being collected.&nbsp; The possibly empty
list <b><i>varID_thought_not_configured_list </i></b>contains the <i>varID</i>
values for report items that are believed to not be part of the configuration
of the event report as known to the DCC.&nbsp; The DCC does not synchronize
with the SECS Host in performing this procedure so the DCC's knowledge
may not be current and accurate.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_secs_event_report_setup"></a><font size=+1><b>dc_secs_event_report_setup</b>
- Open or revise subscriptions to collect SECS Event Reports.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_event_report_setup {<i>spname</i> *}</b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_ASYNC_RESULT</b></blockquote>
<b>Description</b>
<blockquote>This command should be called after the configuration controlling
the collection of event reports is updated.&nbsp; The command causes table
subscriptions to be opened or revised so that only the collected Event
Reports are sent to the DCC server.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_secs_insert"></a><font size=+1><b>dc_secs_insert</b> -
Add SECS Trace and Event Report Data.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_insert <i>spname CEID name_value_pairs</i> {<i>ts</i>
{}}</b></blockquote>
<b>Return Value</b>
<blockquote><b>list [list <i>varID module_id item_id dc_data_insert_reply</i>]*</b></blockquote>
<b>Description</b>
<blockquote>This command is used by the Event and Trace report collection
logic.&nbsp; It basically takes the <i>varID</i>-<i>value</i> pairs in
a report, and adds them to their respective DCC items.&nbsp; The mapping
is configured in the <a href="#dc_secs_var_map">dc_secs_var_map</a> table.&nbsp;
The procedure returns a synchronous result indicating the results of calling
the <a href="#dc_data_insert">dc_data_insert</a> procedure.&nbsp; If collection
of a <i>varID</i>-<i>value</i> is not configured, the <i>dc_data_reply</i>
value for that item is an empty string.&nbsp; The execution of this procedure
also causes status fields in the <a href="#dc_secs_event">dc_secs_event</a>
table to be updated.</blockquote>

<hr SIZE=0 WIDTH="100%">
<br><a NAME="dc_secs_trace_action"></a><font size=+1><b>dc_secs_trace_action</b>
- Start, Restart, or Stop Trace Report Collection.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_trace_action <i>spname trace_number start</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_ASYNC_RESULT</b>
<br><b>1 DC_SECS_TRACE_NO_CONFIG</b>
<br><b>2 DC_SECS_TRACE_NO_VARS</b></blockquote>
<b>Description</b>
<blockquote>This command is used to start or stop trace report collection.&nbsp;
Set the <b><i>start</i></b> argument to 1 to start or restart a trace.&nbsp;
Set the <b><i>start</i></b> argument to 0 to stop it.&nbsp; The procedure
causes a DMH message to be sent to the <b><i>spname</i></b> SECS host interface.&nbsp;
The caller will typically have a subscription to the <a href="#dc_secs_trace">dc_secs_trace</a>
table, and see the success or failure of the command as signaled by the
asynchronous updates to the table.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_secs_trace_report_save"></a><font size=+1><b>dc_secs_trace_report_save</b>
- Validate and Save A Trace Report Configuration.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_secs_trace_report_save <i>spname trace_number description
period_secs </i>\</b>
<br><b>&nbsp; <i>total_samples&nbsp; report_sample_ct track_id varID_DCC_items</i>
{<i>datahub</i> -}</b></blockquote>
<b>Return Value</b>
<blockquote><b>0 DC_EI_TR_SAVED</b>
<br><b>1 DC_EI_TR_BAD_SPNAME</b>
<br><b>2 DC_EI_TR_BAD_TRACE_NUMBER</b>
<br><b>3 DC_EI_TR_BAD_TOTAL_SAMPLES</b>
<br><b>4 DC_EI_TR_BAD_SAMPLE_CT</b>
<br><b>5 DC_EI_TR_BAD_PERIOD_SECS</b>
<br><b>6 DC_EI_TR_BAD_SAMPLING</b>
<br><b>7 DC_EI_TR_NO_VARS</b>
<br><b>8 DC_EI_TR_BAD_DCC_ITEM</b>
<br><b>9 DC_EI_DB_ERROR</b>
<br><b>10 DC_EI_DB_ERROR</b></blockquote>
<b>Description</b>
<blockquote>This command is used to validate and save the configuration
data of a trace report.&nbsp; The <i>varID_DCC_items</i> argument is structured
as a list of one or more <i>varID module_id item_id</i> sequences.&nbsp;
So it is a single list where the number of elements is a multiple of 3.&nbsp;
The varID values are the low-level SECS variable identifiers; typically,
cryptic integer codes.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_set_auto_path"></a><font size=+1><b>dc_set_auto_path</b>
- Initialize the Tcl auto_path variable.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_set_auto_path</b></blockquote>
<b>Return Value</b>
<blockquote>None</blockquote>
<b>Description</b>
<blockquote>This procedure is called by both the DCC server and the example
DCC UI to set the Tcl global variable <a href="../mann/library.html">auto_path</a>
which is a&nbsp; sequenced list of file system directories that are searched
for Tcl procedures.&nbsp; The logic insures that if the peer directory
named <b>custom</b> exists, and it has a tclIndex file, then it is added
to the <b>auto_path</b> before the usual dcc directory so that the user's
custom procedure versions are found and used before the Hume distributed
versions.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_statistics"></a><font size=+1><b>dc_statistics</b> - Compute
control limits and other SPC statistics from collected data.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_statistics <i>array_name</i> {<i>global</i> 1}</b></blockquote>
<b>Return Value</b>
<blockquote>The return values are added elements in the array supplied
by the caller.</blockquote>
<b>Description</b>
<blockquote>This procedure is used to calculate the standard deviation,
Cp, Cpk, and control limit values for SPC data items.&nbsp; The caller
passes in the name of an array which has been populated with configuration
and collected data for the item using the dc_item_read procedure.&nbsp;
By default, the array is assumed to be a global data item.&nbsp; However,
the optional
<i>global</i> procedure argument can be set to 0 to indicate
that the array should be accessed in the caller's stack frame using <a href="../mann/upvar.html">upvar</a>.&nbsp;
The calculations use the sum of square differences from the mean techniques
to avoid round-off error for large or ill-conditioned data sets.&nbsp;
Note that the dc_item_read procedure must be evaluated at the server where
the data is accessible, but the dc_analysis procedure can be executed by
any Tcl process.
<p>The following array entries are added:
<br>&nbsp;
<table BORDER WIDTH="89%" >
<tr>
<td><b>Array Subscript</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td><b>!analysis</b></td>

<td>A substituted text message of the form:
<p>"Calculated SPC values are based on $count points dating from
<br>&nbsp;$ts_min to $ts_max.
<p>&nbsp;Primary value average=$prime_avg
<br>&nbsp;Primary value standard deviation=$prime_sigma"
<p>Or of the form:
<p>"Insufficient data exists for SPC calculations."</td>
</tr>

<tr>
<td><b>!count</b></td>

<td>The integer number of points included in the SPC analysis.&nbsp; The
value may be less than the total available because of the dc_data field
spc_excluded values.</td>
</tr>

<tr>
<td><b>!cp</b></td>

<td>When both an upper and lower specification limit are defined, Cp is
the ratio of the distance between the specification limits, to the calculated
six sigma distance separating the calculated control limits.&nbsp;</td>
</tr>

<tr>
<td><b>!cpk</b></td>

<td>The Cpk statistic is the smaller value based on either the upper or
lower specification limit, taking the ratio of:
<br>&nbsp; (spec limit -&nbsp; centerline)/(control limit - centerline)
<br>It is a measure of process control that is also sensitive to the possibility
that the control limits are not necessarily centered in the specification
limits.</td>
</tr>

<tr>
<td><b>!prime_avg</b></td>

<td>An empty string if !count &lt; 1.&nbsp; If !count > 1, the average
of the included primary number values.&nbsp; This is usually presented
to the user as the centerline of the computed control limits for the primary
variable control chart.</td>
</tr>

<tr>
<td><b>!prime_sigma</b></td>

<td>An empty string if !count &lt; 2.&nbsp; If !count > 2, the standard
deviation of the included primary values.&nbsp; For most SPC charts, the
calculated chart limits are +/- 3 sigma around the primary average.&nbsp;
For P, IP, U, and IU item_types, the primary limits are for the actual
average sample size found in the data.</td>
</tr>

<tr>
<td><b>!prime_lcl</b></td>

<td>The calculated lower control limit for the primary value.&nbsp; An
empty string if not applicable or available.&nbsp;</td>
</tr>

<tr>
<td><b>!prime_ucl</b></td>

<td>The calculated upper control limit for the primary value.&nbsp; An
empty string if not applicable or available.&nbsp;</td>
</tr>

<tr>
<td><b>!second_avg</b></td>

<td>The average value of the included dc_data.second_num values.&nbsp;
For P, IP, U, and IU data, it is the average sample size.&nbsp; For other
item types, the value has an intermediate role in computing control limits,
and may not be exposed to the user.</td>
</tr>

<tr>
<td><b>!second_lcl</b></td>

<td>The secondary statistic lower control limit such as the lower limit
on a RANGE or S chart. Second chart control limits are applicable to item_types
XM, XR, XS, XC, and XE.&nbsp;&nbsp; The value is an empty string if not
applicable or available.&nbsp; For a cusum item, this value is half the
total V mask angle expressed in degrees.</td>
</tr>

<tr>
<td><b>!second_bsl</b></td>

<td>An empty string if not applicable or available.&nbsp; The computed
baseline value for the second chart control limits.&nbsp; Also the computed
target for EWMA or cusum charts (the same as !prime_avg).</td>
</tr>

<tr>
<td><b>!second_ucl</b></td>

<td>An empty string if not applicable or available. The secondary statistic
upper control limit such as the upper limit on a RANGE or S chart.&nbsp;
For a cusum item, this value is the "d" value and it is calculated assuming
alpha risk is .0027, beta risk is 0.01, and a cusum half angle of 14.0
degrees.</td>
</tr>

<tr>
<td><b>!ts_min</b></td>

<td>An empty string if not available. The earliest timestamp of the data
included for analysis.</td>
</tr>

<tr>
<td><b>!ts_max</b></td>

<td>An empty string if not available. The latest timestamp of the data
included for analysis.</td>
</tr>
</table>
</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_access_check"></a><font size=+1><b>dc_user_access_check</b>
- Validation of a User for a Privilege.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_access_check <i>user_id encoded_password privilege_id</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>0 <i>success_message</i></b>
<br><b><i>failure_code failure_message</i></b></blockquote>
<b>Description</b>
<blockquote>This command does the direct validation of a user and password
for a particular privilege without performing a login.&nbsp; It can be
useful for features such as a Supervisor sign-off that may occur during
another User's login session.&nbsp; The <b><i>encoded_password</i></b>
is prepared using the <a href="#dc_encode">dc_encode</a> command or its
equivalent for other programming languages.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_all_groups"></a><font size=+1><b>dc_user_all_groups</b>
- List Configured Security Groups.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_all_groups {<i>want_descriptions</i> 0}</b></blockquote>
<b>Return Value</b>
<blockquote><b><i>grouplist</i></b></blockquote>
<b>Description</b>
<blockquote>This call is a convenient means of querying the <a href="#dc_user_group">dc_user_group</a>table.&nbsp;
The result is a list sorted in dictionary order, where each element in
the list is either the <b><i>group_id</i></b> by itself, or the <b><i>group_id</i></b>
paired with the group <b><i>description</i></b>.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_all_privileges"></a><font size=+1><b>dc_user_all_privileges</b>
- List Configured Privileges.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_all_privileges {<i>want_descriptions</i> 0}</b></blockquote>
<b>Return Value</b>
<blockquote><b><i>privilegelist</i></b></blockquote>
<b>Description</b>
<blockquote>This call is a convenient means of querying the <a href="#dc_user_privilege">dc_user_privilege</a>
table.&nbsp; The result is a list sorted in dictionary order, where each
element in the list is either the <b><i>privilege_id</i></b> by itself,
or the <b><i>privilege_id</i></b> paired with the privilege <b><i>description</i></b>.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_all_user_ids"></a><font size=+1><b>dc_user_all_user_ids</b>
- Obtain a list of Configured Users.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_all_user_ids {<i>want_names</i> 0}</b></blockquote>
<b>Return Value</b>
<blockquote><b><i>userlist</i></b></blockquote>
<b>Description</b>
<blockquote>This call is a convenient means of querying the <a href="#dc_user">dc_user</a>
table.&nbsp; The result is a list sorted in dictionary order, where each
element in the list is either the <b><i>user_id</i></b> by itself, or the
<b><i>user_id</i></b>
paired with the <b><i>user_name</i></b> field value.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_assoc_groups"></a><font size=+1><b>dc_user_assoc_groups</b>
- Obtain the Security Groups Associated with A User.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_assoc_groups <i>user_id</i></b></blockquote>
<b>Return Value</b>
<blockquote><b><i>grouplist</i></b></blockquote>
<b>Description</b>
<blockquote>This call is a convenient means of querying the <a href="#dc_user_grp_assoc">dc_user_grp_assoc</a>
table.&nbsp; The result is a list of associated group_ids sorted in dictionary
order.&nbsp; The result of the call can be used as an input argument to
<b>dc_user_assoc_privileges</b>,
described next.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_assoc_privileges"></a><font size=+1><b>dc_user_assoc_privileges</b>
- List the Privileges Associated with Specified Groups.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_assoc_privileges <i>grouplist</i></b></blockquote>
<b>Return Value</b>
<blockquote><b><i>privilegelist</i></b></blockquote>
<b>Description</b>
<blockquote>This call is a convenient means of querying the <a href="#dc_user_priv_assoc">dc_user_priv_assoc</a>
table.&nbsp; The result is a list of associated privilege_ids sorted in
dictionary order, with duplicates removed.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_delete"></a><b><font size=+1>dc_user_delete,&nbsp;<a NAME="dc_user_read"></a>_read,&nbsp;<a NAME="dc_user_write"></a>_write</font></b><font size=+1>
- Configure Users for Security Services.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_delete <i>user_id</i></b>
<br><b>dc_user_read <i>user_id</i> {<i>groups_or_privs</i> groups}</b>
<br><b>dc_user_write <i>user_id user_name timeout_secs encoded_password
grouplist editor</i> {<i>clientdata</i> {}}</b></blockquote>
<b>Delete Return Values</b>
<blockquote><b>0 SS_user_delete_ok</b>
<br><b>1 SS_unknown_user_id</b></blockquote>
<b>Read Return Values</b>
<blockquote><b><i>user_id user_name timeout_secs encoded_password chosenlist
clientdata</i></b>
<br><b><i>user_id </i>{} {} {} {} {}</b></blockquote>
<b>Write Return Values</b>
<blockquote><b>0 <i>SS_user_write_ok</i></b>
<br><b>1 <i>improper_user_id_message</i></b>
<br><b>2 <i>SS_unknown_group</i></b>
<br><b>3<i> SS_invalid_password</i></b>
<br><b>4 <i>SS_short_password</i></b>
<br><b>5 <i>SS_unexpected_SQL_error</i></b>
<br><b>6 <i>SS_invalid_timeout</i></b></blockquote>
<b>Description</b>
<blockquote>These commands provide for configuring users.&nbsp; The second
form of the Read Return Value is returned for improper or unknown <b><i>user_id</i></b>
values.&nbsp;&nbsp; The <b>dc_user_read</b> method has an optional argument
<b><i>groups_or_privs</i></b>
which defaults to the value <b>groups</b>.&nbsp; The value <b>groups</b>
is used to obtain a list of group_id's representing the Security Groups
that the user is a member of.&nbsp; The value <b>privs</b> is used to obtain
the list of privilege_id's implied by the user's Security Group memberships.&nbsp;
In this case, the return value of the <b>dc_user_read
</b>method corresponds
to the <i>user_data</i> structure returned by <a href="#dc_user_login">dc_user_login</a>
method.&nbsp; The Write result of return code 4 is controlled by the business
rule value <a href="#MinPasswordLength">MinPasswordLength</a>.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_group_delete"></a><b><font size=+1>dc_user_group_delete,&nbsp;<a NAME="dc_user_group_read"></a>_read,&nbsp;<a NAME="dc_user_group_write"></a>_write</font></b><font size=+1>
- Configure Security Groups.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_group_delete <i>group_id</i></b>
<br><b>dc_user_group_read <i>group_id</i></b>
<br><b>dc_user_group_write <i>group_id description privilege_ids</i></b></blockquote>
<b>Delete Return Values</b>
<blockquote><b>0 SS_group_delete_ok</b>
<br><b>1 SS_unknown_group</b></blockquote>
<b>Read Return Value</b>
<blockquote><b><i>group_id description privilegelist</i></b></blockquote>
<b>Write Return Values</b>
<blockquote><b>0 <i>SS_group_write_ok</i></b>
<br><b>1 <i>improper_group_id_message</i></b>
<br><b>2 <i>SS_unknown_privilege</i></b>
<br><b>5 <i>SS_unexpected_SQL_error</i></b>
<br><b>6 <i>SS_no_description</i></b></blockquote>
<b>Description</b>
<blockquote>These commands provide for configuring Security Groups.&nbsp;
If the Read method returns a blank <b><i>description</i></b> it signifies
that the group was not found.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_login"></a><b><font size=+1>dc_user_login,&nbsp;<a NAME="dc_user_logout"></a>_logout</font></b><font size=+1>
- Security Services Login and Logout.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_login <i>display user_id encoded_password clientID</i></b>
<br><b>dc_user_logout <i>display user_id clientID</i> <i>atexit</i></b></blockquote>
<b>Login Return Values</b>
<blockquote><b>0 <i>user_data ts_login</i></b>
<blockquote><b><i>user_data </i>:= <i>user_id user_name timeout_secs encoded_password
privileges clientdata</i></b></blockquote>
<b>1 <i>SS_unknown_user_id</i></b>
<br><b>2 <i>SS_incorrect_password</i></b>
<br><b>3 <i>SS_display_missing</i></b>
<br><b>8 <i>SS_max_login_exceeded</i></b>
<br><b>9 <i>SS_password_expired</i></b>
<br><b>5 <i>SS_unexpected_SQL_error</i></b></blockquote>
<b>Logout Return Value</b>
<blockquote><b>0 <i>SS_logout</i></b>
<br><b>1 <i>SS_logout_who</i></b></blockquote>
<b>Description</b>
<blockquote>The <b>dc_user_login</b> command validates the user's password
and if successful, returns a list of three items, the 0 return code, a
<b><i>user_data</i></b>
structure, and the UTC timestamp of login.&nbsp; The <b><i>user_data</i></b>
structure is a Tcl list of the elements as indicated above.&nbsp; Within
the <b><i>user_data</i></b> structure the
<b><i>privileges</i></b> item
is a list of all of the privileges granted to the user through his membership
in any number of Security Groups.&nbsp; The <b><i>clientID</i></b> argument
is the DMH Server's identification for the DMH client.&nbsp; This value
is obtained by using the <a href="../mann/mbx.html">mbx clientID</a> command
or the equivalent method using the DMH client libraries.&nbsp; By using
the <b><i>clientID</i></b> value, the DCC can use the <a href="../mann/mh_app_lost.html">mh_app_lostclient</a>
DMH feature to know when a User Session has disconnected.&nbsp; The <b><i>encoded_password</i></b>
is prepared using the <a href="#dc_encode">dc_encode</a> command or its
equivalent for other programming languages.&nbsp; If the
<b>dc_user_login</b>
command is not successful, a non-zero return code and substituted text
message is returned.&nbsp; The various SS_* tokens above are the particular
message ID values used with the <a href="../mann/msgcat.html">msgcat::mc</a>
call to prepare the reply text.&nbsp; There are three business rule values
that affect login results, <b>PasswordExpirationDays</b>, <b>MaxLoginPerUser</b>,
and <b>MaxUsersPerDisplay</b>.&nbsp; As a side effect of the login call,
the row in the <a href="#dc_user_session">dc_user_session</a> status table
representing the User Session is updated.
<p>The <b>dc_user_logout</b> command has more flexibility than is first
apparent.&nbsp; If the <b><i>user_id</i></b> is supplied as an empty string,
the logout intention is applied to any existing login for a specified <b><i>display</i></b>.&nbsp;
If no <b><i>user_id</i></b> and no <b><i>display</i></b> are specified,
the logout intention is applied to any login using the same DMH connection
identified by the <b><i>clientID</i></b> value.&nbsp; If the <b><i>atexit</i></b>
argument is set to 1, the call also signifies that the application is exiting;
and the logic initiates the same cleanup as if the <a href="#dc_user_session_proc">dc_user_session</a>
call was made with the <b><i>atexit</i></b> flag set to 1.&nbsp; A User
Interface will typically send the logout command asynchronously to the
DCC server at exit, before the DMH connection is closed.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_password_update"></a><font size=+1><b>dc_user_password_update</b>
- Update a User's Password.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_password_update <i>user_id encoded_new encoded_old</i></b></blockquote>
<b>Return Values</b>
<blockquote><b>0 SS_password_update_ok</b>
<br><b>3 SS_invalid_password</b>
<br><b>4 SS_short_password</b>
<br><b>5 SS_password_update_failure</b>
<br><b>7 SS_same_password</b></blockquote>
<b>Description</b>
<blockquote>If the encoded form of the new password implies that the new
password length is less than the business rule value <a href="#MinPasswordLength">MinPasswordLength</a>,
the return code value of 4 is obtained.&nbsp; If the encoded form of the
old password is not appropriate for the <i>user_id</i> record, or if the
<i>user_id</i>
record does not exist, the return code value is 5.&nbsp; If the new password
is the same as the old password, the return code is 7.&nbsp; If the call
succeeds, the <b>ts_lastedit</b> field value in the <b>dc_user</b> table
is updated to the current time (UTC), and the <b>lasteditor</b> field value
is set to the <i>user_id</i> value.&nbsp; So the <b>ts_lastedit</b> field
can be used to support password expiration logic.&nbsp; The encoded passwords
are prepared using the <a href="#dc_encode">dc_encode</a> command or its
equivalent for other programming languages.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_privilege_delete"></a><b><font size=+1>dc_user_privilege_delete,&nbsp;<a NAME="dc_user_privilege_read"></a>_read,&nbsp;<a NAME="dc_user_privilege_write"></a>_write</font></b><font size=+1>
- Configure Security Privileges.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_privilege_delete <i>privilege_id</i></b>
<br><b>dc_user_privilege_read <i>privilege_id</i></b>
<br><b>dc_user_privilege_write <i>privilege_id description</i></b></blockquote>
<b>Delete Return Values</b>
<blockquote><b>0 SS_privilege_delete_ok</b>
<br><b>1 SS_unknown_privilege</b></blockquote>
<b>Read Return Value</b>
<blockquote><b><i>privilege_id description</i></b></blockquote>
<b>Write Return Values</b>
<blockquote><b>0 <i>SS_privilege_write_ok</i></b>
<br><b>1 <i>improper_privilege_id_message</i></b>
<br><b>5 <i>SS_unexpected_SQL_error</i></b>
<br><b>6 <i>SS_no_description</i></b></blockquote>
<b>Description</b>
<blockquote>These commands provide for configuring security privileges.&nbsp;
When a privilege is defined, the logic insures that a description is provided.&nbsp;
When the Read method returns an empty string for a description, it implies
that the specified <b><i>privilege_id</i></b> was not found in the <a href="#dc_user_privilege">dc_user_privilege</a>
table.</blockquote>

<hr WIDTH="100%">
<br><a NAME="dc_user_session_proc"></a><font size=+1><b>dc_user_session</b>
- Announce the startup or shutdown of a User Session.</font>
<p><b>Tcl Command Syntax</b>
<blockquote><b>dc_user_session <i>display</i> <i>clientID</i> <i>atexit</i></b></blockquote>
<b>Return Value</b>
<blockquote><b>0 {}</b>
<br><b>3 <i>SS_display_missing</i></b></blockquote>
<b>Description</b>
<blockquote>A User Interface should call this procedure at startup and
shutdown to help maintain the status information in table <a href="#dc_user_session">dc_user_session</a>&nbsp;
The <b><i>display</i></b> argument should be the X-Windows DISPLAY value
or the Windows hostname where the User Session is running.&nbsp; A Tcl
application can determine the latter by calling <a href="../mann/dp_hostname.html">dp_hostname</a>.&nbsp;
The <b><i>atexit</i></b> argument should be set to 1 to indicate User Session
shutdown, otherwise 0.&nbsp;&nbsp; The <b><i>clientID</i></b> argument
is the DMH Server's identification for the DMH client.&nbsp; This value
is obtained by using the <a href="../mann/mbx.html">mbx clientID</a> command
or the equivalent method using the DMH client libraries.&nbsp; By using
the <b><i>clientID</i></b> value, the DCC can use the <a href="../mann/mh_app_lost.html">mh_app_lostclient</a>
DMH feature to know when a User Session has disconnected.</blockquote>

<hr WIDTH="100%">
<br>
<hr WIDTH="100%">
<h3>
<a NAME="ConfigUI"></a><b>Data Collection &amp; SPC Component - GUI</b></h3>
Hume Integration provides a complete user interface, that can be started
as a separate process by executing the <b>dc_ui.bat</b> file on Windows
platforms, or the <b>dc_ui</b> script on POSIX platforms.&nbsp; The <b>dc_ui</b>
procedure can also be run in the same process that executes the DCC server
logic.&nbsp; In a newly installed system, you can login using the user
name of <b>admin</b> and the password <b>admin</b>.&nbsp; The content of
this document is aimed at the needs of the system integrator.&nbsp; Contact
Hume Integration for training and User Guide materials that are aimed at
the needs of the system enduser.
<p>
<hr WIDTH="100%">
<br>
<hr WIDTH="100%">
<h3>
<a NAME="TableSchema"></a><b>Data Collection &amp; SPC Component - Table
Schema</b></h3>

<h4>
General Schema Comments</h4>
The conceptual framework for data collection is the notion of data collection
items and groups of items.&nbsp; An item combines closely related data
inputs and analysis.&nbsp;&nbsp; There are approximately two dozen types
of items defined by the DCC system.&nbsp; An example of an item type is
the XBAR, S traditional Shewhart SPC analysis.&nbsp; With this example,
the item definition includes parameters specifying input of sample group
data combined with control limits and run rules for both the XBAR and S
charts, which are populated by the input of the sample group data.
<p>Collected item data is saved in the <a href="#dc_data">dc_data</a> table.&nbsp;
Configuration data for the data collection items is found in the <a href="#dc_item">dc_item</a>
table.&nbsp; Per-item data that varies with the usage of an item is found
in the <a href="#dc_item_use">dc_item_use</a> table.&nbsp; The fact that
the per-item configuration data is cleanly separated from the per-item
usage data means that activities such as re-importing configuration data
do not disrupt current use of an item definition.&nbsp; Also, the dc_item
records can be shared across multiple DCC servers.
<p>If you are using a persistent database the startup logic creates nearly
the same table schema in your persistent database as is used for the in-memory
tables.&nbsp; The only difference between the two sets of tables is some
minor variation in the primary table keys to support shared use of a persistent
database with multiple DCC instances.
<p>The in-memory <b>dc_data</b> table only holds the most recent subset
of data as established by the group_ct field of the <b>dc_item</b> table.&nbsp;
Older data as well as current data can be found in the persistent database
<b>dc_data</b>
table until it is archived and deleted by the user's custom logic.&nbsp;
The system design relies on the use of high resolution timestamps to key
and organize collected data.&nbsp; To avoid problems with Daylight Saving
Time and deployment across multiple timezones, the timestamps are stored
in the database for the UTC timezone.&nbsp; As appropriate, the application
logic converts the database timestamps to the user's local timezone for
presentation.&nbsp; Sets of dc_data records that are created as the result
of a single data entry action share the same high resolution timestamp
value as part of their data.&nbsp;&nbsp; Some data collection items such
as pareto lists provide for the input of multiple dc_data records in a
single data entry action.&nbsp; In addition to the common timestamp, the
integer sequence field in the dc_data table is used to uniquely key the
similar records as well as show the order in which the observations were
entered.
<h4>
<a NAME="dc_data"></a><b>dc_data Table -&nbsp;&nbsp; Collected Data</b></h4>
Data collection items can be a data input item such as an XBAR,S item,
or a grouping of data input items.&nbsp; The idea of Groups is that a dialog
is presented to the user to obtain sets of related data items in one action.&nbsp;
Also, when data is collected in a Group, there is provision to customize
the appearance of the data collection dialog, and to customize its logic.&nbsp;
In contrast, the standard data collection dialogs for the input of individual
data items are not customizable.
<p>For the usual case of Group data collection, one or more dc_data table
records are created.&nbsp; Each record corresponds to a value of an entered
data input item as indicated by the <i>module_id</i> and <i>item_id</i>
fields.&nbsp; In most cases, an additional dc_data record is created&nbsp;
with the module_id and item_id of the Group name in order to record that
the data collection event occurred for the Group.&nbsp; All of these records
are given the same <i>ts</i> value to indicate that they were collected
as part of the same data collection event.&nbsp; A record for the Group
name is not written if the data collection action is managed by the Process
Flow Component.&nbsp; In this case, the data collection event is recorded
in other tables associated with the entity being tracked.&nbsp; The distinction
becomes important when the user wants to display past entries, or re-visit
them for editing.&nbsp; Data that is collected by the Data Collection system
is efficiently viewed and managed separately from data that is collected
for process flow tracking.
<p>The SPC analysis logic subscribes to the insert of new data into this
table.&nbsp; Entered data should have a corresponding record for the {module_id
item_id} in the dc_item table.&nbsp; The analysis logic will create a corresponding
row in the dc_item_use table if one does not already exist.&nbsp; The analysis
logic also subscribes to the deletion of rows to this table, and will automatically
dismiss an SPC alarm if the record causing the alarm is deleted.&nbsp;
The analysis logic does not listen to the update of data values.&nbsp;
If the user interface permits the editing or revision of collected data,
the user interface should delete and re-insert the revised record for the
point.&nbsp; The SPC analysis will be performed correctly if it is always
the latest point that is being deleted.&nbsp; Therefore, if the application
allows revision of a point in the past, and the SPC analysis is to be re-done,
the application should delete the revised point and all newer points in
the order of newest to oldest, and then re-insert the revised point and
the newer points in the order of oldest to newest.&nbsp; The standard application
allows a user to revise the latest point of a data item if he is the person
that entered the point.&nbsp; A higher level of privilege is needed to
revise data that has been entered by someone else, or data that has been
entered in the past.&nbsp; The standard application does not attempt to
delete and re-insert the newer data to recalculate the SPC analysis.&nbsp;
The standard application also logs the event of the data revision.&nbsp;
A site can withhold the data editing privilege from all users to prevent
data revision using the standard application.
<p><b>A cautionary note on subscriptions.&nbsp; </b>The SPC analysis logic
changes the data that is inserted into the <b>dc_data</b> table.&nbsp;&nbsp;
For EWMA, Individual X, and cusum data items, the <b>second_num</b> field
is updated to contain the moving average or a similar statistic.&nbsp;
If an SPC alarm occurs, the <b>notes</b> and <b>spc_alarm</b> fields are
updated.&nbsp; Because of the way subscriptions work, these updates are
seen in the correct order by table subscribers only if the SPC analysis
subscription is the last subscription on the table.&nbsp; A procedure is
provided, <b><a href="#dc_data_sub_open">dc_data_sub_open</a></b>, which
should be used to open subscriptions to the <b>dc_data</b> table.&nbsp;
The procedure makes sure that the analysis subscription is always the last
subscription.&nbsp; Another procedure, <a href="#dc_data_sub_filtered">dc_data_sub_filtered</a>,
is provided which is able to combine the analysis updates with the original
insert subscription notifications, so that the subscriber just sees the
simpler subscription feed.&nbsp; Still higher level procedures, <a href="#dc_data_sub_add">dc_data_sub_add</a>,
and <a href="#dc_data_sub_mod">dc_data_sub_mod</a> are provided to combine
the filtered subscription with the reading of current item data and configuration.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>module_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>Data input items and Group items are given two part names.&nbsp; This
field is used to hold the less specific part of the item name.&nbsp; For
example, the same <i>item_id</i>, GAS_FLOW<i> </i>might be collected for
different furnace systems specified by <i>module_id</i>.&nbsp; Mandatory
input.</td>
</tr>

<tr>
<td>item_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>&nbsp;The item_id field holds the more specific part of the item name.&nbsp;
Mandatory input.</td>
</tr>

<tr>
<td>ts</td>

<td>PCK</td>

<td>varchar(26)</td>

<td>The timestamp of the data collection event formatted as returned by
the "localtime 16" command; for example, 1998-10-06 09:18:47.230000.&nbsp;
All of the records for a specific timestamp value are associated with the
same data collection event.&nbsp; In order to guarantee unique values for
each data collection event at a specific datahub, the timestamp value is
almost always generated in the datahub process.&nbsp; Mandatory input.&nbsp;
<p>We are storing the timestamp as UTC values so that there is no issue
with usage across timezones or problems with Daylight Saving Time.&nbsp;
To convert into the local timezone, use the Tcl command "mktime $ts 15".</td>
</tr>

<tr>
<td>sequence</td>

<td>PCK</td>

<td>integer</td>

<td>Certain data types such pareto lists can have more than one value per
data collection event.&nbsp; The sequence field is used to distinguish
and order multiple records of a variable collected in a single data collection
event.&nbsp; When used, sequence values ordinarily start from 100 and are
incremented by one.&nbsp; If not applicable, the value can default to 0.&nbsp;
The starting value of 100 results in a properly sorted list whether numeric
or text comparison is used.</td>
</tr>

<tr>
<td>prime_num</td>

<td>&nbsp;</td>

<td>float</td>

<td>For numeric data items, the primary numeric value.&nbsp; For example,
the sample value of an Individual X data item.&nbsp;</td>
</tr>

<tr>
<td>second_num</td>

<td>&nbsp;</td>

<td>float</td>

<td>For numeric data items, the secondary numeric value such as the sample
size, or sample standard deviation.&nbsp; For system calculated moving
ranges, the value is set to -1 when the record is created, and updated
to the proper value by the analysis logic.</td>
</tr>

<tr>
<td>text_value</td>

<td>&nbsp;</td>

<td>varchar(200)</td>

<td>This field is used to store collected data that is text such as a selection
from a list.&nbsp; Also, the field is used to hold raw input values to
support later review or revision.&nbsp;</td>
</tr>

<tr>
<td>spc_excluded</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Set to 1 if this record should be ignored by the SPC analysis logic
or the logic that accumulates raw individual inputs into subgroup samples.</td>
</tr>

<tr>
<td>is_partial</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Set to 1 if this record is for a raw partial value that the system
should collect multiple instances of to form a complete subgroup sample
before analysis.</td>
</tr>

<tr>
<td>notes</td>

<td>&nbsp;</td>

<td>varchar(1000)</td>

<td>This text field is formatted as a Tcl list.&nbsp; The first item of
each list element is a tag indicating the nature of the element.&nbsp;
The following tags are used by the system software.&nbsp; There can be
more than one instance of certain tags such as the annotation tag. You
are free to develop and use additional tags.&nbsp;
<br><b>ec&nbsp;</b> - Entry comment.&nbsp; The element is a pair.&nbsp;
The second item of the pair is the free form text entry made by the user
during the data collection event.&nbsp;
<br><b>oos</b> - Out of specification.&nbsp; The element is a pair.&nbsp;
The second item of the pair is a text string indicating the specification
exceeded by the input value.&nbsp;
<br><b>am</b> - SPC alarm message.&nbsp; The element is a pair.&nbsp; The
second item of the pair is a text message indicating the type of SPC alarm
caused by the data input.&nbsp;
<br><b>as</b> - Alarm signoff.&nbsp; The element is a 4 element list.&nbsp;
The second item is the timestamp of SPC alarm signoff.&nbsp; The third
element is the name of the person who performed the signoff.&nbsp; The
fourth element is the text entered at the time of alarm signoff.&nbsp;
<br><b>ann</b> - Annotation.&nbsp; The element is a 4 element list.&nbsp;
The second item is the timestamp of the annotation.&nbsp; The third element
is the name of the person who added the annotation.&nbsp; The fourth element
is the text of the annotation.</td>
</tr>

<tr>
<td>spc_alarm</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Data is ordinarily entered with this field value set or defaulting
to 0.&nbsp; When applicable, the SPC analysis logic will update this field
to indicate the occurrence of one or more alarms.&nbsp; The field is treated
as a bit string.&nbsp; The 0x01 bit indicates an alarm on the primary variable;
and the 0x02 bit indicates an alarm on the secondary variable.&nbsp; For
example, the value 3 indicates alarms on both the primary and secondary
variables.</td>
</tr>

<tr>
<td>user_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>The identifier of the user who input the data in the case of manual
input.&nbsp; Automated equipment interfaces or similar data collection
programs should write a software component name into this field.</td>
</tr>

<tr>
<td>equipment_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>The equipment identifier in the case of data that is strongly associated
with an equipment item.</td>
</tr>

<tr>
<td>track_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>This field is used to hold the tracking group identifier when data
input is associated with the Process Flow Component.&nbsp; The timestamp
field is used to correlate the process step in the process flow.</td>
</tr>

<tr>
<td>discard_flag</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Ordinarily, data that is written to this table is also saved to the
persistent storage system.&nbsp; Setting this flag to 1 when the record
is first created in the datahub indicates that the record should not be
saved by the persistent storage system.&nbsp; If the discard_flag is updated
to 1 from 0, the update is passed on to the persistent storage system and
it signifies that the record has been removed from the datahub's in-memory
database.&nbsp; The record will not be reloaded into the datahub if the
system is shutdown and restarted.&nbsp; The updated record can be deleted
from the datahub without being deleted from the persistent storage system.&nbsp;
The persistent storage system only sees the insertion and deletion of data
where the discard_flag is 0.&nbsp;
<p>Persistent Storage System subscription interface:&nbsp;
<p>open ... insert, update, delete * where discard_flag=0&nbsp;
<br>open ... update discard_flag where discard_flag=1&nbsp;
<p>To remove from datahub but leave in persistent storage:&nbsp;
<br>update discard_flag to 1&nbsp;
<br>delete</td>
</tr>

<tr>
<td>datahub</td>

<td>PCK*</td>

<td>varchar(80)</td>

<td>In a distributed system with multiple datahubs feeding a single persistent
storage system, this field is needed in case of the unlikely event of multiple
entries at the same instant at different datahubs.&nbsp; The field is given
the value of datahub's command mailbox, <i>mailbox@group</i>.&nbsp; The
message group alias feature is used as necessary to keep specific computer
hostnames out of the message group name.&nbsp; The field is made part of
the primary composite key in the persistent storage system, but it is not
part of the primary composite key in the datahub.&nbsp;
<p>If a value for this field is not supplied when a new record is inserted,
and a persistent storage system is in use, and the discard flag is 0, the
analysis logic updates the record to have an appropriate value.&nbsp;</td>
</tr>
</table>

<p><a NAME="dc_dmh_lostclient"></a><b>dc_dmh_lostclient Table -&nbsp;&nbsp;
Lost Client Notification</b>
<p>When a client process disconnects from the DMH message system, if the
application has defined an <a href="../mann/mh_app_lost.html">mh_app_lostclient</a>
procedure, the procedure is called to notify the application. The DCC application
uses these notifications to help manage the dc_user_session table data,
and to trigger the cleanup of table subscriptions.&nbsp; So that other
application logic can also use these notifications, the notification events
are inserted into this table to enable sharing by table subscriptions.&nbsp;
The rows are automatically deleted after a timed period.
<table BORDER WIDTH="100%" id="dc_dmh_lostclient Schema" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>dmh_clientID</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>This field holds the identification of the client connection which
is assigned by the DMH server when the connection is established.&nbsp;</td>
</tr>

<tr>
<td>ts_lost</td>

<td>PCK</td>

<td>varchar(26)</td>

<td>The timestamp of the lost client notification as returned by the "localtime
16" command. We are consistently using UTC timezone values.</td>
</tr>

<tr>
<td>superceded</td>

<td>&nbsp;</td>

<td>int</td>

<td>The value of the superceded parameter passed from the mh_app_lostclient
call.</td>
</tr>
</table>

<p><a NAME="dc_item"></a><b>dc_item Table -&nbsp;&nbsp; Configuration of
Data Items</b>
<p>This table is used to hold the configuration records of data collection
items such as SPC variables, or data collection groups.&nbsp; The records
hold only fields related to the configuration of the items, and not to
any fields related to the usage of items.&nbsp; Therefore the records in
this table can be used to configure multiple instances of item usage throughout
the enterprise.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>module_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>This field is used to hold the less specific part of the item name.&nbsp;
The value must contain only alphanumeric characters or the underscore.&nbsp;</td>
</tr>

<tr>
<td>item_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>This field is used to hold the more specific part of the item name.&nbsp;
The value must contain only alphanumeric characters or the underscore.&nbsp;</td>
</tr>

<tr>
<td>description</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>The description assists selection by the user.</td>
</tr>

<tr>
<td>units</td>

<td>&nbsp;</td>

<td>varchar(12)</td>

<td>Unit of measure displayed by user interface prompts.</td>
</tr>

<tr>
<td>item_type</td>

<td>&nbsp;</td>

<td>varchar(2)</td>

<td>A&nbsp; code indicating the type of data item, such as XM for an Individual
X and Moving Range item.</td>
</tr>

<tr>
<td>formats</td>

<td>&nbsp;</td>

<td>varchar(20)</td>

<td>A three element list with format command specifications for the prime_num,
second_num, and text_value of the data item.&nbsp; The format used for
the prime_num is also used for specification limits, control limits, and
plot axis labels.&nbsp; The usual default is "%g&nbsp; %g&nbsp; %s".&nbsp;
See the format command for details on controlling decimal places, etc.</td>
</tr>

<tr>
<td>group_input_only</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Setting this flag prevents data collection for the individual data
item by itself.&nbsp; The data item can always be used as configured in
data collection groups.</td>
</tr>

<tr>
<td>subgroup_ct</td>

<td>&nbsp;</td>

<td>integer</td>

<td>The sample size; the count of individual values that contribute to
a complete sample reading.&nbsp; For an SPC item type with a variable sample
size, this value is the minimum sample size or the minimum interval duration
that can be input using the standard user interface..</td>
</tr>

<tr>
<td>group_ct</td>

<td>&nbsp;</td>

<td>integer</td>

<td>The maximum count of subgroups that (1) are kept in the in-memory datahub
table, (2) are used for SPC group statistic calculations, and (3) can be
seen in a report or control chart based on the datahub data.&nbsp; The
in-memory&nbsp; limit does not apply to data that is collected in the context
of the Process Flow Component.&nbsp; The latter is kept in-memory until
the tracked entity is removed.</td>
</tr>

<tr>
<td>spc_is_enabled</td>

<td>&nbsp;</td>

<td>integer</td>

<td>SPC&nbsp; analysis can be configured on or off.&nbsp;</td>
</tr>

<tr>
<td>&nbsp;input_type</td>

<td>&nbsp;</td>

<td>integer</td>

<td>This field is used for item types having an XBAR prime value where
there is leeway in how the data is input to the system.&nbsp; 0 means all
subgroup values are entered in event, 1 means individual values are entered
with the system performing subgroup rollup, 2 means subgroup statistics
are entered directly</td>
</tr>

<tr>
<td>discard_flag</td>

<td>&nbsp;</td>

<td>integer</td>

<td>This field is not being used by the current version of the Hume written
GUI.&nbsp; It is intended for use by a custom GUI or a future Hume version.
The field value is configured to control whether the persistent storage
interface saves collected data of this item.&nbsp; The field value is copied
to the dc_data record for data entered through the standard user interface.&nbsp;
0 == save, 1 == discard.</td>
</tr>

<tr>
<td>save_options</td>

<td>&nbsp;</td>

<td>integer</td>

<td>This field is not being used by the current version of the Hume written
GUI.&nbsp; It is intended for use by a custom GUI or a future Hume version.
The configured value is intended to control additional saving of <i>item_id</i>
values during data collection through the standard user interface.&nbsp;
(used as bitfield:&nbsp; 0x01 = also save as lot attribute, 0x02 also save
as equipment attribute, 0x04 also save as user interface attribute, 0x08
also save as a datahub instance attribute).&nbsp; The item_id portion of
the name is used as the name of the attribute - the <i>module_id</i> portion
of the name is ignored.</td>
</tr>

<tr>
<td>high_screen</td>

<td>&nbsp;</td>

<td>float</td>

<td>An upper screening limit used to guard against entry error.</td>
</tr>

<tr>
<td>has_high_screen</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Since the datahub does not support the notion of null data, this boolean
flag indicates whether the corresponding value is set and in use.</td>
</tr>

<tr>
<td>high_spec</td>

<td>&nbsp;</td>

<td>float</td>

<td>An optional high specification value used for Cp and Cpk calculations,
and as input to plot scaling.</td>
</tr>

<tr>
<td>has_high_spec</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Since the datahub does not support the notion of null data, this boolean
flag indicates whether the corresponding value is set and in use.</td>
</tr>

<tr>
<td>low_spec</td>

<td>&nbsp;</td>

<td>float</td>

<td>An optional low specification value used for Cp and Cpk calculations,
and as input to plot scaling.</td>
</tr>

<tr>
<td>has_low_spec</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Since the datahub does not support the notion of null data, this boolean
flag indicates whether the corresponding value is set and in use.</td>
</tr>

<tr>
<td>low_screen</td>

<td>&nbsp;</td>

<td>float</td>

<td>A lower screening limit used to guard against entry error.</td>
</tr>

<tr>
<td>has_low_screen</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Since the datahub does not support the notion of null data, this boolean
flag indicates whether the corresponding value is set and in use.</td>
</tr>

<tr>
<td>prime_runrules</td>

<td>&nbsp;</td>

<td>varchar(200)</td>

<td>Use of this field depends on the item type.&nbsp; A list of run rule
names for SPC variables.&nbsp; A regular expression for text pattern matching
for text entry variables.&nbsp; Tcl code to evaluate in the server process
to provide a selection list for dynamically computed list selections.&nbsp;
For item_type "G", the field is used for data entry screen options.</td>
</tr>

<tr>
<td>second_runrules</td>

<td>&nbsp;</td>

<td>varchar(120)</td>

<td>A list of run rule names for the second statistic for certain SPC variables
such as XBAR,S.</td>
</tr>

<tr>
<td>limit_prime_high</td>

<td>&nbsp;</td>

<td>float</td>

<td>upper 3 sigma limit for the specific subgroup size</td>
</tr>

<tr>
<td>limit_prime_low</td>

<td>&nbsp;</td>

<td>float</td>

<td>lower 3 sigma limit for the specific subgroup size</td>
</tr>

<tr>
<td>limit_second_high</td>

<td>&nbsp;</td>

<td>float</td>

<td>The upper 3 sigma limit for the range or stddev chart for the subgroup
size, also d value for cusum.&nbsp; For EWMA charts the second limits are
for infinitely many points, and the analysis adjusts for the actual number
of points.</td>
</tr>

<tr>
<td>limit_second_baseline</td>

<td>&nbsp;</td>

<td>float</td>

<td>Baseline of the range or stddev chart for the subgroup size,&nbsp;
also target value for EWMA or cusum.&nbsp; This value is not always the
mean of the upper and lower limits because of the asymmetry caused by 0.</td>
</tr>

<tr>
<td>limit_second_low</td>

<td>&nbsp;</td>

<td>float</td>

<td>Lower 3 sigma limit for the range or stddev chart, also the cusum theta
angle in degrees.&nbsp;</td>
</tr>

<tr>
<td>ewma_weight</td>

<td>&nbsp;</td>

<td>float</td>

<td>EWMA weighting factor, also known as lambda.</td>
</tr>

<tr>
<td>alarm_recipient_id</td>

<td>&nbsp;</td>

<td>int</td>

<td>Optionally, a non-zero <i>address_id</i> value from a <a href="#dc_recipient">dc_recipient</a>
table row specifying a recipient or recipient list for SPC alarm notifications.</td>
</tr>

<tr>
<td>#</td>

<td>&nbsp;</td>

<td>int</td>

<td>Maximum number of dc_data entries - provides guidance for&nbsp; maintenance
of the persistent database.&nbsp;&nbsp; 0 means no limit.</td>
</tr>

<tr>
<td>#</td>

<td>&nbsp;</td>

<td>int</td>

<td>Maximum age of dc_data entries in days - provides guidance for maintenance
of the persistent database.&nbsp; 0 means no maximum.</td>
</tr>
</table>

<br>&nbsp;
<p><a NAME="dc_item_use"></a><b>dc_item_use&nbsp; Table - Usage Records
for Data Collection Items</b>
<p>This table is used to hold fields related to the usage of data items.&nbsp;
An application can subscribe to the alarm related fields of this table
in order to receive notification of SPC alarms.&nbsp; Fields marked (private)
are for internal use and are subject to change.&nbsp; Also, their values
may not be saved to the persistent storage system.
<p>The <i>datahub </i>field is not part of the primary composite key for
the table in the datahub, but it is part of the primary composite key in
the persistent storage system.
<p>When new data items are created, new rows are inserted into the <b>dc_item</b>
table.&nbsp; The application software does not need to create a corresponding
row in this table.&nbsp; The system software will recognize that a usage
record does not exist when the item is first used by the insert of a dc_data
record, and a row will be created.
<br>&nbsp;
<br>&nbsp;
<table BORDER WIDTH="99%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>module_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The less specific part of the item name, see dc_data description.</td>
</tr>

<tr>
<td>item_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The more specific part of the item name, see dc_data description.</td>
</tr>

<tr>
<td>datahub</td>

<td>PCK*</td>

<td>varchar(80)</td>

<td>Used to support multiple server instances sharing tables.</td>
</tr>

<tr>
<td>ts_groupstart</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>A timestamp value that is older than the data records that are in the
datahub.&nbsp; The ts_groupstart is updated by the removal logic to keep
the amount of data&nbsp; in the datahub to its configured size.
<p>We are storing the timestamp as UTC values so that there is no issue
with usage across timezones or problems with Daylight Saving Time.&nbsp;
To convert into the local timezone, use the Tcl command "mktime $ts 15".</td>
</tr>

<tr>
<td>spc_alarm</td>

<td>&nbsp;</td>

<td>integer</td>

<td>The field is treated as a bit string to represent the latest unacknowledged
alarm.&nbsp; The 0x01 bit indicates an alarm on the primary variable; and
the 0x02 bit indicates an alarm on the secondary variable.&nbsp; For example,
the value 3 indicates alarms on both the primary and secondary variables.&nbsp;
<p>Updated by newer alarms, cleared by alarm acknowledgment actions.</td>
</tr>

<tr>
<td>ts_alarm</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>If non-blank, the timestamp of the latest data entry which has an SPC
alarm.&nbsp; Updated by newer alarms, cleared by alarm acknowledgment actions.
<p>We are storing the timestamp as UTC values so that there is no issue
with usage across timezones or problems with Daylight Saving Time.&nbsp;
To convert into the local timezone, use the Tcl command "mktime $ts 15".</td>
</tr>

<tr>
<td>alarm_user_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>If non-blank the user_id of the latest record with an SPC alarm.&nbsp;
Updated by newer alarms, cleared by alarm acknowledgment actions.</td>
</tr>

<tr>
<td>alarm_text</td>

<td>&nbsp;</td>

<td>varchar(256)</td>

<td>If non-blank the description of the latest SPC alarm.&nbsp; Updated
by newer alarms, cleared by alarm acknowledgment actions.</td>
</tr>

<tr>
<td>input_is_inhibited</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Set true on a variable that has an SPC alarm at the time the alarm
is detected if consistent with the business rule configuration.&nbsp; Subsequent
input of the variable is blocked until the alarm is signed off.&nbsp; Data
collection in groups where the variable is a mandatory input is also blocked.&nbsp;
This field is not maintained for group data items - its easier to query
the included variables in a group at the time of data collection to decide
if input is allowed.</td>
</tr>

<tr>
<td>partial_data_list</td>

<td>&nbsp;</td>

<td>varchar(2000)</td>

<td>Used to manage rolling up individual raw data entries into complete
sample groups.&nbsp; A new dc_data record is created after enough inputs
have been accumulated.&nbsp; Each list item contains the ts and prime_value
of a raw input. (private)</td>
</tr>
</table>

<br>&nbsp;
<p><a NAME="dc_item_type"></a><b>dc_item_type Table -&nbsp;&nbsp; Data
Item Types</b>
<p>To support input prompting, online help, and reporting, the following
table
is defined and populated with information on the various item types implemented
by the Data Collection and SPC Component.
<br>&nbsp;
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>item_type</b>
<br>varchar(2)</td>

<td><b>description</b>
<br>varchar(80)</td>

<td><b>prime_num</b>
<br>varchar(30)</td>

<td><b>second_num</b>
<br>varchar(30)</td>

<td><b>text_value</b>
<br>varchar(30)</td>

<td><b>notes</b>
<br>varchar(400)</td>
</tr>

<tr>
<td>XM</td>

<td>Individual X and Moving Range</td>

<td>X</td>

<td>range</td>

<td>NA</td>

<td>This type is used for single numeric entries that are optionally analyzed
using SPC.&nbsp; For new data, -1 is entered for the second_num and if
SPC is enabled, the system logic updates the value to the computed moving
range.&nbsp;&nbsp; Use type NI for single numeric items that are not subject
to SPC.</td>
</tr>

<tr>
<td>XS</td>

<td>XBAR,S</td>

<td>XBAR</td>

<td>S</td>

<td>x1 x2 ... xN</td>

<td>Preferred over XBAR,R because the standard deviation is a superior
characterization of the variation.&nbsp;</td>
</tr>

<tr>
<td>XR</td>

<td>XBAR,R</td>

<td>XBAR</td>

<td>range</td>

<td>x1 x2 ... xN</td>

<td>The classical mean and range SPC type.&nbsp; The most popular Shewhart
chart because its easy to do manually.&nbsp;</td>
</tr>

<tr>
<td>XC</td>

<td>XBAR and cusum</td>

<td>XBAR</td>

<td>cusum</td>

<td>x1 x2 ... xN</td>

<td>The cusum statistic is preferred by many SPC professionals to XBAR,S
but it is not familiar to the lay person.</td>
</tr>

<tr>
<td>XE</td>

<td>XBAR and Exponentially Weighted Moving Range</td>

<td>XBAR</td>

<td>EWMA</td>

<td>x1 x2 ... xN</td>

<td>This type can also be used for individual X values.&nbsp; For new data,
-1 is entered for the second_value and if SPC is enabled, the system logic
updates the value to the computed EWMA.</td>
</tr>

<tr>
<td>C</td>

<td>c chart - the number of defects in a fixed sized sample</td>

<td>count</td>

<td>sample size</td>

<td>NA</td>

<td></td>
</tr>

<tr>
<td>NP</td>

<td>np chart - the number of defective units in a fixed size sample of
units.</td>

<td>count&nbsp;</td>

<td>sample size</td>

<td>NA</td>

<td></td>
</tr>

<tr>
<td>P</td>

<td>p chart - the proportion of defective units for a variable size sample</td>

<td>proportion</td>

<td>sample size</td>

<td>defective_units sample_size</td>

<td></td>
</tr>

<tr>
<td>U</td>

<td>u chart - the number of defects in a variable size sample</td>

<td>defects/unit</td>

<td>sample_size</td>

<td>defects_count sample_size</td>

<td></td>
</tr>

<tr>
<td>LI</td>

<td>List item - a single item selected from a predefined list</td>

<td>NA</td>

<td>NA</td>

<td>selected_text</td>

<td></td>
</tr>

<tr>
<td>DI</td>

<td>Dynamic list item - a single item selected from a dynamically computed
list</td>

<td>NA</td>

<td>NA</td>

<td>selected_text</td>

<td>This type includes selections from system provided lists such as users,
equipment, and active lots.</td>
</tr>

<tr>
<td>TI</td>

<td>A single text entry</td>

<td>NA</td>

<td>NA</td>

<td>entered_text</td>

<td>The entered text can be subjected to screening by regular expression
pattern matching.</td>
</tr>

<tr>
<td>LL</td>

<td>One or more items selected from a predefined list</td>

<td>NA</td>

<td>NA</td>

<td>selected_text</td>

<td>Each selection becomes an additional dc_data record.</td>
</tr>

<tr>
<td>DL</td>

<td>One or more items selected from a dynamically computed list</td>

<td>NA</td>

<td>NA</td>

<td>selected_text</td>

<td>Each selection becomes an additional dc_data record.</td>
</tr>

<tr>
<td>TL</td>

<td>One or more text entry items.</td>

<td>NA</td>

<td>NA</td>

<td>entered_text</td>

<td>Each entry becomes an additional dc_data record.</td>
</tr>

<tr>
<td>PI</td>

<td>Pareto item - an entered quantity and a selection from a predefined
list</td>

<td>quantity</td>

<td>NA</td>

<td>selected_text</td>

<td></td>
</tr>

<tr>
<td>PL</td>

<td>Pareto List - one or more pareto items</td>

<td>quantity</td>

<td>NA</td>

<td>selected_text</td>

<td>This type is the most common means of capturing yield and yield loss
data.&nbsp; Each entry becomes an additional dc_data record.</td>
</tr>

<tr>
<td>G</td>

<td>Specifies a Group of data items</td>

<td>NA</td>

<td>NA</td>

<td>NA</td>

<td>An empty dc_data record is created when data collection for the group
occurs using the Data Collection and SPC Component.</td>
</tr>

<tr>
<td>IC</td>

<td>Interval c - the number of events in a fixed duration interval</td>

<td>count</td>

<td>hours_duration</td>

<td>ts_stop</td>

<td>On these interval data items, the time units are not consistent between
types in order to have statistics that are intuitive in scale.&nbsp; The
IC statistic is used to monitor alarm occurrences and similar events.</td>
</tr>

<tr>
<td>IN</td>

<td>Interval np - the number of seconds spent in a state for a fixed duration
interval</td>

<td>seconds</td>

<td>secs_duration</td>

<td>ts_stop</td>

<td></td>
</tr>

<tr>
<td>IP</td>

<td>Interval p - the proportion of time in a state for a variable length
interval</td>

<td>proportion</td>

<td>hours_duration</td>

<td>ts_stop</td>

<td>This statistic can be used to monitor utilization, downtime, or assist
time in relation to usage time or available time for equipment.</td>
</tr>

<tr>
<td>IU</td>

<td>Interval u - the number of events in a variable length interval</td>

<td>events_per_hour</td>

<td>hours_duration</td>

<td>ts_stop count</td>

<td>This statistic is used to monitor throughput, alarm occurrences and
similar events.</td>
</tr>

<tr>
<td>NI</td>

<td>Numeric Item - a simple numeric input without SPC</td>

<td>X</td>

<td>NA</td>

<td>NA</td>

<td>This type is suitable for any type of numeric input, floating point
or integer, such as a quantity.</td>
</tr>

<tr>
<td>LB</td>

<td>Label - displayed text that optionally is created from dynamic content</td>

<td>NA</td>

<td>NA</td>

<td>NA</td>

<td>This type and the next type are defined for use in data collection
dialogs, but there is no data collected for these types.&nbsp;</td>
</tr>

<tr>
<td>HC</td>

<td>Hidden Calculation - Custom Tcl code that is executed during data collection</td>

<td>NA</td>

<td>NA</td>

<td>NA</td>

<td></td>
</tr>
</table>

<p><a NAME="dc_runrules"></a><b>dc_runrules Table -&nbsp;&nbsp; Data Collection
SPC Analysis Run Rules</b>
<p>To support input prompting, online help, and reporting, the following
table is defined and populated with information on the SPC run rules implemented
by the Data Collection and SPC Component.
<p>Run rules are listed in severity order.&nbsp; Only the most severe run
rule violated is reported for a given input point.
<br>&nbsp;
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>name</b>
<br>varchar(10) PK</td>

<td><b>description</b>
<br>varchar(80)</td>
</tr>

<tr>
<td>3sigma</td>

<td>Western Electric #1 - one point outside of +/- 3 sigma.</td>
</tr>

<tr>
<td>3sigmaH</td>

<td>One point higher than + 3 sigma</td>
</tr>

<tr>
<td>3sigmaL</td>

<td>One point lower than -3 sigma</td>
</tr>

<tr>
<td>2sigma</td>

<td>Western Electric #2 - 2 of 3 points above +2 sigma or below -2 sigma</td>
</tr>

<tr>
<td>2sigmaH</td>

<td>2 out of 3 points higher than +2 sigma</td>
</tr>

<tr>
<td>2sigmaL</td>

<td>2 out of 3 points lower than -2 sigma</td>
</tr>

<tr>
<td>1sigma</td>

<td>Western Electric #3 - 4 of 5 points above + 1 sigma or below -1 sigma</td>
</tr>

<tr>
<td>1sigmaH</td>

<td>4 of&nbsp; 5 points higher than +1 sigma</td>
</tr>

<tr>
<td>1sigmaL</td>

<td>4 of 5 points lower than -1 sigma</td>
</tr>

<tr>
<td>Biased</td>

<td>Western Electric #4 - 8 successive points above CL or below CL</td>
</tr>

<tr>
<td>BiasedH</td>

<td>8 successive points above CL</td>
</tr>

<tr>
<td>BiasedL</td>

<td>8 successive points below CL</td>
</tr>

<tr>
<td>Vmask</td>

<td>Cusum statistic V-mask</td>
</tr>

<tr>
<td>Trend</td>

<td>7 successive points all increasing or all decreasing</td>
</tr>

<tr>
<td>TrendH</td>

<td>7 successive points all increasing</td>
</tr>

<tr>
<td>TrendL</td>

<td>7 successive points all decreasing</td>
</tr>
</table>

<br>&nbsp;
<p><a NAME="dc_custom"></a><b>dc_custom Table -&nbsp;&nbsp; Storage for
User Defined Items and Configuration Values</b>
<p>This table provides a handy place to store data values for sharing in
a distributed application.&nbsp; If a persistent storage system is in use,
all table data is saved and restored at application startup.
<p>The table is available for use by user defined custom logic.&nbsp; Other
application components such as the Process Flow Component make use of this
table as well.&nbsp; Values that are configured for other components are
documented with the specific component.
<p>When a data collection item is saved as a datahub instance attribute,
its entered value is written to this table using the <i>mailbox@groupname</i>
of the datahub (truncated to the field length) as the <i>module_id</i>
and the data item <i>item_id</i> as the <i>name</i>.
<p>In a distributed system with multiple datahubs and a single persistent
store, it is assumed that all rows of this table are loaded at initialization
by all of the datahubs.&nbsp; Application use of the table and naming conventions
should insure that conflicting changes to the same rows at different datahubs
do not occur.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>domain</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The domain or module of application for the configured entry.</td>
</tr>

<tr>
<td>name</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>A specific name for the configured entry.&nbsp;</td>
</tr>

<tr>
<td>value</td>

<td>&nbsp;</td>

<td>varchar(2000)</td>

<td>Application data formatted as text.</td>
</tr>
</table>

<p>There are certain values that are used by the Data Collection and SPC
Component software that are defined during site configuration.&nbsp; These
values include:
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>domain</b></td>

<td><b>name</b></td>

<td><b>value</b></td>

<td><b>description</b></td>
</tr>

<tr>
<td>DCC</td>

<td>DataEntryRepeat</td>

<td>1</td>

<td>A boolean - if true, Data Entry dialogs refresh for another use instead
of closing after the user has completed data entry.</td>
</tr>

<tr>
<td>DCC</td>

<td>LostClientCleanupAllTables</td>

<td>1</td>

<td>A boolean - if true, subscription and mailbox cleanup triggered by
the DMH LostClient notification&nbsp; is applied to all tables, and not
just DCC tables.&nbsp; The logic finds and closes subscription names that
have the DMH clientID string isolated by underscore characters on both
sides.&nbsp; The logic also flushes and closes DMH mailboxes that were
used as the destination mailboxes of the closed subscriptions.</td>
</tr>

<tr>
<td>DCC</td>

<td>MB_DB_SUBFEED_max</td>

<td>50</td>

<td>When using a persistent database, the DCC periodically checks the number
of messages queued for the persistent database to detect a problem.&nbsp;
This integer value is the threshold number of queued messages which indicates
a problem passing data to the persistent database.</td>
</tr>

<tr>
<td>DCC</td>

<td>MailboxPollSeconds</td>

<td>1800</td>

<td>When using a persistent database, an integer value for the polling
interval in seconds used to monitor the persistent database feed.&nbsp;
The minimum value allowed is 1000.</td>
</tr>

<tr>
<td>DCC</td>

<td><a NAME="MaxLoginPerUser"></a>MaxLoginPerUser</td>

<td>0</td>

<td>An integer value for the maximum number of login sessions per user,
0 means no limit.</td>
</tr>

<tr>
<td>DCC</td>

<td><a NAME="MaxUsersPerDisplay"></a>MaxUsersPerDisplay</td>

<td>1</td>

<td>An integer value for the maximum number of user sessions expected per
display, 0 means no limit.</td>
</tr>

<tr>
<td>DCC</td>

<td><a NAME="MinPasswordLength"></a>MinPasswordLength</td>

<td>4</td>

<td>An integer value for the minimum characters allowed for the length
of a password.</td>
</tr>

<tr>
<td>DCC</td>

<td><a NAME="PasswordExpirationDays"></a>PasswordExpirationDays</td>

<td>0</td>

<td>If greater than zero, logins are rejected if the password has not been
changed within this many days.&nbsp; If your application is using password
expirations, and the user interface does not allow the user to change his
password without login, a user with an expired password will not be able
to access the system.&nbsp;</td>
</tr>

<tr>
<td>DCC</td>

<td>distribution_list</td>

<td>{}</td>

<td>A list of Data Collection Component server addresses used for the distribution
of configuration data.</td>
</tr>

<tr>
<td>DCC</td>

<td>email_sender</td>

<td>{}</td>

<td>A value used in the From: e-mail address for e-mail sent by the DCC
system.&nbsp; If the value is blank, the e-mail is sent without an originator.&nbsp;
This may cause the e-mail to be rejected by SMTP servers that&nbsp; filter
spam.</td>
</tr>

<tr>
<td>DCC</td>

<td>email_SMTP_servers</td>

<td>smtp mail</td>

<td>One or more SMTP server hostnames to support sending e-mail SPC alarm
notifications.&nbsp; Usually includes the domain name as in smtp.sematech.org.</td>
</tr>

<tr>
<td>DCC</td>

<td>email_template_<b>pager</b></td>

<td>&nbsp;</td>

<td>A template for the format of e-mail notifications.&nbsp; The <b>pager</b>
format is intended to be a short format for SPC alarm notifications sent
to pager devices.&nbsp; The value is a list of two elements; templates
for the e-mail Subject and the Body of the message.</td>
</tr>

<tr>
<td>DCC</td>

<td>email_template_<b>report</b></td>

<td>&nbsp;</td>

<td>A template for the format of e-mail notifications.&nbsp; The <b>report</b>
format is intended to be a longer format for SPC alarm notifications sent
to people as ordinary e-mail.&nbsp; The value is a list of two elements;
templates for the e-mail Subject and the Body of the message.&nbsp;
<p>Note: a site can use additional e-mail message formats by installing
additional rows in this table where the <i>name</i> value is of the form
email_template_<b><i>message_format</i></b> and the <i>domain</i> value
is <b>DCC</b>.</td>
</tr>

<tr>
<td>DCC</td>

<td>ERROR_LOG</td>

<td>{}</td>

<td>If background Tcl runtime errors occur either in the DCC server, a
persistent database interface, or a Tcl GUI processes, the error information
is trapped, forwarded to the DCC server, and appended to a common log file.&nbsp;
This table entry can hold a custom pathname for the error log file.&nbsp;
The default value is the filename <b>error.log</b> in the DCC server Tcl
library directory.&nbsp; The System Administrator should periodically see
if this file exists and if so, examine the unexpected errors that have
occurred.&nbsp;</td>
</tr>

<tr>
<td>DCC</td>

<td>modem_device</td>

<td>{}</td>

<td>This optionally configured value supports SPC alarm notification using
phone calls.&nbsp; The value is a device name such as COM3 or /dev/tty01
where there is a modem that uses AT dialing commands.</td>
</tr>

<tr>
<td>DCC</td>

<td>print_template_unix</td>

<td>exec lpr {$pathname}</td>

<td>A template for printing postscript files when running on UNIX systems.</td>
</tr>

<tr>
<td>DCC</td>

<td>print_template_windows</td>

<td>{}</td>

<td>A template for printing files on Windows systems, such as 'exec print
{/d:\\server\share} {$pathname}'</td>
</tr>

<tr>
<td>SPC</td>

<td>alarm_inhibits_entry</td>

<td>1</td>

<td>Set to 0 to override the default behavior of inhibiting manual data
entry for a variable that has an unacknowledged SPC alarm.</td>
</tr>

<tr>
<td>SPC</td>

<td>show_item_save_cmd</td>

<td>1</td>

<td>A boolean - if true, the command used to create or update an item configuration
is displayed on the console and to TRACE as an aid to development.</td>
</tr>
</table>

<p><a NAME="dc_group_config"></a><b>dc_group_config Table -&nbsp;&nbsp;
Data Collection Group Configuration</b>
<p>Data collection items can be assigned to any number of groups.&nbsp;
The group definitions are used for data collection operations, and subsequently
for reporting and plotting.&nbsp; A group is a set of data items as configured
individually in table <b>dc_item </b>plus other items such labels and calculation
formulas that control dialog appearance and customize the logic of the
data collection actions.&nbsp; The framework logic that manages the dialog-user
interaction incorporates the execution of user-defined custom code during
dialog creation, data entry, data validation, and data acceptance.&nbsp;
It is possible to do sophisticated actions such as coordinated communication
with equipment, or user interaction with custom child dialog windows using
the data collection component as the organizing framework.&nbsp; The custom
logic has read/write access to the data that the user enters or sees on
the dialog window.
<p>Calculation code can use the <b>dcData( )</b> global array variable
for read/write access to current entry data, and read access to historic
collected data.
<blockquote><b>dcData(<i>module_id</i>,<i>item_id</i>[,<i>instance</i>[,<i>subfield</i>])</b></blockquote>
The subscript is specified as 2 to 4 values separated by commas.&nbsp;
The <b><i>instance</i></b> value defaults to <b>0</b>.&nbsp; The <b><i>instance</i></b>
value <b>0</b> refers to data currently being entered.&nbsp; The <b><i>instance</i></b>
value <b>-1</b> is used to specify data that was entered previously, the
value <b>-2</b> is used to specify data that was entered the time before
the previous entry, etc.&nbsp; The <b><i>subfield</i></b> value defaults
to <b>0</b>.&nbsp; During data entry, the <b><i>subfield</i></b> value
is used as an index, starting from <b>0</b>, to specify an entry field
by its relative position among the entry fields for an item.&nbsp; So a
value such as $dcData(EdsCar,Odometer) can refer to an Odometer reading
currently being entered.&nbsp; For historic data, the <b><i>subfield</i></b>
value is specified as <b>P</b>, <b>S</b>, or <b>T</b> to specify the prime_num,
second_num, or text_value of a dc_data table row.&nbsp; So a value such
as $dcData(EdsCar,Odometer,-1,P) can refer to the Odometer reading that
was entered last time.&nbsp; For historic data, the default subfield value
specifies the prime_num dc_data table row value, so the previous example
can be shortened to $dcData(EdsCar,Odometer,-1).
<p>Continuing with the Odometer example, you can have a data entry group
where the gas mileage entry is computed using a formula.&nbsp; You would
configure the mileage item to have a calculation such as the one shown
below, which supplies a read-only value for gas mileage that is calculated
when the user presses the Calculate button or presses the Ok button to
complete the data collection action.
<blockquote>expr {($dcData(EdsCar,Odometer) - $dcData(EdsCar,Odometer,-1))/$dcData(EdsCar,GasGallons)}</blockquote>
There is another global array, <b>dcAT( )</b> which is provided for read
access to attributes of the current data collection context including items
such as the logged in user.
<blockquote><b>dcAT(<i>attributeName</i>)</b></blockquote>
In sequence, the logic that supports this array attempts to find values
in (1) the global array that is used to manage the data collection dialog,
(2) the global array dc_ui( ) that has DCC User Interface data, and (3)
the global array env( ) that accesses environment variables.&nbsp; Some
of the interesting <b><i>attributeName</i></b> values available include:
<ul>
<ul>
<li>
calc_context - an integer value specifying the context of the calculation
(see values in table below).</li>

<li>
datahub - the mailbox@group name of the DCC server</li>

<li>
user_id - the user_id of the logged-in user</li>

<li>
user_name - the name of the logged-in user</li>

<li>
w - the window name of the data collection dialog</li>

<li>
wincache - the global array used to manage the data collection dialog</li>
</ul>
</ul>
You can use the <a href="../man1/dmh_inspect.html">inspect</a> application
to examine the global data arrays of the DCC User Interface.
<p>The calculation feature can be used to great advantage for interacting
with equipment and combining data collected from equipment with manually
collected data.&nbsp; You can define your own procedures in your own Tcl
code files and have them executed when the user presses an appropriate
button on a data collection dialog.&nbsp; The procedures can write results
into visible fields that the user can review and comment on.&nbsp; There
is nothing stopping you from creating additional windows, for example to
provide operator instructions or for complex interaction with attached
equipment.&nbsp; The displayed text of the existing buttons and labels
can also be customized in your calculation logic.&nbsp; Think of the Data
Collection Component as an organization framework for integrating the factory
floor.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>group_module_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The module_id of the group.</td>
</tr>

<tr>
<td>group_item_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The item_id of the group.</td>
</tr>

<tr>
<td>sequence</td>

<td>PCK</td>

<td>integer</td>

<td>Members of the group are ordered in drawing and/or calculation sequence
starting from 100 and incrementing by 1.&nbsp; The starting value of 100
results in a properly sorted list whether numeric or text comparison is
used.</td>
</tr>

<tr>
<td>item_type</td>

<td>&nbsp;</td>

<td>varchar(2)</td>

<td>The type of the item that is a member of the group.&nbsp; Types LB
(label) and HC (hidden calculation) represent items that do not have data
input.</td>
</tr>

<tr>
<td>module_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>If the <i>item_type</i> indicates a data input item, the <i>module_id</i>
name.</td>
</tr>

<tr>
<td>item_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>If the <i>item_type</i> indicates a data input item, the <i>item_id
</i>name.</td>
</tr>

<tr>
<td>is_optional</td>

<td>&nbsp;</td>

<td>integer</td>

<td>If the <i>item_type</i> indicates a data input item, this boolean indicates
whether input of the item is optional and may be skipped.</td>
</tr>

<tr>
<td>calc_type</td>

<td>&nbsp;</td>

<td>integer</td>

<td>(0) No calculation.
<br>(1) The calculation supplies a value for the data item that the user
sees but cannot alter.
<br>(2) The calculation supplies a default value for the data item that
the user can overwrite.
<br>(3) The calculation value is a string that optionally imbeds procedure
calls or variable substitutions.&nbsp; This calculation type is used for
labels.</td>
</tr>

<tr>
<td>calc_context</td>

<td>&nbsp;</td>

<td>integer</td>

<td>Organized as a bitfield to describe under what contexts the <i>calculation</i>
is evaluated&nbsp;
<br>0x01 - initial creation of the dialog for a new entry&nbsp;
<br>0x02 - initial creation of the dialog for editing an existing entry&nbsp;
<br>0x04 - refresh of the dialog for another entry&nbsp;
<br>0x08 - A button has been pressed to request the calculation.&nbsp;
<br>0x10 - The user has pressed the Ok button and validation will occur
after this calculation pass.&nbsp; Last chance for calculations to affect
values.&nbsp; This pass may occur more than once if the data fails validation.&nbsp;
<br>0x20 - The data has been validated and is being committed.&nbsp; Calculations
should not change any values.&nbsp;
<br>0x40 - The dialog is being destroyed.</td>
</tr>

<tr>
<td>calculation</td>

<td>&nbsp;</td>

<td>varchar(240)</td>

<td>If applicable, the value of this field is Tcl code that is executed
directly in a global context.&nbsp; It can be one or more statements.&nbsp;
The result of the calculation is usually assigned to a displayed entryfield
or label.&nbsp;</td>
</tr>
</table>

<p><a NAME="dc_list_text"></a><b>dc_list_text Table -&nbsp;&nbsp; Preconfigured
selection list values</b>
<p>This table is used to store the predefined selection lists corresponding
to data collection item_types "LI", "LL", "PI", and "PL".&nbsp; A sequence
field is used to order the list for selection when presented to the user.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>module_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>see dc_data description.</td>
</tr>

<tr>
<td>item_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>see dc_data description.</td>
</tr>

<tr>
<td>text_value</td>

<td>PCK</td>

<td>varchar(80)</td>

<td>The text selected by the user and recorded in dc_data.&nbsp;</td>
</tr>

<tr>
<td>sequence</td>

<td>&nbsp;</td>

<td>integer</td>

<td>The selection list is ordinarily presented to the user sorted in ascending
sequence by this field.</td>
</tr>
</table>

<p><a NAME="dc_recipient"></a><b>dc_recipient Table -&nbsp;&nbsp; E-mail
and Paging Recipient Data</b>
<p>The DCC is able to send e-mail notifications to individual addresses
or to lists of addresses when SPC alarms occur.&nbsp; The format of the
email notifications is configurable; there can be any number of named formats.&nbsp;
This feature accommodates the different needs of numeric pagers, alphanumeric
pagers, and human e-mail recipients.&nbsp; The notification system can
also dial phone numbers using standard, platform independent AT modem commands.&nbsp;
This feature can be customized for interacting with phone system menu commands.&nbsp;
An example script is available for issuing a numeric page to a Sprint PCS
cellular phone.
<p>This table holds notification recipient data.&nbsp; A table record can
represent either a recipient or a list of recipients.&nbsp; In the case
of a list, the <i>addr_type</i> field value is <b>list</b>, and the <i>addr_data</i>
value is a list of <i>address_id</i> key values for the members of the
list.&nbsp; The DCC GUI and logic do not support lists containing lists;
each member of a list is expected to be a recipient.
<p>To support email and paging, additional entries are configured in the
dc_custom table.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>datahub</td>

<td>*PCK</td>

<td>varchar(80)</td>

<td>Used as a primary key in the persistent database, but not for the in-memory
tables.&nbsp; You may have a persistent database which is shared among
DCC instances.</td>
</tr>

<tr>
<td>address_name</td>

<td>PCK</td>

<td>varchar(64)</td>

<td>A user defined description for the record - usually a person's name,
or a name given to a recipient list.&nbsp; A GUI will typically display
the other record values along with the description so the person does not
need to indicate address type data in the name.&nbsp; This field is made
part of the table primary key so the records are sorted by name, but the
<i>address_id</i>
value by itself is useable as a unique identifier for the record.</td>
</tr>

<tr>
<td>address_id</td>

<td>PCK</td>

<td>int</td>

<td>A unique integer key value that is system generated when a record is
created.&nbsp;</td>
</tr>

<tr>
<td>sending_is_disabled</td>

<td>&nbsp;</td>

<td>int</td>

<td>Used as a boolean to disable use of the record.&nbsp; You are able
to disable and enable sending e-mail or dialup notifications to a recipient
or recipient list without having to delete and recreate configuration records.&nbsp;
The Hume Scheduling Component can be used to update the table according
to changing work shifts.</td>
</tr>

<tr>
<td>address_type</td>

<td>&nbsp;</td>

<td>varchar(20)</td>

<td>Indicates the type of recipient table record.&nbsp; Current supported
values are <b>list</b>, <b>email</b>, and <b>modem</b>.</td>
</tr>

<tr>
<td>message_format</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>The use of this field depends on the <i>address_type</i> value.&nbsp;
For <b>email</b> records, the value in this field is used to look up a
template in the <a href="#dc_custom">dc_custom</a> table for the format
of the e-mail message.&nbsp; For example, if the <i>message_format</i>
value is <b>pager</b>, the DCC logic looks in the <b>dc_custom</b> table
for a template value entry where domain='DCC' and name='email_template_<b>pager</b>'.</td>
</tr>

<tr>
<td>address_data</td>

<td>&nbsp;</td>

<td>varchar(2000)</td>

<td>For a record of <i>address_type</i> <b>email</b>, a valid email address
such as <b>jsmith@company.com</b>.
<p>You can also use standard RFC formatting and include a "friendly name"
with the actual address delimited with angle brackets, as in the example:
<br><b>Stepper 12 Engineer &lt;jsmith@company.com></b>.
<p>For email addresses, at the time of sending e-mail, if the address_data
value does not contain angle brackets, the DCC logic uses a longer address
format that is formed using the <i>address_name</i> value as the "friendly
name" and the <i>address_data</i> value as the data placed within angle
brackets - "<i>address_name</i>" &lt;<i>address_data</i>>.&nbsp; This feature
makes it easier for human readers to understand the recipient list of an
e-mail message.
<p>For a record of <i>address_type</i> <b>list</b>, this field value is
a list of one or more <i>address_id</i> values.</td>
</tr>
</table>

<br>&nbsp;
<p><a NAME="dc_secs_event"></a><b>dc_secs_event Table -&nbsp;&nbsp; For
SECS Trace Report and Event Report Data Collection</b>
<p>This table is used to list the Event Reports which SECS host interfaces
in the local DMH message group have configured, and are possible sources
of input data to the DCC.&nbsp; The table also holds status information
related to the receiving and processing of the Event Reports and Trace
Reports.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>datahub</td>

<td>*PCK</td>

<td>varchar(80)</td>

<td>Used as a primary key in the persistent database, but not for the in-memory
tables.&nbsp; You may have a persistent database which is shared among
DCC instances.</td>
</tr>

<tr>
<td>spname</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The name of the SECS host interface connection.&nbsp; The connection
is assumed to be using the Hume GEM Host application software.&nbsp; Connections
are discovered in the DMH message group.</td>
</tr>

<tr>
<td>CEID</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The SECS Event Report Collection Event ID.&nbsp; For Event Report types
that are discovered from the SECS Host instances, this is the "VFEI" Event_ID
seen in the GEM Host user interface list of configured reports.
<p>For Trace Reports that managed by the DCC, the CEID values are patterned
as "TRACE_REPORT.$n" where $n is an integer value used as the "trace_number"
identifier.</td>
</tr>

<tr>
<td>description</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>A description for the event.&nbsp; SECS equipment that uses the Hume
software usually provide descriptions of events as a Status Variable value,
EventDescriptions.&nbsp; The Hume Host software is able to automatically
recognize and use the descriptions.&nbsp; The DCC is able to collect event
descriptions that are automatically acquired by the Host interfaces, or
that are manually entered.</td>
</tr>

<tr>
<td>is_collected</td>

<td>&nbsp;</td>

<td>int</td>

<td>Used as a boolean to indicate which Event Reports the user would like
the DCC to receive and collect data from.&nbsp; Set to 0 for DCC managed
Trace Reports because they use different collection logic than the Event
Reports.</td>
</tr>

<tr>
<td>EI_configured</td>

<td>&nbsp;</td>

<td>varchar(1)</td>

<td>Used as a boolean with values 1 or 0, or an empty string when the value
is not known or not relevant.&nbsp; This field is set to 1 for Event Reports
that the DCC determines are configured at the SECS host interface.&nbsp;
This field is set to 0 if the DCC determines that the configuration of
the report no longer exists.
<p>This value, and similar values in this table are updated by the <a href="#dc_secs_discovery">dc_secs_discovery</a>
logic which is called when initiated from the UI.
<br>The value is not used for DCC managed Trace Reports.</td>
</tr>

<tr>
<td>EI_enabled</td>

<td>&nbsp;</td>

<td>varchar(1)</td>

<td>Used as a boolean with values 1 or 0, or an empty string when the value
is not known or not relevant.&nbsp; This field is set to 1 for Event Reports
that the DCC determines are defined and setup with the SECS equipment.&nbsp;
This field is set to 0 if the DCC determines that the report is not presently
setup with the equipment.&nbsp; Typically, the value reflects whether the
SECS Host has made it through the initialization logic and has successfully
enabled and defined the configured event reports with the attached equipment.
<br>The value is not used for DCC managed Trace Reports.</td>
</tr>

<tr>
<td>ts_received</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>Used to record the local timezone timestamp for when the Event Report
or Trace Report was last received by the DCC, as a call to the procedure
<a href="#dc_secs_insert">dc_secs_insert</a>.&nbsp;&nbsp;
The value can be used for status and diagnostics.</td>
</tr>

<tr>
<td>last_result</td>

<td>&nbsp;</td>

<td>varchar(2000)</td>

<td>Used to record the result of executing <a href="#dc_secs_insert">dc_secs_insert</a>
for the event.&nbsp;&nbsp; The value can be used for status and diagnostics.</td>
</tr>
</table>

<p><a NAME="dc_secs_host"></a><b>dc_secs_host Table -&nbsp;&nbsp; SECS
Host and Event Report Discovery</b>
<p>This table is used to record which SECS Host interface instances are
found as participants in the DMH message group, and to show the asynchronous
results from contacting each instance to discover Event report configurations.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>datahub</td>

<td>*PCK</td>

<td>varchar(80)</td>

<td>Used as a primary key in the persistent database, but not for the in-memory
tables.&nbsp; You may have a persistent database which is shared among
DCC instances.</td>
</tr>

<tr>
<td>spname</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The name of the SECS host interface connection.&nbsp; The connection
is assumed to be using the Hume GEM Host application software.&nbsp;</td>
</tr>

<tr>
<td>ts_command</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>The local timezone timestamp when the latest command was sent to the
SECS host using the DMH message system.</td>
</tr>

<tr>
<td>last_command</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>A short, readable description such as "event report discovery" for
the last command message sent to the SECS host interface.</td>
</tr>

<tr>
<td>last_result</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>A short, readable description for the Host's response (or lack of response)
such as "Event report data obtained." or "TIMEOUT".&nbsp;</td>
</tr>
</table>

<p><a NAME="dc_secs_trace"></a><b>dc_secs_trace Table -&nbsp;&nbsp; Configuration
and Status of SECS Trace Reports</b>
<p>This table is used to record trace report configurations defined by
the system user.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>datahub</td>

<td>*PCK</td>

<td>varchar(80)</td>

<td>Used as a primary key in the persistent database, but not for the in-memory
tables.&nbsp; You may have a persistent database which is shared among
DCC instances.</td>
</tr>

<tr>
<td>spname</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The name of the SECS host interface connection.&nbsp;</td>
</tr>

<tr>
<td>trace_number</td>

<td>PCK</td>

<td>int</td>

<td>For maximum compatibility with SECS equipment, the DCC forces the choice
of positive integers for trace request identifiers (SEMI "TRID").&nbsp;</td>
</tr>

<tr>
<td>description</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>Comments defined by the user, displayed when viewing the list of configured
traces.</td>
</tr>

<tr>
<td>period_secs</td>

<td>&nbsp;</td>

<td>float</td>

<td>The sampling period in seconds.&nbsp; The DCC will allow the period
to be configured as short as 0.1 seconds.&nbsp; Most equipment does not
accept the newer format of S2F23 and cannot be told to use non-integer
values, or values less than 1 second.
<p>Even for integer values, the user's desired value may be unacceptable
to the equipment, in which case the numeric error code of 3 is seen in
the last_result value when the trace is started.&nbsp;</td>
</tr>

<tr>
<td>total_samples</td>

<td>&nbsp;</td>

<td>int</td>

<td>A positive value for the total number of samples to be acquired by
the trace.&nbsp; The total samples must be evenly divisible by the report_sample_ct
value.</td>
</tr>

<tr>
<td>report_sample_ct</td>

<td>&nbsp;</td>

<td>int</td>

<td>The number of sample values to be reported in each Trace Report SECS
message.&nbsp; Defaults to 1.&nbsp;</td>
</tr>

<tr>
<td>ts_started</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>A timestamp in the local timezone when the request to start tracing
was replied to with success.</td>
</tr>

<tr>
<td>ts_stopped</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>A timestamp in the local timezone for the projected completion time
of a trace.&nbsp; The value is set when the start command has been replied
to with success.</td>
</tr>

<tr>
<td>ts_command</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>A timestamp in the local timezone when the latest trace report related
command was sent to the SECS host interface.</td>
</tr>

<tr>
<td>last_command</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>A short, readable description such as "start/restart" for the last
trace report related command sent to the SECS host interface.</td>
</tr>

<tr>
<td>last_result</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>The reply message received from the latest trace report related command
sent to the SECS host interface.&nbsp; A typical success value is "0 0"
which shows that a Tcl procedure was executed without error, and the return
code of the procedure was a 0 indicating success.&nbsp; A typical failure
is signaled with the literal text TIMEOUT which is seen if the SECS host
interface, or SECS equipment is not communicating.</td>
</tr>
</table>

<p><a NAME="dc_secs_var_map"></a><b>dc_secs_var_map Table -&nbsp;&nbsp;
Mapping of SECS Trace Report and Event Report Data Items</b>
<p>This table holds configuration data describing the mapping of SECS variable
values to DCC items.&nbsp; The table is consulted by the logic of the <a href="#dc_secs_insert">dc_secs_insert</a>
command to determine which data items in an Event Report or Trace Report
are to be added to which DCC item.&nbsp; The <a href="#dc_secs_discovery">dc_secs_discovery</a>
logic adds records to the table that reflect the Event Report configurations
that it finds.&nbsp; The user can then update the table to determine which
report values are saved, and to determine which DCC items the values are
saved under.&nbsp; The latter choice can vary by event type.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>datahub</td>

<td>*PCK</td>

<td>varchar(80)</td>

<td>Used as a primary key in the persistent database, but not for the in-memory
tables.&nbsp; You may have a persistent database which is shared among
DCC instances.</td>
</tr>

<tr>
<td>spname</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The name of the SECS host interface connection.&nbsp;</td>
</tr>

<tr>
<td>CEID</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The SECS Event Report Collection Event ID.&nbsp; For Event Report types
that are discovered from the SECS Host instances, this is the "VFEI" Event_ID
seen in the GEM Host user interface list of configured reports.
<p>For Trace Reports that managed by the DCC, the CEID values are patterned
as "TRACE_REPORT.$n" where $n is an integer value used as the "trace_number"
identifier.</td>
</tr>

<tr>
<td>varID</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The low-level SECS variable identifier such as an integer code.</td>
</tr>

<tr>
<td>module_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>Part of the target DCC item identifier.&nbsp; Defaults to the spname
value when discovering new Event Reports or defining new Trace Reports.</td>
</tr>

<tr>
<td>item_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>Part of the target DCC item identifier.&nbsp; Defaults to the variable
name value when discovering new Event Reports or defining new Trace Reports.</td>
</tr>

<tr>
<td>EI_configured</td>

<td>&nbsp;</td>

<td>varchar</td>

<td>Used as a boolean with values 1 or 0, or an empty string when the value
is not known or not relevant.&nbsp; This field is set to 1 for Event Report
variables that the DCC determines are configured at the SECS host interface.&nbsp;
This field is set to 0 if the DCC determines that the variable is no longer
configured as part of the Event Report.&nbsp;
<p>The value is not used for DCC managed Trace Reports.</td>
</tr>

<tr>
<td>is_collected</td>

<td>&nbsp;</td>

<td>int</td>

<td>This value is used as a boolean to indicate whether values of this
variable, when received in the CEID report, should be collected by the
DCC.&nbsp; More than one variable can be received in a report.&nbsp; The
user can defined which variables in a report are to saved or ignored.&nbsp;</td>
</tr>

<tr>
<td>track_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>The configured value of the track_id gets copied into the dc_data records.&nbsp;
The track_id value is typically a Lot identifier or similar tracking ID.&nbsp;
This is a workable scheme for manually initiated Trace Reports.&nbsp; For
automatically collected Event Reports, the track_id value can be dynamically
updated by custom logic since it is not practical to expect the Event Report
saving to be manually reconfigured with every lot.</td>
</tr>
</table>

<p><a NAME="dc_user"></a><b>dc_user Table -&nbsp;&nbsp; User Profile Data</b>
<p>This table is used to help provide application level security. A user
belongs to one or more security groups. A group is associated with privileges.
At login, the user is given the union of all privileges associated with
the groups that he is a member of. The application logic is coded to enable
buttons and menu actions depending on the possession of specific privileges
by the user.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>user_id</td>

<td>PK</td>

<td>varchar(32)</td>

<td>A shorthand identification of the user. Consistent with other names
in the application, the <b>user_id</b> should not contain any embedded
spaces.</td>
</tr>

<tr>
<td>user_name</td>

<td>&nbsp;</td>

<td>varchar(60)</td>

<td>Usually used to hold the firstname and lastname of the user.</td>
</tr>

<tr>
<td>password</td>

<td>&nbsp;</td>

<td>varchar(60)</td>

<td>An encoded representation of the user's password created using the
Tcl dc_encode procedure or its equivalent.&nbsp;</td>
</tr>

<tr>
<td>timeout_secs</td>

<td>&nbsp;</td>

<td>int</td>

<td>Some user interfaces support automatically logging out a session where
the application has been left idle for a number of seconds in excess of
this value.&nbsp; Hume provided versions of Tcl provide a <b>winfo timelastevent</b>
command which can be polled to determine if the application is idle.</td>
</tr>

<tr>
<td>ts_lastedit</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>A "localtime 16" timestamp for the last time that the User's record
or associated security group membership data was updated using the DCC
API. We are consistently using UTC timezone values.&nbsp;</td>
</tr>

<tr>
<td>lasteditor</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>The <i>user_id</i> of the person who last updated the User's record
using the DCC API.</td>
</tr>

<tr>
<td>clientdata</td>

<td>&nbsp;</td>

<td>varchar(1000)</td>

<td>A field for applications to store miscellaneous per-User data such
as badge numbers, desired window placements, etc.</td>
</tr>
</table>

<p><a NAME="dc_user_group"></a><b>dc_user_group Table -&nbsp;&nbsp; Security
Groups</b>
<p>A User is associated with any number of Security Groups. This table
is used to identify and describe the groups.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>group_id</td>

<td>PK</td>

<td>varchar(32)</td>

<td>The <b>group_id</b> is a shorthand name for the security group. It
obeys the same naming conventions of other names in the DCC system.&nbsp;</td>
</tr>

<tr>
<td>description</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>A description for the security group assigned when the group is created
or updated. The DCC API does not allow saving a group configuration with
a blank description.</td>
</tr>
</table>

<p><a NAME="dc_user_grp_assoc"></a><b>dc_user_grp_assoc Table -&nbsp;&nbsp;
User - Security Group Associations</b>
<p>This table holds the association of Users to Security Groups. A User
can belong to any number of groups.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>user_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The User key value.</td>
</tr>

<tr>
<td>group_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The Security Group key value.</td>
</tr>
</table>

<p><a NAME="dc_user_priv_assoc"></a><b>dc_user_priv_assoc Table -&nbsp;&nbsp;
Security Group Privilege Associations</b>
<p>This table holds the associations of Privileges to Security Groups.&nbsp;
A privilege can be assigned to any number of Security Groups.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>group_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The Security Group key value.</td>
</tr>

<tr>
<td>privilege_id</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The Privilege key value.</td>
</tr>
</table>

<p><a NAME="dc_user_privilege"></a><b>dc_user_privilege Table -&nbsp;&nbsp;
Security Privileges</b>
<p>A protected application feature such as entering data, is assigned a
Privilege name. The application logic is coded to check if the user has
the assigned privilege before allowing access to the feature.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>privilege_id</td>

<td>PK</td>

<td>varchar(32)</td>

<td>A shorthand name for the Privilege.&nbsp; Obeys the same naming conventions
as other names in the DCC system.</td>
</tr>

<tr>
<td>description</td>

<td>&nbsp;</td>

<td>varchar(80)</td>

<td>A description provided when saving the Privilege.&nbsp; The DCC API
does not allow saving a blank description.</td>
</tr>
</table>

<p><a NAME="dc_user_session"></a><b>dc_user_session Table -&nbsp;&nbsp;
User Session Status</b>
<p>This table is used to track the existence of User Sessions and logins.
The table only exists in the DCC server, and not in the persistent database.
By tracking the DMH Server's identification for a client connection, the
logic can know if a User Session has disconnected, and if so, the logic
performs an automatic logout. Fields such as the <b>user_id</b> or <b>ts_login</b>
are empty strings until the associated action is performed.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<th>Column Name</th>

<th>Key</th>

<th>Type</th>

<th>Description</th>
</tr>

<tr>
<td>display</td>

<td>PCK</td>

<td>varchar(80)</td>

<td>This field is the X-Windows DISPLAY value for the user session, or
the Windows hostname.</td>
</tr>

<tr>
<td>dmh_clientID</td>

<td>PCK</td>

<td>varchar(32)</td>

<td>The DCC logic is able to determine the DMH server's identification
of the client from the global variable <b>dp_rpcFile</b> which is set to
the client's identification during command message processing.</td>
</tr>

<tr>
<td>logged_in</td>

<td>&nbsp;</td>

<td>int</td>

<td>Used as a boolean to indicate whether the user is currently logged
in.</td>
</tr>

<tr>
<td>user_id</td>

<td>&nbsp;</td>

<td>varchar(32)</td>

<td>The key value for the User who last logged in.</td>
</tr>

<tr>
<td>user_name</td>

<td>&nbsp;</td>

<td>varchar(60)</td>

<td>The User name copied from the <b>dc_user</b> table field at the time
of login.&nbsp;</td>
</tr>

<tr>
<td>ts_login</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>This field is updated to show the timestamp of the latest login for
the User Session. We consistently use the UTC timezone values.&nbsp;</td>
</tr>

<tr>
<td>ts_logout</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>The timestamp of the last logout for the User Session.</td>
</tr>

<tr>
<td>ts_startup</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>The timestamp when the User Session is first known to exist. A proper
UI application calls the <a href="#dc_user_session proc">dc_user_session</a>
procedure at application to announce its existence. The existence of a
User Session is also inferred from calls to the <a href="#dc_user_login">dc_user_login</a>
procedure.</td>
</tr>

<tr>
<td>privileges</td>

<td>&nbsp;</td>

<td>varchar(2000)</td>

<td>The union of privileges for the logged in user as returned by the <b>dc_user_login</b>
procedure.&nbsp;</td>
</tr>

<tr>
<td>clientdata</td>

<td>&nbsp;</td>

<td>varchar(1000)</td>

<td>Copied from the
<b>dc_user</b> table at the time of the last login.&nbsp;</td>
</tr>
</table>

<p><a NAME="dmh_trace"></a><b>dmh_trace Table -&nbsp;&nbsp; DMH message
system trace messages</b>
<p>The DCC application has customized the Trace feature of the Hume DMH
message system.&nbsp; Messages that are sent the the DMH mailbox <b>TRACE</b>
are appended to this table where they can be queried or subscribed to.&nbsp;
During startup with a persistent database, messages are sent to TRACE to
show the progress of reading table data.&nbsp; While running the system,
there can be other messages sent to TRACE if Tcl programming errors occur.&nbsp;
The System Administrator should display the data of this table to see if
there are diagnostic messages in the event of abnormal behavior.&nbsp;
By having the data in a table, the hubclient application can be used from
another workstation to display the data.&nbsp; There is automatic trimming
logic to keep the number of rows to less than 1000.&nbsp; This table only
exists as an in-memory table in the DCC server.
<br>&nbsp;
<table BORDER WIDTH="100%" >
<tr>
<td><b>Column Name</b></td>

<td><b>Key</b></td>

<td><b>Type</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>id</td>

<td>PK</td>

<td>varchar(6)</td>

<td>An increasing sequence number padded and formatted as a character string
so that the messages are sorted from oldest to newest.</td>
</tr>

<tr>
<td>timestamp</td>

<td>&nbsp;</td>

<td>varchar(26)</td>

<td>A high resolution local timezone timestamp YYYY-MM-DD HH:MM:SS.mmmmmm
showing the instant that the message was appended to the table.</td>
</tr>

<tr>
<td>tracemsg</td>

<td>&nbsp;</td>

<td>varchar(15000)</td>

<td>The text of the trace message.</td>
</tr>
</table>

<p>
<hr WIDTH="100%"><a NAME="LicenseTerms"></a>
<h2>
License Terms</h2>
The Data Collection Component software is not part of the Hume Datahub
SDK; it is available as a separate licensed product. Contact Hume Integration
for current terms.
<hr WIDTH="100%">
<h2>
<a NAME="DocVersion"></a>Document Version</h2>
Date of last revision: $Date: 2004/07/15 15:30:12 $
<p>This document covers the Hume Integration Software developed Data Collection
Component which is available for the Tcl 8.4/Tk 8.4 environment on the
Windows XP/2000/NT and UNIX/POSIX platforms.
</body>
</html>
