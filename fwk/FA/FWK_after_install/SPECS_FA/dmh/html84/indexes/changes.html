<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.77 [en] (Windows NT 5.0; U) [Netscape]">
   <title>Recent Changes of Tcl/Tk/DMH</title>
</head>
<body>
<a NAME="New Or Changed"></a>
<h1>Tcl/Tk &amp; Datahub SDK Recent Changes</h1>
This document was last changed on $Date: 2005/06/09 12:54:36 $ when the
current release of the Hume Datahub SDK was based on
Tcl 8.4.4 and Tk 8.4.4. As new changes are added to this document, the
older changes are deleted so that the document size remains manageable.
<p>
<h2>Compatibility Issues with Tcl/Tk version 8.4</h2>
<ul>
<li>With Tcl version 8.4, the Hume DMH84 distribution has been revised
to use the <b>::dmh</b> namespace to prevent future name conflicts such
as occurred with the Tcl 8.4 <a href="../mann/lset.html">lset</a> command.
The Hume package lset command has been renamed <a href="../mann/vset.html">
vset</a>.  Read more about the new namespace and compatibility issues in the
<a href="../mann/dmh_import.html">dmh_import</a> document.&nbsp; Most applications
will need to call <b>dmh_import</b> and change usage of <b>lset</b> to <b>vset</b>
in order to use the new version.&nbsp;
The new Tcl commands <a href="../mann/dmh_import.html">dmh_import</a>, 
<a href="../mann/dmh_var.html">dmh_var</a>, and <a href="../mann/vset.html">vset</a> 
have been added to both the DMH83 and the DMH84 distributions and 
to the GEM application library to support deploying
applications that are compatible with Tcl 8.3 and Tcl 8.4+.&nbsp; (10/1/2002).</li>
<li>The DMH84 distribution includes updated versions of [incr Tcl] (3.3 vs 3.2)
[incr Tk] (3.3 vs 3.2), and Iwidgets (4.0 vs 3.0).  We suggest continuing
to use the older versions with DMH83, and just using the newer versions with
DMH84, as testing has revealed some compatibility issues. (10/1/2002).</li>
</ul>
<p>
<h2> Recent Hume Changes and Improvements</h2>
<ul>
<li>A new Java class library for deploying host SECS interfaces was added to the Datahub SDK.&nbsp;
See the <a href="JavaSecsHost.html" target="_blank">Java SecsHost</a> document.
(6/9/05).
</li>
<li>The Tcl <b>comm</b> command was improved so that arbitrary 8 bit binary data can be
handled using the string oriented subcommands.  Recent versions of Tcl 
are able to represent binary data in string values using UTF-8 encoding. (5/18/05).</li>
<li>The SEMI E5 standard has an incorrect message structure for S13F2, and equipment exists
where the incorrect structure is implemented.  A fix has been added to the receiving logic to add
an L:2 wrapper if the incorrect format with two adjacent data items is received. (4/19/05).</li>
<li>The .NET SecsPort and the other SECS libraries support using the new
SecsServer.exe program for a simpler runtime deployment. (4/6/05).</li>
<li>New methods to support Equipment initiated Process Program transfers were added to the SECS equipment software.  New code was also added to the SECS Host applications to respond to the equipment initiated transfers.&nbsp; Also a new version of SendSecsMsg() was added to the .NET, VC++, and VB SECS libraries to provide parsed result data.  Changes to the SECS equipment clock_offset value 
are now passed to the SECS libraries in the StateChange event. (4/6/05)</li>
<li>Minor changes to some font declarations were made for Solaris 10 x86 and SUSE 9.2 Linux.
Also namespace dmh export logic was revised to fix errors when using -notk. (4/5/05)</li>
<li>Fixed a bug with the GEM Host creation of the recipe upload directory on Windows when the GNU file utilities are not installed.&nbsp; The GEM Host recipe directory was also made configurable when using the supervisor. (2/24/05, 9/28/04).</li>
<li>The Java DMH client library was updated for JDK 1.5 with the type safety of Generics. (2/1/05)  A new static split method and more lappend methods were added to the TclList class. (5/27/05). </li>
<li>The 4.0 Iwidgets dateentry class constructor was fixed to not explicitly call the base class
constructor. (1/25/05).</li>
<li>A New Visual C++ library <A href="VCSecsEquip.html" target="_blank">SecsEquip</a> 
and a new Visual Basic Active-X control <a href="VBSecsEquip.html" target="_blank">SecsEquip.ocx</a>
have been created for deploying SECS Equipment interfaces.  These products have the
desirable features of the new .NET <A href="SecsPort.html" target="_blank">SecsPort</a> component, 
and are intended for Equipment Manufacturers who prefer to use Visual C++ or Visual Basic 6.0.
(1/18/05)</li>
<li>A new Status Variable DvvalList has been added to the GEM Equipment application to
enable the Host to discover DVVAL variables.&nbsp; This addition fills a gap in
the SECS/GEM standards. &nbsp;Other variables PPError, PPFormat, RcpChangeName, and RcpChangeStatus have been added to update for the latest E30 version. (11/19/04).</li>
<li>New Windows .NET software for deploying <A href="SecsPort.html" target="_blank"> 
Equipment SECS interfaces</A> and for deploying <A href="SecsHost.html" target="_blank">Host SECS interfaces</a>
has been added to the Hume Datahub SDK.&nbsp;
The new .NET components provide all the usual GEM/SECS capabilities 
in native .NET APIs.(10/18/04)</li>
<li>Minor changes have been made to the Tcl GEM Equipment application to better
integrate recipe management and spooling with the new .NET software.&nbsp; 
Similarly, minor changes have been made to the GEM Host application for better
integration with the new .NET component.&nbsp; Also,
the handling of ASCII recipe data by the GEM host software has been revised to 
treat it as binary, in order to avoid changes from code page or newline translation.&nbsp;
The format of received message tracing was tweaked to show an R if a reply was
requested.&nbsp; Handling of the gemsim ControlMode variable was revised.&nbsp; The maximum length
of SECS variable names was increased to 256 characters from 32.
(11/8/04).</li>
<li>Improvements were made to the HSMS logic and the GEM applications when
setting up or recovering a connection.&nbsp; The active client setup was revised to be
asynchronous which improves responsiveness when the passive side is down.&nbsp;
The default TRACE values were changed to include state and connection information.&nbsp;(9/24/04)
The reconnection logic was improved to prevent multiple retrying loops (2/1/05).
When a passive server sees additional connection attempts, a linktest is done with the
existing connection to hasten discovery of a broken connection. (5/17/05).</li>
<li><A href="lnkDMHdotnet.html" target="_blank">New DMH Client software</a> is available for the Windows .NET Framework. (8/13/04).</li>
<li>A change in the DMH logic was made to favor receiving reply messages
to the <b>mbx_do_xact</b>, <b>mbx_timed_get</b>, and <b>mbx_xact_pat</b> commands
in the situation when messages are being sent to mailboxes read by a Tcl DMH
client at a rate faster than they are being received and processed. (6/23/04).</li>
<li>A catch statement was added in the hsms logic to prevent an error
if the passive side disconnects immediately after allowing the connection.&nbsp;
Other minor changes have been made to allow for discontinuing active reconnect
attempts if communication is disabled.&nbsp; A change was made to avoid errors
when closing an hsms connection from a whenmsg callback.  (6/9/04, 9/13/04, 1/25/05).</li>
<li>The DMH POSIX C library was updated to include new API calls for sending and receiving binary messages in March 2004.  The receiving logic has been revised to favor receiving reply or timed receive messages when both new asynchronous and reply messages are available. (1/21/05).</li>
<li>The 4.0 Iwidgets hierarchy and scrolledlistbox classes were updated to scroll for MouseWheel events on windows. (3/23/04).</li>
<li>The <a href="../man1/dmh_inspect.html">inspect</a> interactive development tool
was replaced with a new version written by Hume Integration.&nbsp; The new <b>inspect</b>
supports new features of Tcl/Tk such as namespaces, child interpreters, channels, packages, 
and working with [incr Tcl] classes and objects. (2/4/2004)</li>
<li>The conversion of Tcl data strings to and from SECS ASCII data was made UTF-8 aware
so that null characters embedded in ASCII data can be handled. (1/28/04)</li>
<li>The [incr Tk] Toplevel class was revised to support the -menu option, and the
menu code in the 4.0 Iwidgets hyperhelp widget was revised so accelerator keys work
properly.  Leaking of open document file channels was also fixed for this widget, 
and the scrolledhtml widget was revised to support the &amp;amp; substitution. (1/26/04).</li>
<li>A new package loading feature was added to the <a href="../man1/dmh_wish.html">dmh84</a> executeable when it is renamed.&nbsp; This new feature is an exciting and more powerful alternative
to .bat files and executeable scripts. (9/31/03). </li>
<li>The Windows dmh84.exe (dmh_wish.exe) icon was updated from the network halo to the integrated
H.&nbsp; Version information was added to the dmh84.dll file.(1/25/05)</li>
</ul>

<h2>
New with Tcl/Tk 8.4</h2>

<ul>
<li><a href="http://wiki.tcl.tk/1611.html">Numerous performance enhancements.</a>
<li>A new core command <a href="../mann/lset.html">lset</a> for updating elements in 
a list.
<li><a href="http://wiki.tcl.tk/vfs">Virtual file system.</a>
<li>Enhanced commands:
<ul>
<li><a href="../mann/lindex.html">lindex</a>
<li><a href="../mann/lsearch.html">lsearch</a>
<li><a href="../mann/regsub.html">regsub</a>
<li><a href="../mann/trace.html">trace</a>
<li><b>eq</b> and <b>ne</b> string comparison operators for <a href="../mann/expr.html">expr</a>
<li>64-bit <a href="../mann/expr.html">expr</a> support
</ul>
<li>New Tk widgets:
<ul>
<li><a href="../mann/labelframe.html">labelframe</a>
<li><a href="../mann/tk_panedwindow.html">panedwindow</a>
<li><a href="../mann/spinbox.html">spinbox</a>
</ul>
<li>compound <a href="../mann/button.html">buttons</a>, 
<a href="../mann/label.html">labels</a>, and <a href="../mann/menu.html">menu</a> items.
</ul>

<h2>
Hume Changes to the 8.4 Tcl/Tk Core Distribution</h2>

<ul>
<li>
Hume has fixed a problem in the Tk library tk::EntryAutoScan procedure which
affected ordering keystroke entry on Windows, when using entry widgets
with modal windows, and having done a mouse drag selection of text in the
entry widget, and releasing the mouse button to the left of the entry widget.
This bug and fix have been reported using SourceForge.
(12/11/01)</li>

<li>
The command <a href="../mann/memory_stats.html">memory_stats</a> is added,
and compiled by default for Windows NT.</li>

<li>
The <b>NT console</b> menu has a new item to display errorInfo,
and a new item to display the HTML documentation. Bindings are added for
Motif style cut-and-paste and NT style right button paste. These changes
are actually done at runtime without changing the core code.&nbsp; The
changes that Hume has made in the past to make the console safe for 
memory use are no longer needed - the core has similar logic.</li>

<li>
The Tk C code is patched for Windows NT so that <b>winfo interps</b> works
using DDE.</li>

<li>
The Tcl library is patched so that index files of the name <b>tclindex.txt</b>
are used if <b>tclIndex</b> is not found. This enables Tcl to execute from
an ISO 9660 CDROM image where tclIndex is not a valid filename.</li>

<li>
The Tk C code is patched to create an option to the winfo command, timelastevent.
Executing
<b>winfo timelastevent</b> returns a value that changes with
each new window event. This value will be unchanged over time when there
has been no user interaction with the window interface. An application
can poll this value using after, and determine if the user has been inactive.</li>

<li>
Hume compiles the Tcl DLL on windows NT so that <b>256 socket connections</b>
are possible. The default compilation results in a limit of 64.</li>

<li>
The <b>NT tclWinPipe.c</b> file is patched so that built in shell commands like "type"
work without the user specifying cmd.exe /c. Also, NT batch files with
the extension .cmd are made executable.&nbsp; Hume has fixed an 8.4 revision to the 
preparation of exec command line arguments on NT that interferes with passing arguments
containing braces.&nbsp; Hume has also revised handling of NT interactive shell 
commands in the Tcl library init.tcl file to allow mixed case commands.</li>

<li>
Hume converts the Tcl/Tk man pages to HTML, adds new pages, and provides
custom indexes. Hume removes multiple, strange occurrences of "the the"
from the man pages. Hume has revised the <a href="../mann/encoding.html">encoding</a>
man page which had erroneous information regarding Tcl's internal string
representation.</li>

</ul>

</body>
</html>
